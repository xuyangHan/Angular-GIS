{"version":3,"sources":["./node_modules/@arcgis/core/arcade/arcadeAsyncRuntime.js"],"names":[],"mappings":"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","file":"arcade-arcadeAsyncRuntime-js.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{create as e,all as t,reject as r,resolve as n}from\"../core/promiseUtils.js\";import o from\"../geometry/SpatialReference.js\";import a from\"../geometry/Geometry.js\";import c from\"../geometry/Point.js\";import i from\"../geometry/Extent.js\";import s from\"../geometry/Multipoint.js\";import l from\"../geometry/Polygon.js\";import u from\"../geometry/Polyline.js\";import f from\"./FunctionWrapper.js\";import h from\"./ImmutablePointArray.js\";import p from\"./ImmutablePathArray.js\";import{p as d,i as m,n as g,N as y,R as E,I as w,v,x as N,y as I,e as b,h as T,b as S,o as R,z as O,a as A,q as U,c as C,s as F,u as M,r as x,f as P,A as D}from\"../chunks/languageUtils.js\";import j from\"./Dictionary.js\";import k from\"./ArcadePortal.js\";import L from\"./Attachment.js\";import{reduceArrayWithPromises as _}from\"./featureset/support/shared.js\";import V from\"./Feature.js\";import{addFunctionDeclaration as B,findFieldLiterals as Y,validateScript as G,referencesMember as z,referencesFunction as q,findFunctionCalls as H,nodeErrorMessage as Z}from\"./treeAnalysis.js\";import{registerFunctions as W}from\"./functions/array.js\";import{registerFunctions as K}from\"./functions/date.js\";import{registerFunctions as X}from\"./functions/geometry.js\";import{registerFunctions as J}from\"./functions/maths.js\";import{registerFunctions as Q}from\"./functions/stats.js\";import{registerFunctions as $}from\"./functions/string.js\";import{registerFunctions as ee}from\"./functions/geomasync.js\";function te(e){return e&&\"function\"==typeof e.then}const re=100;function ne(e){return e instanceof Error?r(e):r(new Error(e))}function oe(e){return n(e)}function ae(e,r){const n=[];for(let t=0;t<r.arguments.length;t++)n.push(se(e,r.arguments[t]));return t(n)}function ce(t,r,n){return e(((e,o)=>{ae(t,r).then((a=>{try{e(n(t,r,a))}catch(c){o(c)}}),o)}))}function ie(e,t,r){try{return ae(e,t).then((o=>{try{const a=r(e,t,o);return te(a)?a:n(a)}catch(a){return ne(a)}}))}catch(o){return ne(o)}}function se(e,t,r){try{if(t.breakpoint&&!0!==r){return t.breakpoint().then((()=>se(e,t,!0)))}switch(t.type){case\"VariableDeclarator\":return Me(e,t);case\"VariableDeclaration\":return Fe(e,t,0);case\"BlockStatement\":return Oe(e,t);case\"FunctionDeclaration\":return Ce(e,t);case\"ReturnStatement\":return Ue(e,t);case\"IfStatement\":return Re(e,t);case\"ExpressionStatement\":return Se(e,t);case\"UpdateExpression\":return Ie(e,t);case\"AssignmentExpression\":return Te(e,t);case\"ForStatement\":return de(e,t);case\"ForInStatement\":return Ne(e,t);case\"BreakStatement\":return n(N);case\"EmptyStatement\":return n(v);case\"ContinueStatement\":return n(I);case\"TemplateElement\":return Ye(e,t);case\"TemplateLiteral\":return Ge(e,t);case\"Identifier\":return Ve(e,t);case\"MemberExpression\":return De(e,t);case\"Literal\":return oe(t.value);case\"CallExpression\":return Be(e,t);case\"UnaryExpression\":return je(e,t);case\"BinaryExpression\":return Le(e,t);case\"LogicalExpression\":return _e(e,t);case\"ConditionalExpression\":return ne(Z(t,\"RUNTIME\",\"NOTSUPPORTED\"));case\"ArrayExpression\":return ke(e,t);case\"ObjectExpression\":return le(e,t);case\"Property\":return ue(e,t);default:return ne(Z(t,\"RUNTIME\",\"UNREOGNISED\"))}}catch(o){return ne(o)}}function le(r,n){try{const o=[];for(let e=0;e<n.properties.length;e++)o.push(se(r,n.properties[e]));return t(o).then((t=>e((e=>{const r={};for(let o=0;o<t.length;o++){const e=t[o];if(U(e.value))throw new Error(\"Illegal Argument\");if(!1===S(e.key))throw new Error(\"Illegal Argument\");e.value===v?r[e.key.toString()]=null:r[e.key.toString()]=e.value}const n=new j(r);n.immutable=!1,e(n)}))))}catch(o){return ne(o)}}function ue(t,n){try{return se(t,n.value).then((r=>e((e=>{\"Identifier\"===n.key.type?e({key:n.key.name,value:r}):se(t,n.key).then((t=>{e({key:t,value:r})}))}))))}catch(o){return r(o)}}function fe(e,t,o){try{return se(e,t.body).then((a=>{try{return o.lastAction=a,o.lastAction===N||o.lastAction instanceof E?(o.testResult=!1,n(o)):null!==t.update?se(e,t.update).then((()=>n(o))):n(o)}catch(c){return r(c)}}))}catch(a){return r(a)}}function he(e,t,o){try{return null!==t.test?se(e,t.test).then((a=>{try{return!0===e.abortSignal.aborted?r(new Error(\"Cancelled\")):(o.testResult=a,!1===o.testResult?n(o):!0!==o.testResult?r(new Error(Z(t,\"RUNTIME\",\"CANNOT_USE_NONBOOLEAN_IN_CONDITION\"))):fe(e,t,o))}catch(c){return r(c)}})):fe(e,t,o)}catch(a){return r(a)}}function pe(e,t,r,n,o,a){try{he(e,t,r).then((()=>{try{!0===r.testResult?++a>re?(a=0,setTimeout((()=>{pe(e,t,r,n,o,a)}),0)):pe(e,t,r,n,o,a):r.lastAction instanceof E?n(r.lastAction):n(v)}catch(c){o(c)}}),(e=>{o(e)}))}catch(c){o(c)}}function de(t,n){try{return null!==n.init?se(t,n.init).then((()=>e(((e,r)=>{pe(t,n,{testResult:!0,lastAction:v},(t=>{e(t)}),(e=>{r(e)}),0)})))):e(((e,r)=>{pe(t,n,{testResult:!0,lastAction:v},(t=>{e(t)}),(e=>{r(e)}),0)}))}catch(o){return r(o)}}function me(e,t,r,n,o,a,c,i,s,l){try{if(n<=a)return void i(v);o.value=\"k\"===c?r[a]:a,se(e,t.body).then((u=>{try{u instanceof E?i(u):u===N?i(v):++l>re?(l=0,setTimeout((()=>{me(e,t,r,n,o,a+1,c,i,s,l)}),0)):me(e,t,r,n,o,a+1,c,i,s,l)}catch(f){s(f)}}),(e=>{s(e)}))}catch(u){s(u)}}function ge(e,t,r,n,o,a,c,i,s){try{if(r.length()<=o)return void c(v);n.value=\"k\"===a?r.get(o):o,se(e,t.body).then((l=>{l instanceof E?c(l):l===N?c(v):++s>re?(s=0,setTimeout((()=>{ge(e,t,r,n,o+1,a,c,i,s)}),0)):ge(e,t,r,n,o+1,a,c,i,s)}),(e=>{i(e)}))}catch(l){i(l)}}function ye(e,t,r,n,o,a){try{if(void 0===a&&(a=\"i\"),0===r.length)return void n.resolve(v);me(e,t,r,r.length,o,0,a,(e=>{n.resolve(e)}),(e=>{n.reject(e)}),0)}catch(c){n.reject(c)}}function Ee(e,t,r,n,o,a){try{if(void 0===a&&(a=\"i\"),0===r.length)return void n.resolve(v);ge(e,t,r,o,0,a,(e=>{n.resolve(e)}),(e=>{n.reject(e)}),0)}catch(c){n.reject(c)}}function we(e,t,r,n,o){try{ye(e,t,r.keys(),n,o,\"k\")}catch(a){n.reject(a)}}function ve(e,t,r,n,o,a,c,i){try{e.next().then((s=>{try{if(null===s)a(v);else{const l=V.createFromGraphicLikeObject(s.geometry,s.attributes,n);l._underlyingGraphic=s,o.value=l;se(t,r.body).then((s=>{try{s===N?a(v):s instanceof E?a(s):++i>re?(i=0,setTimeout((()=>{ve(e,t,r,n,o,a,c,i)}),0)):ve(e,t,r,n,o,a,c,i)}catch(l){c(l)}}),(e=>{c(e)}))}}catch(l){c(l)}}),(e=>{c(e)}))}catch(s){c(s)}}function Ne(t,r){return e(((e,o)=>{se(t,r.right).then((a=>{try{let c=null;c=\"VariableDeclaration\"===r.left.type?se(t,r.left):n(),c.then((()=>{try{let n=\"\";if(\"VariableDeclaration\"===r.left.type){const e=r.left.declarations[0].id;\"Identifier\"===e.type&&(n=e.name)}else\"Identifier\"===r.left.type&&(n=r.left.name);if(!n)throw new Error(Z(r,\"RUNTIME\",\"INVALIDVARIABLE\"));n=n.toLowerCase();let c=null;if(null!==t.localScope&&void 0!==t.localScope[n]&&(c=t.localScope[n]),null===c&&void 0!==t.globalScope[n]&&(c=t.globalScope[n]),null===c)return void o(new Error(Z(r,\"RUNTIME\",\"VARIABLENOTDECLARED\")));T(a)||S(a)?ye(t,r,a,{reject:o,resolve:e},c):R(a)?Ee(t,r,a,{reject:o,resolve:e},c):a instanceof j||a instanceof V?we(t,r,a,{reject:o,resolve:e},c):O(a)?ve(a.iterator(t.abortSignal),t,r,a,c,(t=>{e(t)}),(e=>{o(e)}),0):ye(t,r,[],{reject:o,resolve:e},c)}catch(n){o(n)}}),o)}catch(c){o(c)}}),o)}))}function Ie(t,o){try{const r=o.argument;if(\"MemberExpression\"===r.type){const a={t:null};return se(t,r.object).then((e=>{let o=null;return a.t=e,!0===r.computed?o=se(t,r.property):\"Identifier\"===r.property.type&&(o=n(r.property.name)),o})).then((t=>e((e=>{const r=a.t;let n;if(T(r)){if(!A(t))throw new Error(\"Invalid Parameter\");if(t<0&&(t=r.length+t),t<0||t>=r.length)throw new Error(\"Assignment outside of array bounds\");n=C(r[t]),r[t]=\"++\"===o.operator?n+1:n-1}else if(r instanceof j){if(!1===S(t))throw new Error(\"Dictionary accessor must be a string\");if(!0!==r.hasField(t))throw new Error(\"Invalid Parameter\");n=C(r.field(t)),r.setField(t,\"++\"===o.operator?n+1:n-1)}else{if(!(r instanceof V))throw R(r)?new Error(\"Array is Immutable\"):new Error(\"Invalid Parameter\");if(!1===S(t))throw new Error(\"Feature accessor must be a string\");if(!0!==r.hasField(t))throw new Error(\"Invalid Parameter\");n=C(r.field(t)),r.setField(t,\"++\"===o.operator?n+1:n-1)}!1===o.prefix?e(n):e(\"++\"===o.operator?n+1:n-1)}))))}return e(((e,r)=>{const n=\"Identifier\"===o.argument.type?o.argument.name.toLowerCase():\"\";if(!n)throw new Error(\"Invalid identifier\");let a;return null!==t.localScope&&void 0!==t.localScope[n]?(a=C(t.localScope[n].value),t.localScope[n]={value:\"++\"===o.operator?a+1:a-1,valueset:!0,node:o},void(!1===o.prefix?e(a):e(\"++\"===o.operator?a+1:a-1))):void 0!==t.globalScope[n]?(a=C(t.globalScope[n].value),t.globalScope[n]={value:\"++\"===o.operator?a+1:a-1,valueset:!0,node:o},void(!1===o.prefix?e(a):e(\"++\"===o.operator?a+1:a-1))):void r(new Error(\"Variable not recognised\"))}))}catch(a){return r(a)}}function be(e,t,r,n){switch(t){case\"=\":return e===v?null:e;case\"/=\":return C(r)/C(e);case\"*=\":return C(r)*C(e);case\"-=\":return C(r)-C(e);case\"+=\":return S(r)||S(e)?b(r)+b(e):C(r)+C(e);case\"%=\":return C(r)%C(e);default:throw new Error(Z(n,\"RUNTIME\",\"OPERATORNOTRECOGNISED\"))}}function Te(t,r){return e(((e,o)=>{const a=r.left;if(\"MemberExpression\"===a.type)se(t,r.right).then((c=>{try{se(t,a.object).then((i=>{try{let s=null;if(!0===a.computed)s=se(t,a.property);else{if(\"Identifier\"!==a.property.type)throw new Error(\"Expected computed or identifier for assignemnt target\");s=n(a.property.name)}s.then((t=>{try{if(T(i)){if(!A(t))throw new Error(\"Invalid Parameter\");if(t<0&&(t=i.length+t),t<0||t>i.length)throw new Error(\"Assignment outside of array bounds\");if(t===i.length){if(\"=\"!==r.operator)throw new Error(\"Invalid Parameter\");i[t]=be(c,r.operator,i[t],r)}else i[t]=be(c,r.operator,i[t],r)}else if(i instanceof j){if(!1===S(t))throw new Error(\"Dictionary accessor must be a string\");if(!0===i.hasField(t))i.setField(t,be(c,r.operator,i.field(t),r));else{if(\"=\"!==r.operator)throw new Error(\"Invalid Parameter\");i.setField(t,be(c,r.operator,null,r))}}else{if(!(i instanceof V))throw R(i)?new Error(\"Array is Immutable\"):new Error(\"Invalid Parameter\");if(!1===S(t))throw new Error(\"Feature accessor must be a string\");if(!0===i.hasField(t))i.setField(t,be(c,r.operator,i.field(t),r));else{if(\"=\"!==r.operator)throw new Error(\"Invalid Parameter\");i.setField(t,be(c,r.operator,null,r))}}e(v)}catch(n){o(n)}}),o)}catch(s){o(s)}}),o)}catch(i){o(i)}}),o);else{const n=a.name.toLowerCase();if(null!==t.localScope&&void 0!==t.localScope[n])return void se(t,r.right).then((a=>{try{t.localScope[n]={value:be(a,r.operator,t.localScope[n].value,r),valueset:!0,node:r.right},e(v)}catch(c){o(c)}}),o);void 0!==t.globalScope[n]?se(t,r.right).then((a=>{try{t.globalScope[n]={value:be(a,r.operator,t.globalScope[n].value,r),valueset:!0,node:r.right},e(v)}catch(c){o(c)}}),o):o(new Error(\"Cannot assign undeclared variable\"))}}))}function Se(t,n){try{return\"AssignmentExpression\"===n.expression.type?se(t,n.expression):(n.expression.type,se(t,n.expression).then((t=>e((e=>{e(t===v?v:new w(t))})))))}catch(o){return r(o)}}function Re(t,r){return e(((e,n)=>{\"AssignmentExpression\"!==r.test.type&&\"UpdateExpression\"!==r.test.type?se(t,r.test).then((o=>{try{!0===o?se(t,r.consequent).then(e,n):!1===o?null!==r.alternate?se(t,r.alternate).then(e,n):e(v):n(new Error(Z(r.test,\"RUNTIME\",\"CANNOT_USE_NONBOOLEAN_IN_CONDITION\")))}catch(a){n(a)}}),n):n(new Error(Z(r.test,\"RUNTIME\",\"CANNOT_USE_ASSIGNMENT_IN_CONDITION\")))}))}function Oe(e,t){try{return Ae(e,t,0)}catch(r){return ne(r)}}function Ae(t,r,o){try{return o>=r.body.length?n(v):e(((e,n)=>{se(t,r.body[o]).then((a=>{try{a instanceof E||a===N||a===I||o===r.body.length-1?e(a):Ae(t,r,o+1).then(e,n)}catch(c){n(c)}}),n)}))}catch(a){return ne(a)}}function Ue(t,r){return e(((e,n)=>{null===r.argument?e(new E(v)):se(t,r.argument).then((t=>{try{e(new E(t))}catch(r){n(r)}}),n)}))}function Ce(e,t){try{const r=t.id.name.toLowerCase();return e.globalScope[r]={valueset:!0,node:null,value:new f(t,e)},n(v)}catch(r){return ne(r)}}function Fe(t,r,n){return e(((e,o)=>{n>=r.declarations.length?e(v):se(t,r.declarations[n]).then((()=>{n===r.declarations.length-1?e(v):Fe(t,r,n+1).then((()=>{e(v)}),o)}),o)}))}function Me(t,r){try{let o=null;return o=null===r.init?n(null):se(t,r.init),null!==t.localScope?o.then((n=>e((e=>{if(n===v&&(n=null),\"Identifier\"!==r.id.type)throw new Error(\"Can only assign a regular variable\");const o=r.id.name.toLowerCase();t.localScope[o]={value:n,valueset:!0,node:r.init},e(v)})))):o.then((n=>e((e=>{if(\"Identifier\"!==r.id.type)throw new Error(\"Can only assign a regular variable\");const o=r.id.name.toLowerCase();n===v&&(n=null),t.globalScope[o]={value:n,valueset:!0,node:r.init},e(v)}))))}catch(o){return ne(o)}}let xe=0;function Pe(e,t,r,n){let o;switch(t=t.toLowerCase()){case\"hasz\":{const t=e.hasZ;return void 0!==t&&t}case\"hasm\":{const t=e.hasM;return void 0!==t&&t}case\"spatialreference\":{let t=e.spatialReference._arcadeCacheId;if(void 0===t){let r=!0;Object.freeze&&Object.isFrozen(e.spatialReference)&&(r=!1),r&&(xe++,e.spatialReference._arcadeCacheId=xe,t=xe)}const r=new j({wkt:e.spatialReference.wkt,wkid:e.spatialReference.wkid});return void 0!==t&&(r._arcadeCacheId=\"SPREF\"+t.toString()),r}}switch(e.type){case\"extent\":switch(t){case\"xmin\":case\"xmax\":case\"ymin\":case\"ymax\":case\"zmin\":case\"zmax\":case\"mmin\":case\"mmax\":{const r=e[t];return void 0!==r?r:null}case\"type\":return\"Extent\"}break;case\"polygon\":switch(t){case\"rings\":o=e.cache._arcadeCacheId,void 0===o&&(xe++,o=xe,e.cache._arcadeCacheId=o);return new p(e.rings,e.spatialReference,!0===e.hasZ,!0===e.hasM,o);case\"type\":return\"Polygon\"}break;case\"point\":switch(t){case\"x\":case\"y\":case\"z\":case\"m\":return void 0!==e[t]?e[t]:null;case\"type\":return\"Point\"}break;case\"polyline\":switch(t){case\"paths\":o=e.cache._arcadeCacheId,void 0===o&&(xe++,o=xe,e.cache._arcadeCacheId=o);return new p(e.paths,e.spatialReference,!0===e.hasZ,!0===e.hasM,o);case\"type\":return\"Polyline\"}break;case\"multipoint\":switch(t){case\"points\":o=e.cache._arcadeCacheId,void 0===o&&(xe++,o=xe,e.cache._arcadeCacheId=o);return new h(e.points,e.spatialReference,!0===e.hasZ,!0===e.hasM,o,1);case\"type\":return\"Multipoint\"}}throw new Error(Z(n,\"RUNTIME\",\"PROPERTYNOTFOUND\"))}function De(t,o){try{return se(t,o.object).then((c=>{try{return null===c?r(new Error(Z(o,\"RUNTIME\",\"NOTFOUND\"))):!1===o.computed?\"Identifier\"===o.property.type?c instanceof j||c instanceof V?n(c.field(o.property.name)):c instanceof a?n(Pe(c,o.property.name,t,o)):r(new Error(Z(o,\"RUNTIME\",\"INVALIDTYPE\"))):r(new Error(Z(o,\"RUNTIME\",\"INVALIDTYPE\"))):se(t,o.property).then((r=>e(((e,n)=>{if(c instanceof j||c instanceof V)S(r)?e(c.field(r)):n(new Error(Z(o,\"RUNTIME\",\"INVALIDTYPE\")));else if(c instanceof a)S(r)?e(Pe(c,r,t,o)):n(new Error(Z(o,\"RUNTIME\",\"INVALIDTYPE\")));else if(T(c))if(A(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=c.length+r),r>=c.length||r<0)throw new Error(Z(o,\"RUNTIME\",\"OUTOFBOUNDS\"));e(c[r])}else n(new Error(Z(o,\"RUNTIME\",\"INVALIDTYPE\")));else if(R(c))if(A(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=c.length()+r),r>=c.length()||r<0)throw new Error(Z(o,\"RUNTIME\",\"OUTOFBOUNDS\"));e(c.get(r))}else n(new Error(Z(o,\"RUNTIME\",\"INVALIDTYPE\")));else if(S(c))if(A(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=c.length+r),r>=c.length||r<0)throw new Error(Z(o,\"RUNTIME\",\"OUTOFBOUNDS\"));e(c[r])}else n(new Error(Z(o,\"RUNTIME\",\"INVALIDTYPE\")));else n(new Error(Z(o,\"RUNTIME\",\"INVALIDTYPE\")))}))))}catch(i){return ne(i)}}))}catch(c){return ne(c)}}function je(t,r){try{return se(t,r.argument).then((t=>e(((e,n)=>{m(t)&&\"!\"===r.operator?e(!t):\"-\"===r.operator?e(-1*C(t)):\"+\"===r.operator?e(1*C(t)):\"~\"===r.operator?e(~C(t)):n(new Error(Z(r,\"RUNTIME\",\"NOTSUPPORTEDUNARYOPERATOR\")))}))))}catch(n){return ne(n)}}function ke(r,n){try{const o=[];for(let e=0;e<n.elements.length;e++)o.push(se(r,n.elements[e]));return t(o).then((t=>e(((e,r)=>{for(let o=0;o<t.length;o++){if(U(t[o]))return void r(new Error(Z(n,\"RUNTIME\",\"FUNCTIONCONTEXTILLEGAL\")));t[o]===v&&(t[o]=null)}e(t)}))))}catch(o){return ne(o)}}function Le(r,n){try{return t([se(r,n.left),se(r,n.right)]).then((t=>e(((e,r)=>{const o=t[0],a=t[1];switch(n.operator){case\"|\":case\"<<\":case\">>\":case\">>>\":case\"^\":case\"&\":e(M(C(o),C(a),n.operator));case\"==\":e(g(o,a));break;case\"!=\":e(!g(o,a));break;case\"<\":case\">\":case\"<=\":case\">=\":e(F(o,a,n.operator));break;case\"+\":S(o)||S(a)?e(b(o)+b(a)):e(C(o)+C(a));break;case\"-\":e(C(o)-C(a));break;case\"*\":e(C(o)*C(a));break;case\"/\":e(C(o)/C(a));break;case\"%\":e(C(o)%C(a));break;default:r(new Error(Z(n,\"RUNTIME\",\"OPERATORNOTRECOGNISED\")))}}))))}catch(o){return ne(o)}}function _e(t,r){return e(((e,n)=>{\"AssignmentExpression\"!==r.left.type&&\"UpdateExpression\"!==r.left.type?\"AssignmentExpression\"!==r.right.type&&\"UpdateExpression\"!==r.right.type?se(t,r.left).then((o=>{try{if(!m(o))throw new Error(Z(r,\"RUNTIME\",\"ONLYBOOLEAN\"));switch(r.operator){case\"||\":!0===o?e(o):se(t,r.right).then((t=>{try{if(!m(t))throw new Error(Z(r,\"RUNTIME\",\"ONLYORORAND\"));e(t)}catch(o){n(o)}}),n);break;case\"&&\":!1===o?e(o):se(t,r.right).then((t=>{try{if(!m(t))throw new Error(Z(r,\"RUNTIME\",\"ONLYORORAND\"));e(t)}catch(o){n(o)}}),n);break;default:throw new Error(Z(r,\"RUNTIME\",\"ONLYORORAND\"))}}catch(a){n(a)}}),n):n(new Error(Z(r.right,\"RUNTIME\",\"CANNOT_USE_ASSIGNMENT_IN_CONDITION\"))):n(new Error(Z(r.left,\"RUNTIME\",\"CANNOT_USE_ASSIGNMENT_IN_CONDITION\")))}))}function Ve(t,r){return e(((e,n)=>{const o=r.name.toLowerCase();if(null===t.localScope||void 0===t.localScope[o])if(void 0===t.globalScope[o])n(new Error(Z(r,\"RUNTIME\",\"VARIABLENOTFOUND\")));else{const r=t.globalScope[o];!0===r.valueset?e(r.value):null!==r.d?r.d.then(e,n):(r.d=se(t,r.node),r.d.then((t=>{try{r.value=t,r.valueset=!0,e(t)}catch(o){n(o)}}),n))}else{const r=t.localScope[o];!0===r.valueset?e(r.value):null!==r.d?r.d.then(e,n):(r.d=se(t,r.node),r.d.then((t=>{try{r.value=t,r.valueset=!0,e(t)}catch(o){n(o)}}),n))}}))}function Be(e,t){try{if(\"Identifier\"!==t.callee.type)return ne(Z(t,\"RUNTIME\",\"ONLYNODESSUPPORTED\"));if(null!==e.localScope&&void 0!==e.localScope[t.callee.name.toLowerCase()]){const r=e.localScope[t.callee.name.toLowerCase()];return r.value instanceof y?r.value.fn(e,t):r.value instanceof f?$e(e,t,r.value.definition):ne(Z(t,\"RUNTIME\",\"NOTAFUNCTION\"))}if(void 0!==e.globalScope[t.callee.name.toLowerCase()]){const r=e.globalScope[t.callee.name.toLowerCase()];return r.value instanceof y?r.value.fn(e,t):r.value instanceof f?$e(e,t,r.value.definition):ne(Z(t,\"RUNTIME\",\"NOTAFUNCTION\"))}return ne(Z(t,\"RUNTIME\",\"NOTFOUND\"))}catch(r){return ne(r)}}function Ye(e,t){return n(t.value?t.value.cooked:\"\")}function Ge(t,r){return e((e=>{const n=[];_(r.expressions,((e,r,o,a)=>se(t,r).then((e=>{n[o]=b(e)})))).then((()=>{let t=\"\",o=0;for(const e of r.quasis)if(t+=e.value?e.value.cooked:\"\",!1===e.tail){t+=n[o]?n[o]:\"\",o++}e(t)}))}))}const ze={};function qe(e){return null===e?\"\":T(e)||R(e)?\"Array\":P(e)?\"Date\":S(e)?\"String\":m(e)?\"Boolean\":A(e)?\"Number\":e instanceof L?\"Attachment\":e instanceof k?\"Portal\":e instanceof j?\"Dictionary\":e instanceof V?\"Feature\":e instanceof c?\"Point\":e instanceof l?\"Polygon\":e instanceof u?\"Polyline\":e instanceof s?\"Multipoint\":e instanceof i?\"Extent\":U(e)?\"Function\":O(e)?\"FeatureSet\":D(e)?\"FeatureSetCollection\":e===v?\"\":\"number\"==typeof e&&isNaN(e)?\"Number\":\"Unrecognised Type\"}function He(t,r,n,o){return e(((e,a)=>{se(t,r.arguments[n]).then((c=>{try{if(g(c,o))return void se(t,r.arguments[n+1]).then(e,a);{const c=r.arguments.length-n;return 1===c?void se(t,r.arguments[n]).then(e,a):(2===c&&e(null),3===c?void se(t,r.arguments[n+2]).then(e,a):void He(t,r,n+2,o).then(e,a))}}catch(i){a(i)}}),a)}))}function Ze(t,r,n,o){return e(((e,a)=>{if(!0===o)se(t,r.arguments[n+1]).then(e,a);else{3===r.arguments.length-n?se(t,r.arguments[n+2]).then(e,a):se(t,r.arguments[n+2]).then((o=>{try{if(!1===m(o))return void a(new Error(\"WHEN needs boolean test conditions\"));Ze(t,r,n+2,o).then(e,a)}catch(c){a(c)}}))}}))}function We(r,o){try{const a=r.length,c=Math.floor(a/2);return 0===a?n([]):1===a?n([r[0]]):e(((e,n)=>{const i=[We(r.slice(0,c),o),We(r.slice(c,a),o)];t(i).then((t=>{try{Ke(t[0],t[1],o,[]).then(e,n)}catch(r){n(r)}}),n)}))}catch(a){return ne(a)}}function Ke(t,r,n,o){return e(((e,a)=>{const c=o;t.length>0||r.length>0?t.length>0&&r.length>0?n(t[0],r[0]).then((i=>{try{isNaN(i)&&(i=1),i<=0?(c.push(t[0]),t=t.slice(1)):(c.push(r[0]),r=r.slice(1)),Ke(t,r,n,o).then(e,a)}catch(s){a(s)}}),a):t.length>0?(c.push(t[0]),Ke(t=t.slice(1),r,n,o).then(e,a)):r.length>0&&(c.push(r[0]),r=r.slice(1),Ke(t,r,n,o).then(e,a)):e(o)}))}function Xe(e,t){const r=e.length,n=Math.floor(r/2);return t||(t=function(e,t){return e<t?-1:e===t?0:1}),0===r?[]:1===r?[e[0]]:Je(Xe(e.slice(0,n),t),Xe(e.slice(n,r),t),t)}function Je(e,t,r){const n=[];for(;e.length>0||t.length>0;)if(e.length>0&&t.length>0){let o=r(e[0],t[0]);isNaN(o)&&(o=1),o<=0?(n.push(e[0]),e=e.slice(1)):(n.push(t[0]),t=t.slice(1))}else e.length>0?(n.push(e[0]),e=e.slice(1)):t.length>0&&(n.push(t[0]),t=t.slice(1));return n}function Qe(t,n,o){try{const r=t.body;if(o.length!==t.params.length)return ne(new Error(\"Invalid Parameter calls to function.\"));for(let e=0;e<o.length;e++){const r=t.params[e];\"Identifier\"===r.type&&(n.localScope[r.name.toLowerCase()]={d:null,value:o[e],valueset:!0,node:null})}return se(n,r).then((t=>e(((e,r)=>{t instanceof E?e(t.value):t!==N?t!==I?e(t instanceof w?t.value:t):r(new Error(\"Cannot Continue from a Function\")):r(new Error(\"Cannot Break from a Function\"))}))))}catch(a){return r(a)}}function $e(e,t,r){return ie(e,t,(function(t,n,o){const a={spatialReference:e.spatialReference,services:e.services,console:e.console,lrucache:e.lrucache,interceptor:e.interceptor,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:e.depthCounter+1};if(a.depthCounter>64)throw new Error(\"Exceeded maximum function depth\");return Qe(r,a,o)}))}function et(e){return function(){const t={abortSignal:e.context.abortSignal,spatialReference:e.context.spatialReference,console:e.context.console,lrucache:e.context.lrucache,interceptor:e.context.interceptor,services:e.context.services,localScope:{},globalScope:e.context.globalScope,depthCounter:e.context.depthCounter+1};if(t.depthCounter>64)throw new Error(\"Exceeded maximum function depth\");return Qe(e.definition,t,arguments)}}W(ze,ce),K(ze,ce),$(ze,ce),J(ze,ce),X(ze,ce),Q(ze,ce),ee({functions:ze,compiled:!1,signatures:null,failDefferred:null,evaluateIdentifier:null,arcadeCustomFunctionHandler:null,mode:\"async\",standardFunction:ce,standardFunctionAsync:ie}),ze.typeof=function(e,t){return ce(e,t,(function(e,t,r){d(r,1,1);const n=qe(r[0]);if(\"Unrecognised Type\"===n)throw new Error(\"Unrecognised Type\");return n}))},ze.iif=function(r,n){return e(((e,o)=>{d(null===n.arguments?[]:n.arguments,3,3),se(r,n.arguments[0]).then((a=>{try{if(!1===m(a))return void o(new Error(\"IF Function must have a boolean test condition\"));t([se(r,n.arguments[1]),se(r,n.arguments[2])]).then((t=>{e(a?t[0]:t[1])}),o)}catch(c){o(c)}}),o)}))},ze.decode=function(t,r){return e(((e,n)=>{r.arguments.length<2?n(new Error(\"Missing Parameters\")):2!==r.arguments.length?(r.arguments.length-1)%2!=0?se(t,r.arguments[0]).then((o=>{try{He(t,r,1,o).then(e,n)}catch(a){n(a)}}),n):n(new Error(\"Must have a default value result.\")):se(t,r.arguments[1]).then(e,n)}))},ze.when=function(t,r){try{return r.arguments.length<3?ne(\"Missing Parameters\"):r.arguments.length%2==0?ne(\"Must have a default value result.\"):se(t,r.arguments[0]).then((n=>e(((e,o)=>{if(!1===m(n))return void o(new Error(\"WHEN needs boolean test conditions\"));Ze(t,r,0,n).then(e,o)}))))}catch(n){return ne(n)}},ze.sort=function(e,t){return ie(e,t,(function(e,t,r){d(r,1,2);let o=r[0];if(R(o)&&(o=o.toArray()),!1===T(o))return ne(Error(\"Illegal Argument\"));if(r.length>1){if(!1===U(r[1]))return ne(Error(\"Illegal Argument\"));return We(o,et(r[1]))}{let e=o;if(0===e.length)return n([]);const t={};for(let n=0;n<e.length;n++){const r=qe(e[n]);\"\"!==r&&(t[r]=!0)}if(!0===t.Array||!0===t.Dictionary||!0===t.Feature||!0===t.Point||!0===t.Polygon||!0===t.Polyline||!0===t.Multipoint||!0===t.Extent||!0===t.Function)return n(e.slice(0));let r=0,a=\"\";for(const n in t)r++,a=n;return r>1||\"String\"===a?e=Xe(e,(function(e,t){if(null==e||e===v)return null==t||t===v?0:1;if(null==t||t===v)return-1;const r=b(e),n=b(t);return r<n?-1:r===n?0:1})):\"Number\"===a?e=Xe(e,(function(e,t){return e-t})):\"Boolean\"===a?e=Xe(e,(function(e,t){return e===t?0:t?-1:1})):\"Date\"===a&&(e=Xe(e,(function(e,t){return t-e}))),n(e)}}))};const tt={failDefferred:ne,resolveDeffered:oe,fixSpatialReference:x,parseArguments:ae,standardFunction:ce,standardFunctionAsync:ie,evaluateIdentifier:Ve,arcadeCustomFunction:et};for(const pt in ze)ze[pt]={value:new y(ze[pt]),valueset:!0,node:null};const rt=function(){};function nt(e,t){const r=new rt;null==e&&(e={}),null==t&&(t={});const n=new j({newline:\"\\n\",tab:\"\\t\",singlequote:\"'\",doublequote:'\"',forwardslash:\"/\",backwardslash:\"\\\\\"});n.immutable=!1,r.textformatting={value:n,valueset:!0,node:null};for(const o in t)r[o]={value:new y(t[o]),native:!0,valueset:!0,node:null};for(const o in e)e[o]&&\"esri.Graphic\"===e[o].declaredClass?r[o]={value:V.createFromGraphic(e[o]),valueset:!0,node:null}:r[o]={value:e[o],valueset:!0,node:null};return r}function ot(e){console.log(e)}rt.prototype=ze,rt.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},rt.prototype.pi={value:Math.PI,valueset:!0,node:null};const at=tt;function ct(e){const t={mode:\"async\",compiled:!1,functions:{},signatures:[],standardFunction:ce,standardFunctionAsync:ie,failDefferred:ne,evaluateIdentifier:Ve,arcadeCustomFunctionHandler:et};for(let r=0;r<e.length;r++)e[r].registerFunctions(t);for(const r in t.functions)ze[r]={value:new y(t.functions[r]),valueset:!0,node:null},rt.prototype[r]=ze[r];for(let r=0;r<t.signatures.length;r++)B(t.signatures[r],\"async\")}function it(t,r){let n=r.spatialReference;null==n&&(n=new o({wkid:102100}));const a=nt(r.vars,r.customfunctions);return se({spatialReference:n,services:r.services,abortSignal:void 0===r.abortSignal||null===r.abortSignal?{aborted:!1}:r.abortSignal,globalScope:a,console:r.console?r.console:ot,lrucache:r.lrucache,interceptor:r.interceptor,localScope:null,depthCounter:1},t.body[0].body).then((t=>e(((e,r)=>{t instanceof E&&(t=t.value),t instanceof w&&(t=t.value),t===v&&(t=null),t!==N?t!==I?t instanceof y||t instanceof f?r(new Error(\"Cannot return FUNCTION\")):e(t):r(new Error(\"Cannot return CONTINUE\")):r(new Error(\"Cannot return BREAK\"))}))))}function st(e,t){return Y(e)}function lt(e,t){return G(e,t,\"full\")}function ut(e,t){return z(e,t)}function ft(e,t){return q(e,t)}function ht(e){return H(e)}export{it as executeScript,ct as extend,st as extractFieldLiterals,ht as findFunctionCalls,at as functionHelper,ft as referencesFunction,ut as referencesMember,lt as validateScript};\n"],"sourceRoot":"webpack:///"}