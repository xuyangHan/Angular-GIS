(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{Gdt4:function(t,e,i){"use strict";i.d(e,"a",function(){return u}),i.d(e,"b",function(){return d}),i.d(e,"c",function(){return o}),i.d(e,"d",function(){return f});var s=i("srIe"),a=i("Piei");const r=180/Math.PI,n=function(t){return t&&"esri.layers.support.PixelBlock"===t.declaredClass&&t.pixels&&t.pixels.length>0},l=new Map;function o(t,e){return l.get(t)/l.get(e)||1}function h(t){return(450-t)%360}function c(t,e="geographic"){const[i,s]=t,a=Math.sqrt(i*i+s*s);let n=Math.atan2(s,i)*r;return n=(360+n)%360,"geographic"===e&&(n=h(n)),[a,n]}function p(t,e="geographic"){let i=t[1];"geographic"===e&&(i=h(i)),i%=360;const s=t[0];return[s*Math.cos(i/r),s*Math.sin(i/r)]}function u(t,e,i="geographic",s=1){if(!n(t))return t;const{pixels:r,width:l,height:o}=t,h=l*o,u=r[0],d=r[1],f=a.a.createEmptyBand(t.pixelType,h),y=a.a.createEmptyBand(t.pixelType,h);let m=0;for(let a=0;a<o;a++)for(let t=0;t<l;t++)"vector-uv"===e?([f[m],y[m]]=c([u[m],d[m]],i),f[m]*=s):([f[m],y[m]]=p([u[m],d[m]],i),f[m]*=s,y[m]*=s),m++;const b=new a.a({pixelType:t.pixelType,width:t.width,height:t.height,mask:t.mask,validPixelCount:t.validPixelCount,maskIsAlpha:t.maskIsAlpha,pixels:[f,y]});return b.updateStatistics(),b}function d(t,e,i=1){if(1===i||!n(t))return t;const s=t.clone(),{pixels:a,width:r,height:l}=s,o=a[0],h=a[1];let c=0;for(let n=0;n<l;n++)for(let t=0;t<r;t++)"vector-uv"===e?(o[c]*=i,h[c]*=i):o[c]*=i,c++;return s.updateStatistics(),s}function f(t,e,i,a,r){if(!Object(s.i)(r)||!r.spatialReference.equals(t.spatialReference))return{extent:t,width:e,height:i};const n=r.xmin,l=r.ymax;a=Math.max(a||0,30);const o=Math.ceil(e*(1/a)),h=Math.ceil(i*(1/a)),c=((t.xmax-t.xmin)/o+(t.ymax-t.ymin)/h)/2;return t.xmin=n+Math.floor((t.xmin-n)/c)*c,t.xmax=n+Math.ceil((t.xmax-n)/c)*c,t.ymin=l+Math.floor((t.ymin-l)/c)*c,t.ymax=l+Math.ceil((t.ymax-l)/c)*c,{extent:t,width:Math.round(t.width/c),height:Math.round(t.height/c)}}l.set("meter-per-second",1),l.set("kilometer-per-hour",.277778),l.set("knots",.514444),l.set("feet-per-second",.3048),l.set("mile-per-hour",.44704)},NloG:function(t,e,i){"use strict";var s=i("pO5D"),a=(i("wSAH"),i("6S2I")),r=(i("zqDF"),i("WbKI")),n=i("04ZG"),l=(i("4EHJ"),i("ju1D"),i("9AIY"),i("/CmD")),o=i("zm0L"),h=i("pdg3"),c=i("+rMe"),p=i("kJYu");let u=class extends(Object(p.b)(Object(h.a)(Object(c.b)(o.a.EventedMixin(l.a))))){constructor(t){super(t),this.layer=null,this.parent=null}initialize(){this.when().catch(t=>{if("layerview:create-error"!==t.name){const e=this.layer&&this.layer.id||"no id",i=this.layer&&this.layer.title||"no title";throw a.a.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${i}', id: '${e}')`,t),t}})}get fullOpacity(){const t=t=>null==t?1:t;return t(this.get("layer.opacity"))*t(this.get("parent.fullOpacity"))}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())}get visible(){return!0===this.get("layer.visible")}set visible(t){void 0!==t?this._override("visible",t):this._clearOverride("visible")}canResume(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1}getSuspendInfo(){const t=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(t.viewNotReady=!0),this.layer&&this.layer.loaded||(t.layerNotLoaded=!0),this.visible||(t.layerInvisible=!0),t}isUpdating(){return!1}};Object(s.a)([Object(r.b)()],u.prototype,"fullOpacity",null),Object(s.a)([Object(r.b)()],u.prototype,"layer",void 0),Object(s.a)([Object(r.b)()],u.prototype,"parent",void 0),Object(s.a)([Object(r.b)({readOnly:!0})],u.prototype,"suspended",null),Object(s.a)([Object(r.b)({readOnly:!0})],u.prototype,"suspendInfo",null),Object(s.a)([Object(r.b)({readOnly:!0})],u.prototype,"legendEnabled",null),Object(s.a)([Object(r.b)({type:Boolean,readOnly:!0})],u.prototype,"updating",null),Object(s.a)([Object(r.b)()],u.prototype,"visible",null),u=Object(s.a)([Object(n.a)("esri.views.layers.LayerView")],u),e.a=u},Piei:function(t,e,i){"use strict";var s,a=i("pO5D"),r=(i("wSAH"),i("f/qv")),n=i("srIe"),l=i("6S2I"),o=i("WbKI"),h=i("Gj5k"),c=i("04ZG"),p=i("zlDU"),u=(i("4EHJ"),i("ju1D"),i("9AIY"),i("ag7Y"));const d=l.a.getLogger("esri.layers.support.PixelBlock");let f=s=class extends u.a{constructor(t){super(t),this.width=null,this.height=null,this.pixelType="f32",this.validPixelCount=null,this.mask=null,this.maskIsAlpha=!1,this.pixels=null,this.statistics=null}static createEmptyBand(t,e){return new(s.getPixelArrayConstructor(t))(e)}static getPixelArrayConstructor(t){let e;switch(t){case"u1":case"u2":case"u4":case"u8":e=Uint8Array;break;case"u16":e=Uint16Array;break;case"u32":e=Uint32Array;break;case"s8":e=Int8Array;break;case"s16":e=Int16Array;break;case"s32":e=Int32Array;break;case"u32":e=Uint32Array;break;case"f32":e=Float32Array;break;case"f64":e=Float64Array;break;case"c64":case"c128":case"unknown":e=Float32Array}return e}castPixelType(t){if(!t)return"f32";let e=t.toLowerCase();return["u1","u2","u4"].indexOf(e)>-1?e="u8":-1===["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].indexOf(e)&&(e="f32"),e}getPlaneCount(){return this.pixels&&this.pixels.length}addData(t){if(!t.pixels||t.pixels.length!==this.width*this.height)throw new p.a("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(t.pixels),this.statistics.push(t.statistics||{minValue:null,maxValue:null})}getAsRGBA(){const t=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(t);break;default:this._fillFrom8Bit(t)}return new Uint8ClampedArray(t)}getAsRGBAFloat(){const t=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(t),t}updateStatistics(){this.statistics=this.pixels.map(t=>this._calculateBandStatistics(t,this.mask));const t=this.mask;let e=0;if(t)for(let i=0;i<t.length;i++)t[i]&&e++;else e=this.width*this.height;this.validPixelCount=e}clamp(t){if(!t||"f64"===t||"f32"===t)return;let e;switch(t){case"u8":e=[0,255];break;case"u16":e=[0,65535];break;case"u32":e=[0,4294967295];break;case"s8":e=[-128,127];break;case"s16":e=[-32768,32767];break;case"s32":e=[-2147483648,2147483647];break;default:e=[-34e38,34e38]}const[i,a]=e,r=this.pixels,n=this.width*this.height,l=r.length;let o,h,c;const p=[];for(let u=0;u<l;u++){c=s.createEmptyBand(t,n),o=r[u];for(let t=0;t<n;t++)h=o[t],c[t]=h>a?a:h<i?i:h;p.push(c)}this.pixels=p,this.pixelType=t}extractBands(t){if(Object(n.h)(t)||0===t.length||null==this.pixels||0===this.pixels.length)return this;const e=this.pixels.length,i=t.some(t=>t>=this.pixels.length),a=e===t.length&&!t.some((t,e)=>t!==e);return i||a?this:new s({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:t.map(t=>this.pixels[t]),statistics:this.statistics&&t.map(t=>this.statistics[t])})}clone(){const t=new s({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});let e;this.mask&&(t.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));const i=s.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){t.pixels=[];const s=this.pixels[0].slice;for(e=0;e<this.pixels.length;e++)t.pixels[e]=s?this.pixels[e].slice(0,this.pixels[e].length):new i(this.pixels[e])}if(this.statistics)for(t.statistics=[],e=0;e<this.statistics.length;e++)t.statistics[e]=Object(r.a)(this.statistics[e]);return t}_fillFrom8Bit(t){const{mask:e,maskIsAlpha:i,pixels:s}=this;if(!t||!s||!s.length)return void d.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");let a,r,n,l;a=r=n=s[0],s.length>=3?(r=s[1],n=s[2]):2===s.length&&(r=s[1]);const o=new Uint32Array(t),h=this.width*this.height;if(a.length===h)if(e&&e.length===h)if(i)for(l=0;l<h;l++)e[l]&&(o[l]=e[l]<<24|n[l]<<16|r[l]<<8|a[l]);else for(l=0;l<h;l++)e[l]&&(o[l]=255<<24|n[l]<<16|r[l]<<8|a[l]);else for(l=0;l<h;l++)o[l]=255<<24|n[l]<<16|r[l]<<8|a[l];else d.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}_fillFromNon8Bit(t){const{pixels:e,mask:i,statistics:s}=this;if(!t||!e||!e.length)return void d.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");const a=this.pixelType;let r=1,n=0,l=1;if(s&&s.length>0)n=s.map(t=>t.minValue).reduce((t,e)=>Math.min(t,e)),l=s.map(t=>t.maxValue-t.minValue).reduce((t,e)=>Math.max(t,e)),r=255/l;else{let t=255;"s8"===a?(n=-128,t=127):"u16"===a?t=65535:"s16"===a?(n=-32768,t=32767):"u32"===a?t=4294967295:"s32"===a?(n=-2147483648,t=2147483647):"f32"===a?(n=-34e38,t=34e38):"f64"===a&&(n=-Number.MAX_VALUE,t=Number.MAX_VALUE),r=255/(t-n)}const o=new Uint32Array(t),h=this.width*this.height;let c,p,u,f,y;if(c=p=u=e[0],c.length!==h)return d.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(e.length>=2)if(p=e[1],e.length>=3&&(u=e[2]),i&&i.length===h)for(f=0;f<h;f++)i[f]&&(o[f]=255<<24|(u[f]-n)*r<<16|(p[f]-n)*r<<8|(c[f]-n)*r);else for(f=0;f<h;f++)o[f]=255<<24|(u[f]-n)*r<<16|(p[f]-n)*r<<8|(c[f]-n)*r;else if(i&&i.length===h)for(f=0;f<h;f++)y=(c[f]-n)*r,i[f]&&(o[f]=255<<24|y<<16|y<<8|y);else for(f=0;f<h;f++)y=(c[f]-n)*r,o[f]=255<<24|y<<16|y<<8|y}_fillFrom32Bit(t){const{pixels:e,mask:i}=this;if(!t||!e||!e.length)return d.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let s,a,r,n;s=a=r=e[0],e.length>=3?(a=e[1],r=e[2]):2===e.length&&(a=e[1]);const l=this.width*this.height;if(s.length!==l)return d.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let o=0;if(i&&i.length===l)for(n=0;n<l;n++)t[o++]=s[n],t[o++]=a[n],t[o++]=r[n],t[o++]=1&i[n];else for(n=0;n<l;n++)t[o++]=s[n],t[o++]=a[n],t[o++]=r[n],t[o++]=1}_calculateBandStatistics(t,e){let i=1/0,s=-1/0;const a=t.length;let r,n=0;if(e)for(r=0;r<a;r++)e[r]&&(n=t[r],i=n<i?n:i,s=n>s?n:s);else for(r=0;r<a;r++)n=t[r],i=n<i?n:i,s=n>s?n:s;return{minValue:i,maxValue:s}}};Object(a.a)([Object(o.b)({json:{write:!0}})],f.prototype,"width",void 0),Object(a.a)([Object(o.b)({json:{write:!0}})],f.prototype,"height",void 0),Object(a.a)([Object(o.b)({json:{write:!0}})],f.prototype,"pixelType",void 0),Object(a.a)([Object(h.a)("pixelType")],f.prototype,"castPixelType",null),Object(a.a)([Object(o.b)({json:{write:!0}})],f.prototype,"validPixelCount",void 0),Object(a.a)([Object(o.b)({json:{write:!0}})],f.prototype,"mask",void 0),Object(a.a)([Object(o.b)({json:{write:!0}})],f.prototype,"maskIsAlpha",void 0),Object(a.a)([Object(o.b)({json:{write:!0}})],f.prototype,"pixels",void 0),Object(a.a)([Object(o.b)({json:{write:!0}})],f.prototype,"statistics",void 0),f=s=Object(a.a)([Object(c.a)("esri.layers.support.PixelBlock")],f),e.a=f},Vm2Q:function(t,e,i){"use strict";i.d(e,"a",function(){return M});var s=i("pO5D"),a=(i("wSAH"),i("6S2I"),i("zqDF"),i("WbKI")),r=i("04ZG"),n=(i("4EHJ"),i("ju1D"),i("9AIY"),i("LE9a")),l=i("fX31"),o=i("N5XI"),h=i("ag7Y");let c=class extends h.a{};c=Object(s.a)([Object(r.a)("esri.views.layers.support.ClipArea")],c);var p,u=c;let d=p=class extends u{constructor(){super(...arguments),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new p({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get("version")||0)+1}};Object(s.a)([Object(a.b)({type:[Number,String],json:{write:!0}})],d.prototype,"left",void 0),Object(s.a)([Object(a.b)({type:[Number,String],json:{write:!0}})],d.prototype,"right",void 0),Object(s.a)([Object(a.b)({type:[Number,String],json:{write:!0}})],d.prototype,"top",void 0),Object(s.a)([Object(a.b)({type:[Number,String],json:{write:!0}})],d.prototype,"bottom",void 0),Object(s.a)([Object(a.b)({readOnly:!0})],d.prototype,"version",null),d=p=Object(s.a)([Object(r.a)("esri.views.layers.support.ClipRect")],d);var f,y=d,m=i("AMBt"),b=i("N2DF"),x=i("OvF4"),g=i("Ehki"),w=i("qatw");i("4GrV");const v={base:b.a,key:"type",typeMap:{extent:x.a,polygon:g.a}};let O=f=class extends u{constructor(){super(...arguments),this.type="geometry",this.geometry=null}get version(){return(this._get("version")||0)+1}clone(){return new f({geometry:this.geometry.clone()})}};Object(s.a)([Object(a.b)({types:v,json:{read:w.a,write:!0}})],O.prototype,"geometry",void 0),Object(s.a)([Object(a.b)({readOnly:!0})],O.prototype,"version",null),O=f=Object(s.a)([Object(r.a)("esri.views.layers.support.Geometry")],O);var j=O;let k=class extends u{constructor(){super(...arguments),this.type="path",this.path=[]}get version(){return(this._get("version")||0)+1}};Object(s.a)([Object(a.b)({type:[[[Number]]],json:{write:!0}})],k.prototype,"path",void 0),Object(s.a)([Object(a.b)({readOnly:!0})],k.prototype,"version",null),k=Object(s.a)([Object(r.a)("esri.views.layers.support.Path")],k);const A=n.a.ofType({key:"type",base:u,typeMap:{rect:y,path:k,geometry:j}}),M=t=>{let e=class extends t{constructor(){super(...arguments),this.clips=new A,this.moving=!1,this.attached=!1,this.lastUpdateId=-1,this.updateRequested=!1}initialize(){var t;this.container||(this.container=new m.a),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([Object(o.a)(this,"suspended",t=>{this.container&&(this.container.visible=!t),this.view&&!t&&this.updateRequested&&this.view.requestUpdate()},!0),Object(o.a)(this,["layer.opacity","container"],()=>{var t,e;this.container&&(this.container.opacity=null!=(t=null==(e=this.layer)?void 0:e.opacity)?t:1)},!0),Object(o.a)(this,["layer.blendMode"],t=>{this.container&&(this.container.blendMode=t)},!0),Object(o.a)(this,["layer.effect"],t=>{this.container&&(this.container.effect=t)},!0),this.clips.on("change",()=>{this.container.clips=this.clips,this.notifyChange("clips")})]),null!=(t=this.view)&&t.whenLayerView?this.view.whenLayerView(this.layer).then(t=>{t!==this||this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{}):this.when().then(()=>{this.attached||this.destroyed||(this.attach(),this.requestUpdate(),this.attached=!0)},()=>{})}destroy(){this.attached&&(this.detach(),this.attached=!1),this.handles.remove("initialize"),this.updateRequested=!1}get updating(){return!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())}isVisibleAtScale(t){let e=!0;const i=this.layer,s=i.minScale,a=i.maxScale;if(null!=s&&null!=a){let i=!s,r=!a;!i&&t<=s&&(i=!0),!r&&t>=a&&(r=!0),e=i&&r}return e}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(t){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",t),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(t))):this.updateRequested=!1}isUpdating(){return!1}isRendering(){return!1}canResume(){return!!super.canResume()&&this.isVisibleAtScale(this.view.scale)}};return Object(s.a)([Object(a.b)({type:A,set(t){const e=Object(l.b)(t,this._get("clips"),A);this._set("clips",e)}})],e.prototype,"clips",void 0),Object(s.a)([Object(a.b)()],e.prototype,"moving",void 0),Object(s.a)([Object(a.b)()],e.prototype,"attached",void 0),Object(s.a)([Object(a.b)()],e.prototype,"container",void 0),Object(s.a)([Object(a.b)()],e.prototype,"suspended",void 0),Object(s.a)([Object(a.b)({readOnly:!0})],e.prototype,"updateParameters",void 0),Object(s.a)([Object(a.b)()],e.prototype,"updateRequested",void 0),Object(s.a)([Object(a.b)()],e.prototype,"updating",null),Object(s.a)([Object(a.b)()],e.prototype,"view",void 0),e=Object(s.a)([Object(r.a)("esri.views.2d.layers.LayerView2D")],e),e}},f1zk:function(t,e,i){"use strict";i.r(e);var s=i("pO5D"),a=(i("wSAH"),i("6S2I")),r=(i("zqDF"),i("WbKI")),n=i("04ZG"),l=(i("4EHJ"),i("ju1D"),i("9AIY"),i("N5XI")),o=i("bHqs"),h=i("NloG"),c=i("srIe"),p=i("zlDU"),u=i("SuVq"),d=i("IvSi"),f=i("xk++"),y=i("rXMu");const m=t=>{let e=class extends t{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(t,e){const{layer:i}=this;if(!t)throw new p.a("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:i});const{popupEnabled:s}=i,a=Object(y.a)(i,e);if(!s||!Object(c.i)(a))throw new p.a("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:s,popupTemplate:a});const r=await a.getRequiredFields(),n=new f.a;n.geometry=t,n.outFields=r,n.outSpatialReference=t.spatialReference;const l=this.view.resolution,o="2d"===this.view.type?new u.a(l,l,this.view.spatialReference):new u.a(.5*l,.5*l,this.view.spatialReference),{returnTopmostRaster:h,showNoDataRecords:d}=a.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1};return i.queryVisibleRasters(n,{returnDomainValues:!0,returnTopmostRaster:h,pixelSize:o,showNoDataRecords:d}).then(t=>t)}canResume(){var t;return!(!super.canResume()||null!=(t=this.timeExtent)&&t.isEmpty)}};return Object(s.a)([Object(r.b)()],e.prototype,"layer",void 0),Object(s.a)([Object(r.b)()],e.prototype,"suspended",void 0),Object(s.a)([Object(r.b)(d.a)],e.prototype,"timeExtent",void 0),Object(s.a)([Object(r.b)()],e.prototype,"view",void 0),e=Object(s.a)([Object(n.a)("esri.views.layers.ImageryLayerView")],e),e};var b=i("Vm2Q"),x=i("RI0u"),g=i("9MzC"),w=i("/CmD"),v=i("OvF4"),O=i("qRWG"),j=i("Lqtk"),k=i("jWBI"),A=i("Gdt4"),M=i("9iar"),U=i("tODX"),R=i("AMBt"),I=i("Vh9r"),q=i("q03O");const T=a.a.getLogger("esri.views.2d.layers.imagery.ImageryGraphicsView2D");let C=class extends w.a{constructor(){super(...arguments),this.attached=!1,this.container=new R.a,this.updateRequested=!1,this._graphicsView=null,this._projectFullExtentPromise=null,this.type="Graphics",this._graphics=new M.b,this._updateGraphics=Object(g.i)(async(t,e)=>{if(!t.stationary)return;const i=t.state,s=new v.a({xmin:i.extent.xmin,ymin:i.extent.ymin,xmax:i.extent.xmax,ymax:i.extent.ymax,spatialReference:i.spatialReference}),a=t.state.size[0],r=t.state.size[1],n={};n.timeExtent=this.timeExtent,n.requestAsImageElement=!1,n.signal=e,null==this._projectFullExtentPromise&&(this._projectFullExtentPromise=this._getProjectedFullExtent(s.spatialReference));const l="vector-field"===this.layer.renderer.type?this.layer.renderer.symbolTileSize:50,o=await this._projectFullExtentPromise,h=Object(A.d)(s,a,r,l,o),c=await this.layer.fetchImage(h.extent,h.width,h.height,n),p=this.layer.renderer;if("vector-field"===p.type){this._pixelData={extent:h.extent,pixelBlock:c.pixelData.pixelBlock};const e=await p.getGraphicsFromPixelData(c.pixelData,"vector-uv"===this.layer.rasterInfo.dataType);this._graphicsView.update(t),await Object(g.a)(0).then(()=>{this._graphics.set("items",e)})}})}destroy(){this.attached&&(this.detach(),this.attached=!1),this.updateRequested=!1}get updating(){return!this.attached||this.isUpdating()}update(t){this._updateGraphics(t).catch(t=>{Object(g.m)(t)||T.error(t)})}hitTest(t,e){const i=this.view.toMap(Object(O.b)(t,e));return Promise.resolve(new k.a({attributes:{},geometry:i,layer:this.layer}))}attach(){this._graphicsView=new I.a({view:this.view,graphics:this._graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new q.a(this.view.featuresTilingScheme)}),this.attached=!0}detach(){this._graphics.destroy(),this._graphicsView.destroy(),this.container.removeChild(this._graphicsView.container),this._graphicsView=null}moveStart(){}viewChange(){}moveEnd(){}install(t){this.container.addChild(this._graphicsView.container),t.addChild(this.container)}uninstall(t){this.container.removeChild(this._graphicsView.container),t.removeChild(this.container)}isUpdating(){return this._graphicsView.updating||this.updateRequested}getPixelData(){return this.updating?null:this._pixelData}redraw(){}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}async _getProjectedFullExtent(t){try{return await Object(U.e)(this.layer.fullExtent,t)}catch(e){try{const e=(await Object(j.default)(this.layer.url,{query:{option:"footprints",outSR:t.wkid||JSON.stringify(t.toJSON()),f:"json"}})).data.featureCollection.layers[0].layerDefinition.extent;return e?v.a.fromJSON(e):null}catch{return null}}}};Object(s.a)([Object(r.b)()],C.prototype,"attached",void 0),Object(s.a)([Object(r.b)()],C.prototype,"container",void 0),Object(s.a)([Object(r.b)()],C.prototype,"layer",void 0),Object(s.a)([Object(r.b)()],C.prototype,"timeExtent",void 0),Object(s.a)([Object(r.b)()],C.prototype,"view",void 0),Object(s.a)([Object(r.b)()],C.prototype,"updateRequested",void 0),Object(s.a)([Object(r.b)()],C.prototype,"updating",null),Object(s.a)([Object(x.a)({graphics:"Graphics"})],C.prototype,"type",void 0),C=Object(s.a)([Object(n.a)("esri.views.2d.layers.imagery.ImageryGraphicsView2D")],C);var B=C,E=i("ne7T"),_=i("iUxC"),S=i("LTnl"),P=i("vbiG");const V=a.a.getLogger("esri.views.2d.layers.imagery.ImageryView2D");let D=class extends w.a{constructor(){super(...arguments),this.attached=!1,this.container=new R.a,this.updateRequested=!1,this.type="Imagery",this._bitmapView=null}destroy(){this.attached&&(this.detach(),this.attached=!1),this.updateRequested=!1}get updating(){return!this.attached||this.isUpdating()}update(t){this.strategy.update(t).catch(t=>{Object(g.m)(t)||V.error(t)})}detach(){this.strategy.destroy(),this._bitmapView.removeAllChildren(),this.container.removeAllChildren()}hitTest(t,e){const i=this.view.toMap(Object(O.b)(t,e));return Promise.resolve(new k.a({attributes:{},geometry:i,layer:this.layer}))}attach(){const t=this.layer.version>=10,e=this.layer.version>=10.1?this.layer.imageMaxHeight:2048,i=this.layer.version>=10.1?this.layer.imageMaxWidth:2048;this._bitmapView=new S.a,this.strategy=new P.a({container:this._bitmapView,imageNormalizationSupported:t,imageMaxHeight:e,imageMaxWidth:i,fetchSource:this._fetchImage.bind(this),requestUpdate:()=>this.requestUpdate()}),this.attached=!0}moveStart(){}viewChange(){}moveEnd(){}install(t){this.container.addChild(this._bitmapView),t.addChild(this.container)}uninstall(t){this.container.removeChild(this._bitmapView),t.removeChild(this.container)}redraw(){this.strategy.updateExports(t=>{t.source instanceof HTMLImageElement?t.requestRender():this.layer.applyRenderer({pixelBlock:t.source.pixelBlock}).then(e=>{const i=t.source;i.pixelBlock=e.pixelBlock,i.filter=t=>this.layer.applyFilter(t),this.container.requestRender()})})}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}isUpdating(){return this.strategy.updating||this.updateRequested}getPixelData(){if(this.updating)return null;const t=this.strategy.container.children;if(1===t.length&&t[0].source)return{extent:t[0].source.extent,pixelBlock:t[0].source.originalPixelBlock};if(t.length>1){const e=this.view.extent,i=t.map(t=>t.source).filter(t=>t.extent&&t.extent.intersects(e)).map(t=>({extent:t.extent,pixelBlock:t.originalPixelBlock})),s=Object(E.k)(i,e);return s?{extent:s.extent,pixelBlock:s.pixelBlock}:null}return null}_fetchImage(t,e,i,s){return(s=s||{}).timeExtent=this.timeExtent,s.requestAsImageElement=!0,this.layer.fetchImage(t,e,i,s).then(t=>t.imageElement?t.imageElement:this.layer.applyRenderer(t.pixelData,{signal:s.signal}).then(e=>{const i=new _.a(e.pixelBlock,e.extent.clone(),t.pixelData.pixelBlock);return i.filter=t=>this.layer.applyFilter(t),i}))}};Object(s.a)([Object(r.b)()],D.prototype,"attached",void 0),Object(s.a)([Object(r.b)()],D.prototype,"container",void 0),Object(s.a)([Object(r.b)()],D.prototype,"layer",void 0),Object(s.a)([Object(r.b)()],D.prototype,"strategy",void 0),Object(s.a)([Object(r.b)()],D.prototype,"timeExtent",void 0),Object(s.a)([Object(r.b)()],D.prototype,"view",void 0),Object(s.a)([Object(r.b)()],D.prototype,"updateRequested",void 0),Object(s.a)([Object(r.b)()],D.prototype,"updating",null),Object(s.a)([Object(x.a)({imagery:"Imagery"})],D.prototype,"type",void 0),D=Object(s.a)([Object(n.a)("esri.views.2d.layers.imagery.ImageryView2D")],D);var F=D;let G=class extends(m(Object(o.a)(Object(b.a)(h.a)))){constructor(){super(...arguments),this._exportImageVersion=-1}initialize(){this.handles.add(Object(l.a)(this,["layer.blendMode"],t=>{this.subview&&(this.subview.container.blendMode=t)},!0))}get pixelData(){return this.updating?null:this.subview.getPixelData()}get updating(){return!(this.subview&&!this.subview.updating)}hitTest(t,e){return this.suspended||!this.subview?Promise.resolve(null):this.subview.hitTest(t,e)}update(t){var e;null==(e=this.subview)||e.update(t)}attach(){this.layer.increaseRasterJobHandlerUsage(),this._setSubView(),this.handles.add([Object(l.a)(this,"layer.exportImageServiceParameters.version",t=>{this._exportImageVersion!==t&&(this._exportImageVersion=t,this.requestUpdate())}),this.watch("timeExtent",()=>{this.subview.timeExtent=this.timeExtent,this.requestUpdate()}),this.layer.on("redraw",()=>this.subview.redraw()),Object(l.d)(this.layer,"renderer",()=>this._setSubView())],"imagerylayerview-update")}detach(){this.layer.decreaseRasterJobHandlerUsage(),this.subview.destroy(),this.handles.remove("imagerylayerview-update"),this._exportImageVersion=-1}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}async doRefresh(){this.requestUpdate()}isUpdating(){return!this.subview||!this.suspended&&this.subview.isUpdating()}_setSubView(){var t;let e="Imagery";var i,s;"vector-field"===(null==(t=this.layer.renderer)?void 0:t.type)&&"lerc"===this.layer.format&&(e="Graphics"),this.subview&&this.subview.type===e||(null==(i=this.subview)||i.uninstall(this.container),null==(s=this.subview)||s.destroy(),this.subview="Imagery"===e?new F({layer:this.layer,view:this.view,timeExtent:this.timeExtent}):new B({layer:this.layer,view:this.view,timeExtent:this.timeExtent}),this.subview.attach(),this.subview.install(this.container),this.subview.container.blendMode=this.layer.blendMode),this.requestUpdate()}};Object(s.a)([Object(r.b)()],G.prototype,"pixelData",null),Object(s.a)([Object(r.b)({readOnly:!0})],G.prototype,"updating",null),Object(s.a)([Object(r.b)()],G.prototype,"subview",void 0),G=Object(s.a)([Object(n.a)("esri.views.2d.layers.ImageryLayerView2D")],G),e.default=G},ne7T:function(t,e,i){"use strict";i.d(e,"a",function(){return M}),i.d(e,"b",function(){return l}),i.d(e,"c",function(){return n}),i.d(e,"d",function(){return p}),i.d(e,"e",function(){return c}),i.d(e,"f",function(){return h}),i.d(e,"g",function(){return o}),i.d(e,"h",function(){return r}),i.d(e,"i",function(){return d}),i.d(e,"j",function(){return b}),i.d(e,"k",function(){return m}),i.d(e,"l",function(){return f}),i.d(e,"m",function(){return x}),i.d(e,"n",function(){return A}),i.d(e,"o",function(){return u});var s=i("Piei");const a=function(t){return t&&"esri.layers.support.PixelBlock"===t.declaredClass&&t.pixels&&t.pixels.length>0};function r(t,e){if(null==e||!e.length||!a(t))return t;const i=t.pixels.length;return e&&e.some(t=>t>=i)||1===i&&1===e.length&&0===e[0]?t:i!==e.length||e.some((t,e)=>t!==e)?new s.a({pixelType:t.pixelType,width:t.width,height:t.height,mask:t.mask,validPixelCount:t.validPixelCount,maskIsAlpha:t.maskIsAlpha,pixels:e.map(e=>t.pixels[e]),statistics:t.statistics&&e.map(e=>t.statistics[e])}):t}function n(t){if(!t)return;const e=t.colormap;if(!e||0===e.length)return;const i=e.sort((t,e)=>t[0]-e[0]);let s=0;i[0][0]<0&&(s=i[0][0]);const a=Math.max(256,i[i.length-1][0]-s+1),r=new Uint8Array(4*a),n=[];let l,o=0,h=0;const c=5===i[0].length;if(a>65536)return i.forEach(t=>{n[t[0]-s]=c?t.slice(1):t.slice(1).concat([255])}),{indexed2DColormap:n,offset:s,alphaSpecified:c};if(t.fillUnspecified)for(l=i[h],o=l[0]-s;o<a;o++)r[4*o]=l[1],r[4*o+1]=l[2],r[4*o+2]=l[3],r[4*o+3]=c?l[4]:255,o===l[0]-s&&(l=h===i.length-1?l:i[++h]);else for(o=0;o<i.length;o++)l=i[o],h=4*(l[0]-s),r[h]=l[1],r[h+1]=l[2],r[h+2]=l[3],r[h+3]=c?l[4]:255;return{indexedColormap:r,offset:s,alphaSpecified:c}}function l(t,e){if(!a(t))return t;if(!e&&(e.indexedColormap||e.indexed2DColormap))return t;const i=t.clone(),s=i.pixels;let r=i.mask;const n=i.width*i.height;if(1!==s.length)return t;const{indexedColormap:l,indexed2DColormap:o,offset:h,alphaSpecified:c}=e,p=l.length-1;let u=0;const d=s[0],f=new Uint8Array(d.length),y=new Uint8Array(d.length),m=new Uint8Array(d.length);let b,x=0;if(l)if(r)for(u=0;u<n;u++)r[u]&&(x=4*(d[u]-h),x<h||x>p?r[u]=0:(f[u]=l[x],y[u]=l[x+1],m[u]=l[x+2],r[u]=l[x+3]));else{for(r=new Uint8Array(n),u=0;u<n;u++)x=4*(d[u]-h),x<h||x>p?r[u]=0:(f[u]=l[x],y[u]=l[x+1],m[u]=l[x+2],r[u]=l[x+3]);i.mask=r}else if(r)for(u=0;u<n;u++)r[u]&&(b=o[d[u]],f[u]=b[0],y[u]=b[1],m[u]=b[2],r[u]=b[3]);else{for(r=new Uint8Array(n),u=0;u<n;u++)b=o[d[u]],f[u]=b[0],y[u]=b[1],m[u]=b[2],r[u]=b[3];i.mask=r}return i.pixels=[f,y,m],i.statistics=null,i.pixelType="u8",i.maskIsAlpha=c,i}function o(t){if(!a(t))return null;t.statistics||t.updateStatistics();const{pixels:e,mask:i,pixelType:s,statistics:r}=t,n=t.width*t.height,l=e.length;let o,h,c,p,u;const d=[],f=[];let y,m,b,x,g,w,v,O,j,k;const A=256;for(p=0;p<l;p++){if(y=new Uint32Array(A),b=e[p],"u8"===s)if(o=-.5,h=255.5,i)for(u=0;u<n;u++)i[u]&&y[b[u]]++;else for(u=0;u<n;u++)y[b[u]]++;else{if(o=r[p].minValue,h=r[p].maxValue,c=(h-o)/A,m=new Uint32Array(257),i)for(u=0;u<n;u++)i[u]&&m[Math.floor((b[u]-o)/c)]++;else for(u=0;u<n;u++)m[Math.floor((b[u]-o)/c)]++;for(u=0;u<255;u++)y[u]=m[u];y[255]=m[255]+m[256]}for(d.push({min:o,max:h,size:A,counts:y}),x=0,g=0,O=0,u=0;u<A;u++)x+=y[u],g+=u*y[u];for(j=g/x,u=0;u<A;u++)O+=y[u]*(u-j)**2;k=Math.sqrt(O/(x-1)),c=(h-o)/A,w=(j+.5)*c+o,v=k*c,f.push({min:o,max:h,avg:w,stddev:v})}return{statistics:f,histograms:d}}function h(t){const e=[];for(let i=0;i<t.length;i++){const{min:s,max:a,size:r,counts:n}=t[i];let l=0,o=0;for(let t=0;t<r;t++)l+=n[t],o+=t*n[t];const h=o/l;let c=0;for(let t=0;t<r;t++)c+=n[t]*(t-h)**2;const p=(a-s)/r,u=(h+.5)*p+s,d=Math.sqrt(c/(l-1))*p;e.push({min:s,max:a,avg:u,stddev:d})}return e}function c(t){const{minCutOff:e,maxCutOff:i,gamma:s,pixelType:a}=t,r=t.outMin||0,n=t.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(a))return null;const l=e.length;let o,h,c=0;"s8"===a?c=-127:"s16"===a&&(c=-32767);let p=256;["u16","s16"].indexOf(a)>-1&&(p=65536);const u=[],d=[],f=n-r;for(o=0;o<l;o++)d[o]=i[o]-e[o],u[o]=f/(i[o]-e[o]);const y=s&&s.length>=l,m=[];if(y)for(o=0;o<l;o++)m[o]=s[o]>1?s[o]>2?6.5+(s[o]-2)**2.5:6.5+100*(2-s[o])**4:1;let b;const x=[];let g,w,v;if(y)for(o=0;o<l;o++){for(v=[],h=0;h<p;h++)g=h+c,b=(g-e[o])/d[o],w=1,s[o]>1&&(w-=(1/f)**(b*m[o])),v[h]=g<i[o]&&g>e[o]?Math.floor(w*f*b**(1/s[o]))+r:g>=i[o]?n:r;x[o]=v}else for(o=0;o<l;o++){for(v=[],h=0;h<p;h++)g=h+c,v[h]=g<=e[o]?r:g>=i[o]?n:Math.floor((g-e[o])/d[o]*f)+r;x[o]=v}if(null!=t.contrastOffset){const e=function(t,e){const i=Math.min(Math.max(t,-100),100),s=Math.min(Math.max(e,-100),100);let a,r;const n=new Uint8Array(256);for(a=0;a<256;a++)i>0&&i<100?r=(200*a-25500+510*s)/(2*(100-i))+128:i<=0&&i>-100?r=(200*a-25500+510*s)*(100+i)/2e4+128:100===i?(r=200*a-25500+256*(100-i)+510*s,r=r>0?255:0):-100===i&&(r=128),n[a]=r>255?255:r<0?0:r;return n}(t.contrastOffset,t.brightnessOffset);for(o=0;o<l;o++)for(v=x[o],h=0;h<p;h++)v[h]=e[v[h]]}return{lut:x,offset:c}}function p(t,e=256){e=Math.min(e,256);const{size:i,counts:s}=t,a=new Uint8Array(i),r=s.reduce((t,i)=>t+i/e,0);let n=0,l=0,o=0,h=r;for(let c=0;c<i;c++)if(o+=s[c],!(c<i-1&&o+s[c+1]<h)){for(;n<e-1&&h<o;)n++,h+=r;for(let t=l;t<=c;t++)a[t]=n;l=c+1}for(let c=l;c<i;c++)a[c]=e-1;return a}function u(t,e){if(!a(t))return null;const i=t.clone(),{pixels:s,mask:r}=i,{minCutOff:n,maxCutOff:l,gamma:o}=e,h=e.outMin||0,c=e.outMax||255,p=i.width*i.height,u=s.length;let d,f,y,m,b;const x=c-h,g=[],w=[];for(d=0;d<u;d++)w[d]=l[d]-n[d],g[d]=x/(l[d]-n[d]);const v=o&&o.length>=u,O=[];if(v)for(d=0;d<u;d++)O[d]=o[d]>1?o[d]>2?6.5+(o[d]-2)**2.5:6.5+100*(2-o[d])**4:1;if(v)if(null!=r){for(f=0;f<p;f++)if(r[f])for(d=0;d<u;d++)y=s[d][f],b=(y-n[d])/w[d],m=1,o[d]>1&&(m-=(1/x)**(b*O[d])),s[d][f]=y<l[d]&&y>n[d]?Math.floor(m*x*b**(1/o[d]))+h:y>=l[d]?c:h}else for(f=0;f<p;f++)for(d=0;d<u;d++)y=s[d][f],b=(y-n[d])/w[d],m=1,o[d]>1&&(m-=(1/x)**(b*O[d])),s[d][f]=y<l[d]&&y>n[d]?Math.floor(m*x*b**(1/o[d]))+h:y>=l[d]?c:h;else if(null!=r){for(f=0;f<p;f++)if(r[f])for(d=0;d<u;d++)y=s[d][f],s[d][f]=y<l[d]&&y>n[d]?Math.floor((y-n[d])/w[d]*x)+h:y>=l[d]?c:h}else for(f=0;f<p;f++)for(d=0;d<u;d++)y=s[d][f],s[d][f]=y<l[d]&&y>n[d]?Math.floor((y-n[d])/w[d]*x)+h:y>=l[d]?c:h;return i.pixelType="u8",i.updateStatistics(),i}function d(t,e){if(!a(t))return null;const{pixels:i,mask:r}=t,n=t.width*t.height,l=i.length;let o=e.lut;const{offset:h}=e;let c,p;o&&1===o[0].length&&(o=i.map(()=>o));const u=[];let d,f,y;if(h)if(null==r)for(c=0;c<l;c++){for(d=i[c],f=o[c],y=new Uint8Array(n),p=0;p<n;p++)y[p]=f[d[p]-h];u.push(y)}else for(c=0;c<l;c++){for(d=i[c],f=o[c],y=new Uint8Array(n),p=0;p<n;p++)r[p]&&(y[p]=f[d[p]-h]);u.push(y)}else if(null==r)for(c=0;c<l;c++){for(d=i[c],f=o[c],y=new Uint8Array(n),p=0;p<n;p++)y[p]=f[d[p]];u.push(y)}else for(c=0;c<l;c++){for(d=i[c],f=o[c],y=new Uint8Array(n),p=0;p<n;p++)r[p]&&(y[p]=f[d[p]]);u.push(y)}const m=new s.a({width:t.width,height:t.height,pixels:u,mask:r,pixelType:"u8"});return m.updateStatistics(),m}function f(t,e){if(!a(t))return null;const i=t.clone(),{pixels:s}=i,r=i.width*i.height,n=e.length,l=Math.floor(n/2),o=e[Math.floor(l)],h=s[0];let c,p,u,d,f,y,m=!1;const b=new Uint8Array(r),x=new Uint8Array(r),g=new Uint8Array(r);let w=i.mask;const v=4===e[0].mappedColor.length;for(w||(w=new Uint8Array(r),w.fill(v?255:1),i.mask=w),f=0;f<r;f++)if(w[f]){for(c=h[f],m=!1,y=l,p=o,u=0,d=n-1;d-u>1;){if(c===p.value){m=!0;break}c>p.value?u=y:d=y,y=Math.floor((u+d)/2),p=e[Math.floor(y)]}m||(c===e[u].value?(p=e[u],m=!0):c===e[d].value?(p=e[d],m=!0):c<e[u].value?(m=!1,p=null):c>e[u].value&&(c<e[d].value?(p=e[u],m=!0):d===n-1?(m=!1,p=null):(p=e[d],m=!0))),m?(b[f]=p.mappedColor[0],x[f]=p.mappedColor[1],g[f]=p.mappedColor[2],w[f]=p.mappedColor[3]):b[f]=x[f]=g[f]=w[f]=0}return i.pixels=[b,x,g],i.mask=w,i.pixelType="u8",i.maskIsAlpha=v,i}function y(t,e,i,s,a,r,n,l){return{xmin:a<=i*t?0:a<i*t+t?a-i*t:t,ymin:r<=s*e?0:r<s*e+e?r-s*e:e,xmax:a+n<=i*t?0:a+n<i*t+t?a+n-i*t:t,ymax:r+l<=s*e?0:r+l<s*e+e?r+l-s*e:e}}function m(t,e){if(!t||0===t.length)return null;const i=t.filter(t=>t.pixelBlock)[0];if(!i)return null;const s=(i.extent.xmax-i.extent.xmin)/i.pixelBlock.width,a=(i.extent.ymax-i.extent.ymin)/i.pixelBlock.height,r=.01*Math.min(s,a),n=t.sort((t,e)=>Math.abs(t.extent.ymax-e.extent.ymax)>r?e.extent.ymax-t.extent.ymax:Math.abs(t.extent.xmin-e.extent.xmin)>r?t.extent.xmin-e.extent.xmin:0),l=Math.min.apply(null,n.map(t=>t.extent.xmin)),o=Math.min.apply(null,n.map(t=>t.extent.ymin)),h=Math.max.apply(null,n.map(t=>t.extent.xmax)),c=Math.max.apply(null,n.map(t=>t.extent.ymax)),p={x:Math.round((e.xmin-l)/s),y:Math.round((c-e.ymax)/a)},u={width:Math.round((h-l)/s),height:Math.round((c-o)/a)},d={width:Math.round((e.xmax-e.xmin)/s),height:Math.round((e.ymax-e.ymin)/a)};return Math.round(u.width/i.pixelBlock.width)*Math.round(u.height/i.pixelBlock.height)!==n.length||p.x<0||p.y<0||u.width<d.width||u.height<d.height?null:{extent:e,pixelBlock:b(n.map(t=>t.pixelBlock),u,p,d)}}function b(t,e,i,r){const n=t.filter(t=>a(t))[0];if(null==n)return null;const l=r?r.width:e.width,o=r?r.height:e.height,h=n.width,c=n.height,p=e.width/h,u=e.height/c,d=i?i.x:0,f=i?i.y:0,m=n.pixelType,b=s.a.getPixelArrayConstructor(m),x=n.pixels.length,g=[];let w,v,O,j,k,A,M,U,R,I,q,T,C;for(A=0;A<x;A++){for(v=new b(l*o),M=0;M<u;M++)for(U=0;U<p;U++)if(O=t[M*p+U],a(O))for(w=O.pixels[A],q=y(h,c,U,M,d,f,l,o),R=q.ymin;R<q.ymax;R++)for(j=(M*c+R-f)*l+(U*h-d),k=R*h,I=q.xmin;I<q.xmax;I++)v[j+I]=w[k+I];g.push(v)}if(t.some(t=>null==t||t.mask&&t.mask.length>0))for(T=new Uint8Array(l*o),M=0;M<u;M++)for(U=0;U<p;U++)if(O=t[M*p+U],C=O?O.mask:null,q=y(h,c,U,M,d,f,l,o),C)for(R=q.ymin;R<q.ymax;R++)for(j=(M*c+R-f)*l+(U*h-d),k=R*h,I=q.xmin;I<q.xmax;I++)T[j+I]=C[k+I];else if(O)for(R=q.ymin;R<q.ymax;R++)for(j=(M*c+R-f)*l+(U*h-d),k=R*h,I=q.xmin;I<q.xmax;I++)T[j+I]=1;else for(R=q.ymin;R<q.ymax;R++)for(j=(M*c+R-f)*l+(U*h-d),k=R*h,I=q.xmin;I<q.xmax;I++)T[j+I]=0;const B=new s.a({width:l,height:o,pixels:g,pixelType:m,mask:T});return B.updateStatistics(),B}function x(t,e,i){if(!a(t))return null;const{width:s,height:r}=t,n=e.x,l=e.y,o=i.width+n,h=i.height+l;if(n<0||l<0||o>s||h>r)return t;if(0===n&&0===l&&o===s&&h===r)return t;t.mask||(t.mask=new Uint8Array(s*r));const c=t.mask;for(let a=0;a<r;a++){const t=a*s;for(let e=0;e<s;e++)c[t+e]=a<l||a>=h||e<n||e>=o?0:1}return t.updateStatistics(),t}function g(t){if(!a(t))return null;const e=t.clone(),{width:i,height:s,pixels:r,mask:n}=t,l=r[0],o=e.pixels[0];for(let a=2;a<s-1;a++){const t=new Map;for(let s=a-2;s<a+2;s++)for(let e=0;e<4;e++){const a=s*i+e;O(t,l[a],n?n[a]:1)}o[a*i]=w(t),o[a*i+1]=o[a*i+2]=o[a*i];let e=3;for(;e<i-1;e++){let s=(a-2)*i+e+1;O(t,l[s],n?n[s]:1),s=(a-1)*i+e+1,O(t,l[s],n?n[s]:1),s=a*i+e+1,O(t,l[s],n?n[s]:1),s=(a+1)*i+e+1,O(t,l[s],n?n[s]:1),s=(a-2)*i+e-3,v(t,l[s],n?n[s]:1),s=(a-1)*i+e-3,v(t,l[s],n?n[s]:1),s=a*i+e-3,v(t,l[s],n?n[s]:1),s=(a+1)*i+e-3,v(t,l[s],n?n[s]:1),o[a*i+e]=w(t)}o[a*i+e+1]=o[a*i+e]}for(let a=0;a<i;a++)o[a]=o[i+a]=o[2*i+a],o[(s-1)*i+a]=o[(s-2)*i+a];return e.updateStatistics(),e}function w(t){if(0===t.size)return 0;let e=0,i=-1,s=0;const a=t.keys();let r=a.next();for(;!r.done;)s=t.get(r.value),s>e&&(i=r.value,e=s),r=a.next();return i}function v(t,e,i){if(0===i)return;const s=t.get(e);1===s?t.delete(e):t.set(e,s-1)}function O(t,e,i){0!==i&&t.set(e,t.has(e)?t.get(e)+1:1)}function j(t,e,i){let{x:r,y:n}=e;const{width:l,height:o}=i;if(0===r&&0===n&&o===t.height&&l===t.width)return t;const{width:h,height:c}=t,p=Math.max(0,n),u=Math.max(0,r),d=Math.min(r+l,h),f=Math.min(n+o,c);if(d<0||f<0||!a(t))return null;r=Math.max(0,-r),n=Math.max(0,-n);const{pixels:y,mask:m}=t,b=l*o,x=y.length,g=[];for(let a=0;a<x;a++){const e=y[a],i=s.a.createEmptyBand(t.pixelType,b);for(let t=p;t<f;t++){const s=t*h;let a=(t+n-p)*l+r;for(let t=u;t<d;t++)i[a++]=e[s+t]}g.push(i)}const w=new Uint8Array(b);for(let s=p;s<f;s++){const t=s*h;let e=(s+n-p)*l+r;for(let i=u;i<d;i++)w[e++]=m?m[t+i]:1}const v=new s.a({width:i.width,height:i.height,pixelType:t.pixelType,pixels:g,mask:w});return v.updateStatistics(),v}function k(t,e=!0){if(!a(t))return null;const{pixels:i,width:r,height:n,mask:l,pixelType:o}=t,h=[],c=Math.round(r/2),p=Math.round(n/2),u=n-1,d=r-1;for(let a=0;a<i.length;a++){const t=i[a],l=s.a.createEmptyBand(o,c*p);let f=0;for(let i=0;i<n;i+=2)for(let s=0;s<r;s+=2){const a=t[i*r+s];if(e){const e=s===d?a:t[i*r+s+1],n=i===u?a:t[i*r+s+r];l[f++]=(a+e+n+(s===d?n:i===u?e:t[i*r+s+r+1]))/4}else l[f++]=a}h.push(l)}let f=null;if(l){f=new Uint8Array(c*p);let t=0;for(let i=0;i<n;i+=2)for(let s=0;s<r;s+=2){const a=l[i*r+s];if(e){const e=s===d?a:l[i*r+s+1],n=i===u?a:l[i*r+s+r];f[t++]=a*e*n*(s===d?n:i===u?e:l[i*r+s+r+1])?1:0}else f[t++]=a}}return new s.a({width:c,height:p,pixelType:o,pixels:h,mask:f})}function A(t,e,i){if(!a(t))return null;const{width:s,height:r}=e;let{width:n,height:l}=t;const o=new Map,h={x:0,y:0},c=null==i?1:1+i;let p=t;for(let a=0;a<c;a++){const t=Math.ceil(n/s),i=Math.ceil(l/r);for(let n=0;n<i;n++){h.y=n*r;for(let i=0;i<t;i++){h.x=i*s;const t=j(p,h,e);o.set(`${a}/${n}/${i}`,t)}}a<c-1&&(p=k(p)),n=Math.round(n/2),l=Math.round(l/2)}return o}function M(t,e,i,r,n="nearest"){if(!a(t))return null;"majority"===n&&(t=g(t));const{pixels:l,mask:o,pixelType:h}=t,c=t.width,p=t.height,u=s.a.getPixelArrayConstructor(h),d=l.length,{width:f,height:y}=e,m=r.cols,b=r.rows,x=Math.ceil(f/m),w=Math.ceil(y/b);let v,O,j,k,A,M,U,R=!1;for(let s=0;s<i.length;s+=3)-1===i[s]&&-1===i[s+1]&&-1===i[s+2]&&(R=!0);const I=new Float32Array(f*y),q=new Float32Array(f*y);let T,C,B=0;const E="majority"===n?0:.5;for(let s=0;s<w;s++)for(let t=0;t<x;t++){v=12*(s*x+t),O=i[v],j=i[v+1],k=i[v+2],A=i[v+3],M=i[v+4],U=i[v+5];for(let e=0;e<b;e++){B=(s*b+e)*f+t*m,C=(e+.5)/b;for(let t=0;t<e;t++)T=(t+.5)/m,I[B+t]=Math.round((O*T+j*C+k)*c-E),q[B+t]=Math.round((A*T+M*C+U)*p-E)}v+=6,O=i[v],j=i[v+1],k=i[v+2],A=i[v+3],M=i[v+4],U=i[v+5];for(let e=0;e<b;e++){B=(s*b+e)*f+t*m,C=(e+.5)/b;for(let t=e;t<m;t++)T=(t+.5)/m,I[B+t]=Math.round((O*T+j*C+k)*c-E),q[B+t]=Math.round((A*T+M*C+U)*p-E)}}const _=(t,e)=>{for(let i=0;i<y;i++){v=i*f;for(let i=0;i<f;i++)t[v]=I[v]<0||q[v]<0?0:e[I[v]+q[v]*c],v++}},S=[];let P;for(let s=0;s<d;s++)P=new u(f*y),_(P,l[s]),S.push(P);const V=new s.a({width:f,height:y,pixelType:h,pixels:S});if(o)V.mask=new Uint8Array(f*y),_(V.mask,o);else if(R){V.mask=new Uint8Array(f*y);for(let t=0;t<f*y;t++)V.mask[t]=I[t]<0||q[t]<0?0:1}return V.updateStatistics(),V}},rXMu:function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return r});var s=i("srIe"),a=i("wdpY");async function r(t,e=t.popupTemplate){if(!Object(s.i)(e))return[];const i=await e.getRequiredFields(t.fields),{lastEditInfoEnabled:r}=e,{objectIdField:n,typeIdField:l,globalIdField:o,relationships:h}=t;if(i.includes("*"))return["*"];const c=r?await Object(a.m)(t):[],p=Object(a.i)(t.fields,[...i,...c]);return l&&p.push(l),p&&n&&Object(a.p)(t.fields,n)&&-1===p.indexOf(n)&&p.push(n),p&&o&&Object(a.p)(t.fields,o)&&-1===p.indexOf(o)&&p.push(o),h&&h.forEach(e=>{const{keyField:i}=e;p&&i&&Object(a.p)(t.fields,i)&&-1===p.indexOf(i)&&p.push(i)}),p}function n(t,e){return t.popupTemplate?t.popupTemplate:Object(s.i)(e)&&e.defaultPopupTemplateEnabled&&Object(s.i)(t.defaultPopupTemplate)?t.defaultPopupTemplate:null}}}]);