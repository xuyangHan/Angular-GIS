(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{yvy3:function(e,t,r){"use strict";r.r(t);var i=r("pO5D"),o=(r("wSAH"),r("srIe")),s=(r("6S2I"),r("zqDF"),r("WbKI")),n=r("r88o"),a=r("04ZG"),c=r("zlDU"),p=r("/PL2"),l=r("evjZ"),y=r("Jpjp"),d=r("4EHJ"),u=r("ju1D"),b=r("ku/q"),h=r("9AIY");function O(e){const t=Object(o.i)(e)&&e.origins?e.origins:[void 0];return(r,i)=>{const n=function(e,t,r){if(Object(o.i)(e)&&"resource"===e.type)return function(e,t,r){const i=Object(l.b)(t,r);return{type:String,read:(e,t,r)=>{const o=Object(p.d)(e,t,r);return i.type===String?o:"function"==typeof i.type?new i.type({url:o}):void 0},write:{writer(t,s,n,a){if(!a||!a.resources)return"string"==typeof t?void(s[n]=Object(p.e)(t,a)):void(s[n]=t.write({},a));const c=function(e){return Object(o.h)(e)?null:"string"==typeof e?e:e.url}(t),l=c?Object(p.e)(c,{...a,verifyItemRelativeUrls:a&&a.verifyItemRelativeUrls?{writtenUrls:a.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null},1):null,u=i.type!==String&&(!Object(y.a)(this)||a&&a.origin&&this.originIdOf(r)>Object(b.d)(a.origin));a&&a.portalItem&&Object(o.i)(l)&&!Object(d.s)(l)?u?function(e,t,r,i,o,s,n,a){const c=n.portalItem.resourceFromPath(i),p=m(r,i,n);Object(h.a)(p)===Object(d.n)(c.path)?(j(e,t,c,p,n.resources.toUpdate),o[s]=i):f(e,t,r,i,o,s,n,a)}(this,r,t,l,s,n,a,e):function(e,t,r,i){i.resources.toKeep.push({resource:i.portalItem.resourceFromPath(e)}),t[r]=e}(l,s,n,a):a&&a.portalItem&&(Object(o.h)(l)||Object(o.i)(Object(p.b)(l))||Object(d.t)(l)||u)?f(this,r,t,l,s,n,a,e):s[n]=l}}}}(e,t,r);switch(Object(o.i)(e)&&e.type?e.type:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:t}=p.c;return{read:e,write:t}}}}(e,r,i);for(const e of t){const t=Object(s.c)(r,e,i);for(const e in n)t[e]=n[e]}}}function f(e,t,i,s,n,a,c,p){const l=Object(u.a)(),y=m(i,s,c),b=Object(d.y)(Object(o.g)(p,"prefix"),l),O=`${b}.${Object(h.a)(y)}`,f=c.portalItem.resourceFromPath(O);Object(d.t)(s)&&c.resources.pendingOperations.push(async function(e){const t=(await Promise.resolve().then(r.bind(null,"Lqtk"))).default,{data:i}=await t(e,{responseType:"blob"});return i}(s).then(e=>{f.path=`${b}.${Object(h.a)(e)}`,n[a]=f.itemRelativeUrl}).catch(()=>{})),j(e,t,f,y,c.resources.toAdd),n[a]=f.itemRelativeUrl}function j(e,t,r,i,o){o.push({resource:r,content:i,finish:r=>{!function(e,t,r){"string"==typeof e[t]?e[t]=r.url:e[t].url=r.url}(e,t,r)}})}function m(e,t,r){return"string"==typeof e?{url:t}:new Blob([JSON.stringify(e.toJSON(r))],{type:"application/json"})}var g,v=r("9MzC"),w=r("r0DZ"),S=r("pqNC"),I=r("5pQd"),T=r("N5XI"),R=r("IvSi"),_=r("uRH/"),N=r("PVlI"),L=r("DbUH"),J=r("WmKv"),U=r("XTTP"),x=r("lq5k"),M=r("ag7Y"),P=r("LE9a"),D=r("Lqtk"),q=r("f/qv"),A=r("ACjl"),k=r("Cduq"),K=r("Ehki"),V=(r("4GrV"),r("gYg2"));let z=g=class extends M.a{constructor(e){super(e),this.geometry=null,this.type="clip"}writeGeometry(e,t,r,i){if(i.layer&&i.layer.spatialReference&&!i.layer.spatialReference.equals(this.geometry.spatialReference)){if(!Object(V.a)(e.spatialReference,i.layer.spatialReference))return void(i&&i.messages&&i.messages.push(new A.a("scenemodification:unsupported","Scene modifications with incompatible spatial references are not supported",{modification:this,spatialReference:i.layer.spatialReference,context:i})));const o=new K.a;Object(V.j)(e,o,i.layer.spatialReference),t[r]=o.toJSON(i)}else t[r]=e.toJSON(i);delete t[r].spatialReference}clone(){return new g({geometry:Object(q.a)(this.geometry),type:this.type})}};Object(i.a)([Object(s.b)({type:K.a}),O()],z.prototype,"geometry",void 0),Object(i.a)([Object(k.a)(["web-scene","portal-item"],"geometry")],z.prototype,"writeGeometry",null),Object(i.a)([Object(s.b)({type:["clip","mask","replace"],nonNullable:!0}),O()],z.prototype,"type",void 0),z=g=Object(i.a)([Object(a.a)("esri.layers.support.SceneModification")],z);var C,F=z;let E=C=class extends(Object(M.b)(P.a.ofType(F))){constructor(e){super(e),this.url=null}toJSON(e){return this.toArray().map(t=>t.toJSON(e)).filter(e=>!!e.geometry)}clone(){return new C({url:this.url,items:this.items.map(e=>e.clone())})}_readModifications(e,t){for(const r of e)this.add(F.fromJSON(r,t))}static fromJSON(e,t){const r=new C;return r._readModifications(e,t),r}static async fromUrl(e,t,r){const i={url:Object(d.J)(e),origin:"service"},s=await Object(D.default)(e,{responseType:"json",signal:Object(o.g)(r,"signal")}),n=t.toJSON(),a=[];for(const o of s.data)a.push(F.fromJSON({...o,geometry:{...o.geometry,spatialReference:n}},i));return new C({url:e,items:a})}};Object(i.a)([Object(s.b)({type:String})],E.prototype,"url",void 0),E=C=Object(i.a)([Object(a.a)("esri.layers.support.SceneModifications")],E);var G=E;let H=class extends(Object(x.a)(Object(N.a)(Object(_.a)(Object(L.a)(Object(J.a)(Object(I.a)(S.a))))))){constructor(...e){super(...e),this.handles=new w.a,this.geometryType="mesh",this.operationalLayerType="IntegratedMeshLayer",this.type="integrated-mesh",this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.profile="mesh-pyramids",this.modifications=null,this._modificationsSource=null,this.elevationInfo=null,this.path=null}destroy(){this.handles.destroy()}initialize(){this.handles.add(Object(T.b)(this,"modifications","after-changes",()=>this.modifications=this.modifications,null,null,!0))}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}readModifications(e,t,r){this._modificationsSource={url:Object(p.a)(e,r),context:r}}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(e){const t=Object(o.g)(e,"signal");try{await this.loadFromPortal({supportedTypes:["Scene Service"]},e)}catch(r){Object(v.t)(r)}if(await this._fetchService(t),Object(o.i)(this._modificationsSource)){const t=await G.fromUrl(this._modificationsSource.url,this.spatialReference,e);this.setAtOrigin("modifications",t,this._modificationsSource.context.origin),this._modificationsSource=null}await this._fetchIndexAndUpdateExtent(this.nodePages,t)}beforeSave(){if(!Object(o.h)(this._modificationsSource))return this.load().then(()=>{},()=>{})}async saveAs(e,t){return this._debouncedSaveOperations(1,{...t,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"integrated-mesh"},e)}async save(){return this._debouncedSaveOperations(0,{getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"integrated-mesh"})}validateLayer(e){if(e.layerType&&"IntegratedMesh"!==e.layerType)throw new c.a("integrated-mesh-layer:layer-type-not-supported","IntegratedMeshLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new c.a("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"});if(this.version.major>1)throw new c.a("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x"})}_getTypeKeywords(){return["IntegratedMeshLayer"]}};Object(i.a)([Object(s.b)({type:String,readOnly:!0})],H.prototype,"geometryType",void 0),Object(i.a)([Object(s.b)({type:["show","hide"]})],H.prototype,"listMode",void 0),Object(i.a)([Object(s.b)({type:["IntegratedMeshLayer"]})],H.prototype,"operationalLayerType",void 0),Object(i.a)([Object(s.b)({json:{read:!1},readOnly:!0})],H.prototype,"type",void 0),Object(i.a)([Object(s.b)({type:U.c,readOnly:!0})],H.prototype,"nodePages",void 0),Object(i.a)([Object(s.b)({type:[U.b],readOnly:!0})],H.prototype,"materialDefinitions",void 0),Object(i.a)([Object(s.b)({type:[U.d],readOnly:!0})],H.prototype,"textureSetDefinitions",void 0),Object(i.a)([Object(s.b)({type:[U.a],readOnly:!0})],H.prototype,"geometryDefinitions",void 0),Object(i.a)([Object(s.b)({readOnly:!0})],H.prototype,"serviceUpdateTimeStamp",void 0),Object(i.a)([Object(s.b)({type:G}),O({origins:["web-scene","portal-item"],type:"resource",prefix:"modifications"})],H.prototype,"modifications",void 0),Object(i.a)([Object(n.a)(["web-scene","portal-item"],"modifications")],H.prototype,"readModifications",null),Object(i.a)([Object(s.b)(R.b)],H.prototype,"elevationInfo",void 0),Object(i.a)([Object(s.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],H.prototype,"path",void 0),H=Object(i.a)([Object(a.a)("esri.layers.IntegratedMeshLayer")],H),t.default=H}}]);