{"version":3,"sources":["./node_modules/@arcgis/core/views/3d/support/meshProcessing.js","./node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/edgePreprocessing.js","./node_modules/@arcgis/core/views/3d/support/buffer/workerHelper.js","./node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/bufferLayouts.js","./node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker.js","./node_modules/@arcgis/core/views/3d/support/buffer/glUtil.js","./node_modules/@arcgis/core/views/3d/webgl-engine/lib/edgeRendering/edgeBufferWriters.js","./node_modules/@arcgis/core/geometry/support/meshUtils/deduplicate.js"],"names":[],"mappings":"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","file":"views-3d-webgl-engine-lib-edgeRendering-EdgeProcessingWorker-js.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,o,n){const r=o/3,c=new Uint32Array(n+1),e=new Uint32Array(n+1),s=(t,o)=>{t<o?c[t+1]++:e[o+1]++};for(let x=0;x<r;x++){const o=t[3*x],n=t[3*x+1],r=t[3*x+2];s(o,n),s(n,r),s(r,o)}let f=0,l=0;for(let x=0;x<n;x++){const t=c[x+1],o=e[x+1];c[x+1]=f,e[x+1]=l,f+=t,l+=o}const i=new Uint32Array(6*r),a=c[n],w=(t,o,n)=>{if(t<o){const r=c[t+1]++;i[2*r]=o,i[2*r+1]=n}else{const r=e[o+1]++;i[2*a+2*r]=t,i[2*a+2*r+1]=n}};for(let x=0;x<r;x++){const o=t[3*x],n=t[3*x+1],r=t[3*x+2];w(o,n,x),w(n,r,x),w(r,o,x)}const y=(t,o)=>{const n=2*t,r=o-t;for(let c=1;c<r;c++){const t=i[n+2*c],o=i[n+2*c+1];let r=c-1;for(;r>=0&&i[n+2*r]>t;r--)i[n+2*r+2]=i[n+2*r],i[n+2*r+3]=i[n+2*r+1];i[n+2*r+2]=t,i[n+2*r+3]=o}};for(let x=0;x<n;x++)y(c[x],c[x+1]),y(a+e[x],a+e[x+1]);const A=new Int32Array(3*r),U=(o,n)=>o===t[3*n]?0:o===t[3*n+1]?1:o===t[3*n+2]?2:-1,u=(t,o)=>{const n=U(t,o);A[3*o+n]=-1},p=(t,o,n,r)=>{const c=U(t,o);A[3*o+c]=r;const e=U(n,r);A[3*r+e]=o};for(let x=0;x<n;x++){let t=c[x];const o=c[x+1];let n=e[x];const r=e[x+1];for(;t<o&&n<r;){const o=i[2*t],r=i[2*a+2*n];o===r?(p(x,i[2*t+1],r,i[2*a+2*n+1]),t++,n++):o<r?(u(x,i[2*t+1]),t++):(u(r,i[2*a+2*n+1]),n++)}for(;t<o;)u(x,i[2*t+1]),t++;for(;n<r;){u(i[2*a+2*n],i[2*a+2*n+1]),n++}}return A}export{t as computeNeighbors};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{forEach as e}from\"../../../../../core/typedArrayUtil.js\";import{range as t}from\"../../../../../core/arrayUtils.js\";import{deg2rad as o,acosClamped as n}from\"../../../../../core/mathUtils.js\";import{c as r}from\"../../../../../chunks/vec3f64.js\";import{k as s,s as c,g as a,d as i,c as l,f as g,n as f}from\"../../../../../chunks/vec3.js\";import{directionFromTo as m}from\"../../../support/mathUtils.js\";const p=-1;function u(n,r,l,g=V){const f=n.vertices.position,m=n.vertices.componentIndex,u=o(g.anglePlanar),I=o(g.angleSignificantEdge),j=Math.cos(I),N=Math.cos(u),x=y.edge,F=x.position0,U=x.position1,k=x.faceNormal0,E=x.faceNormal1,D=w(n),M=v(n),P=M.length/4,S=r.allocate(P);let b=0;const L=P,q=l.allocate(L);let z=0,B=0,C=0;const G=t(0,P),H=new Float32Array(P);e(H,((e,t,o)=>{f.getVec(M[4*t+0],F),f.getVec(M[4*t+1],U),o[t]=s(F,U)})),G.sort(((e,t)=>H[t]-H[e]));const J=new Array,K=new Array;for(let e=0;e<P;e++){const t=G[e],o=H[t],n=M[4*t+0],s=M[4*t+1],g=M[4*t+2],v=M[4*t+3],w=v===p;if(f.getVec(n,F),f.getVec(s,U),w)c(k,D[3*g+0],D[3*g+1],D[3*g+2]),a(E,k),x.componentIndex=m.get(n),x.cosAngle=i(k,E);else{if(c(k,D[3*g+0],D[3*g+1],D[3*g+2]),c(E,D[3*v+0],D[3*v+1],D[3*v+2]),x.componentIndex=m.get(n),x.cosAngle=i(k,E),d(x,N))continue;x.cosAngle<-.9999&&a(E,k)}B+=o,C++,w||h(x,j)?(r.write(S,b++,x),J.push(o)):A(x,u)&&(l.write(q,z++,x),K.push(o))}const O=new Float32Array(J.reverse()),Q=new Float32Array(K.reverse());return{regular:{instancesData:r.trim(S,b),lodInfo:{lengths:O}},silhouette:{instancesData:l.trim(q,z),lodInfo:{lengths:Q}},averageEdgeLength:B/C}}function h(e,t){return e.cosAngle<t}function d(e,t){return e.cosAngle>t}function A(e,t){const o=n(e.cosAngle),r=y.fwd,s=y.ortho;m(r,e.position1,e.position0);return o*(i(l(s,e.faceNormal0,e.faceNormal1),r)>0?-1:1)>t}function v(e){const t=e.faces.length/3,o=e.faces,n=e.neighbors;let r=0;for(let a=0;a<t;a++){const e=n[3*a+0],t=n[3*a+1],s=n[3*a+2],c=o[3*a+0],i=o[3*a+1],l=o[3*a+2];r+=e===p||c<i?1:0,r+=t===p||i<l?1:0,r+=s===p||l<c?1:0}const s=new Int32Array(4*r);let c=0;for(let a=0;a<t;a++){const e=n[3*a+0],t=n[3*a+1],r=n[3*a+2],i=o[3*a+0],l=o[3*a+1],g=o[3*a+2];(e===p||i<l)&&(s[c++]=i,s[c++]=l,s[c++]=a,s[c++]=e),(t===p||l<g)&&(s[c++]=l,s[c++]=g,s[c++]=a,s[c++]=t),(r===p||g<i)&&(s[c++]=g,s[c++]=i,s[c++]=a,s[c++]=r)}return s}function w(e){const t=e.faces.length/3,o=e.vertices.position,n=e.faces,r=I.v0,s=I.v1,c=I.v2,a=new Float32Array(3*t);for(let i=0;i<t;i++){const e=n[3*i+0],t=n[3*i+1],m=n[3*i+2];o.getVec(e,r),o.getVec(t,s),o.getVec(m,c),g(s,s,r),g(c,c,r),l(r,s,c),f(r,r),a[3*i+0]=r[0],a[3*i+1]=r[1],a[3*i+2]=r[2]}return a}const y={edge:{position0:r(),position1:r(),faceNormal0:r(),faceNormal1:r(),componentIndex:0,cosAngle:0},ortho:r(),fwd:r()},I={v0:r(),v1:r(),v2:r()},V={anglePlanar:4,angleSignificantEdge:35};export{u as extractEdges};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{BufferViewFloat as e,BufferViewVec2f as t,BufferViewVec3f as r,BufferViewVec4f as n,BufferViewMat3f as o,BufferViewMat4f as f,BufferViewFloat64 as u,BufferViewVec2f64 as s,BufferViewVec3f64 as c,BufferViewVec4f64 as i,BufferViewMat3f64 as a,BufferViewMat4f64 as l,BufferViewUint8 as d,BufferViewVec2u8 as m,BufferViewVec3u8 as p,BufferViewVec4u8 as y,BufferViewUint16 as h,BufferViewVec2u16 as E,BufferViewVec3u16 as b,BufferViewVec4u16 as w,BufferViewUint32 as N,BufferViewVec2u32 as j,BufferViewVec3u32 as V,BufferViewVec4u32 as $,BufferViewInt8 as g,BufferViewVec2i8 as v,BufferViewVec3i8 as x,BufferViewVec4i8 as A,BufferViewInt16 as B,BufferViewVec2i16 as C,BufferViewVec3i16 as I,BufferViewVec4i16 as L,BufferViewInt32 as M,BufferViewVec2i32 as T,BufferViewVec3i32 as _,BufferViewVec4i32 as k}from\"./BufferView.js\";import{newLayout as q}from\"./InterleavedLayout.js\";function z(e,t){return t.push(e.buffer),{buffer:e.buffer,layout:F(e.layout)}}function D(e){return G(e.layout).createView(e.buffer)}function F(e){const t=new Array;return e.fields.forEach(((e,r)=>{const n={...e,constructor:J(e.constructor)};t.push([r,n])})),{stride:e.stride,fields:t,fieldNames:e.fieldNames}}function G(e){const t=q();return t.stride=e.stride,t.fieldNames=e.fieldNames,e.fields.forEach((e=>t.fields.set(e[0],{...e[1],constructor:K(e[1].constructor)}))),t}const H=[e,t,r,n,o,f,u,s,c,i,a,l,d,m,p,y,h,E,b,w,N,j,V,$,g,v,x,A,B,C,I,L,M,T,_,k];function J(e){return`${e.ElementType}_${e.ElementCount}`}function K(e){return O.get(e)}const O=new Map;H.forEach((e=>O.set(J(e),e)));export{z as packInterleavedBuffer,F as packLayout,D as unpackInterleavedBuffer,G as unpackLayout};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glLayout as n}from\"../../../support/buffer/glUtil.js\";import{newLayout as o}from\"../../../support/buffer/InterleavedLayout.js\";const e=o().vec3f(\"position\").u16(\"componentIndex\").u16(\"u16padding\"),i=o().vec2u8(\"sideness\"),t=n(i),a=o().vec3f(\"position0\").vec3f(\"position1\").u16(\"componentIndex\").u8(\"variantOffset\",{glNormalized:!0}).u8(\"variantStroke\").u8(\"variantExtension\",{glNormalized:!0}).u8(\"u8padding\",{glPadding:!0}).u16(\"u16padding\",{glPadding:!0}),r=a.clone().vec3f(\"normal\"),s=a.clone().vec3f(\"normalA\").vec3f(\"normalB\"),d={position0:0,position1:1,componentIndex:2,variantOffset:4,variantStroke:5,variantExtension:6,normal:7,normalA:7,normalB:8,sideness:9};export{a as CommonInstancesLayout,e as EdgeInputBufferLayout,d as EdgeShaderAttributeLocations,r as RegularEdgeInstancesLayout,s as SilhouetteEdgeInstancesLayout,i as VertexLayout,t as glVertexLayout};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{deduplicate as e}from\"../../../../../geometry/support/meshUtils/deduplicate.js\";import{EdgeInputBufferLayout as t}from\"./bufferLayouts.js\";import{RegularEdgeBufferWriter as n,SilhouetteEdgeBufferWriter as r}from\"./edgeBufferWriters.js\";import{packInterleavedBuffer as i}from\"../../../support/buffer/workerHelper.js\";import{computeNeighbors as s}from\"../../../support/meshProcessing.js\";import{extractEdges as o}from\"./edgePreprocessing.js\";async function a(e){const t=u(e),n=f(t),r=[t.data.buffer];return{result:c(n,r),transferList:r}}function f(e){const t=g(e.data,e.skipDeduplicate,e.indices,e.indicesLength);return d.updateSettings(e.writerSettings),l.updateSettings(e.writerSettings),o(t,d,l)}function u(e){return{data:t.createView(e.dataBuffer),indices:\"Uint32Array\"===e.indicesType?new Uint32Array(e.indicesBuffer):\"Uint16Array\"===e.indicesType?new Uint16Array(e.indicesBuffer):void 0,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}function c(e,t){t.push(e.regular.lodInfo.lengths.buffer),t.push(e.silhouette.lodInfo.lengths.buffer);return{regular:{instancesData:i(e.regular.instancesData,t),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:i(e.silhouette.instancesData,t),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}function g(n,r,i,o){if(r){return{faces:i,facesLength:o,neighbors:s(i,o,n.count),vertices:n}}const a=e(n.buffer,n.stride/4,{originalIndices:i,originalIndicesLength:o}),f=s(a.indices,o,a.uniqueCount);return{faces:a.indices,facesLength:a.indices.length,neighbors:f,vertices:t.createView(a.buffer)}}const d=new n,l=new r;export{f as work,a as wrappedWork};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst t={divisor:0};function o(o,n={}){n={...t,...n};const r=o.stride;return o.fieldNames.filter((t=>{const e=o.fields.get(t).optional;return!(e&&e.glPadding)})).map((t=>{const i=o.fields.get(t),s=i.constructor.ElementCount,u=e(i.constructor.ElementType),f=i.offset,c=!(!i.optional||!i.optional.glNormalized);return{name:t,stride:r,count:s,type:u,offset:f,normalized:c,divisor:n.divisor}}))}function e(t){const o=n[t];if(o)return o;throw new Error(\"BufferType not supported in WebGL\")}const n={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126};export{o as glLayout};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/RandomLCG.js\";import{c as o}from\"../../../../../chunks/vec3f64.js\";import{b as e,n}from\"../../../../../chunks/vec3.js\";import{glLayout as i}from\"../../../support/buffer/glUtil.js\";import{RegularEdgeInstancesLayout as r,SilhouetteEdgeInstancesLayout as s}from\"./bufferLayouts.js\";class a{updateSettings(t){this.settings=t,this.edgeHashFunction=t.reducedPrecision?f:p}write(t,o,e){const n=this.edgeHashFunction(e);y.seed=n;const i=y.getIntRange(0,255),r=y.getIntRange(0,this.settings.variants-1),s=.7,a=y.getFloat(),c=255*(.5*g(-(1-Math.min(a/s,1))+Math.max(0,a-s)/(1-s),1.2)+.5);t.position0.setVec(o,e.position0),t.position1.setVec(o,e.position1),t.componentIndex.set(o,e.componentIndex),t.variantOffset.set(o,i),t.variantStroke.set(o,r),t.variantExtension.set(o,c)}trim(t,o){return t.slice(0,o)}}const c=new Float32Array(6),m=new Uint32Array(c.buffer),u=new Uint32Array(1);function p(t){const o=c;o[0]=t.position0[0],o[1]=t.position0[1],o[2]=t.position0[2],o[3]=t.position1[0],o[4]=t.position1[1],o[5]=t.position1[2],u[0]=5381;for(let e=0;e<m.length;e++)u[0]=31*u[0]+m[e];return u[0]}function f(t){const o=c;o[0]=h(t.position0[0]),o[1]=h(t.position0[1]),o[2]=h(t.position0[2]),o[3]=h(t.position1[0]),o[4]=h(t.position1[1]),o[5]=h(t.position1[2]),u[0]=5381;for(let e=0;e<m.length;e++)u[0]=31*u[0]+m[e];return u[0]}const l=1e4;function h(t){return Math.round(t*l)/l}function g(t,o){const e=t<0?-1:1;return Math.abs(t)**o*e}class d{constructor(){this.commonWriter=new a}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return r.createBuffer(t)}write(t,o,i){this.commonWriter.write(t,o,i),e(v,i.faceNormal0,i.faceNormal1),n(v,v),t.normal.setVec(o,v)}trim(t,o){return this.commonWriter.trim(t,o)}}d.Layout=r,d.glLayout=i(r,{divisor:1});class w{constructor(){this.commonWriter=new a}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return s.createBuffer(t)}write(t,o,e){this.commonWriter.write(t,o,e),t.normalA.setVec(o,e.faceNormal0),t.normalB.setVec(o,e.faceNormal1)}trim(t,o){return this.commonWriter.trim(t,o)}}w.Layout=s,w.glLayout=i(s,{divisor:1});const v=o(),y=new t;export{a as CommonBufferWriter,d as RegularEdgeBufferWriter,w as SilhouetteEdgeBufferWriter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{nextHighestPowerOfTwo as t}from\"../../../core/mathUtils.js\";function n(n,f,i){var u;const c=n.byteLength/(4*f),s=new Uint32Array(n,0,c*f);let a=new Uint32Array(c);const h=null!=(u=null==i?void 0:i.minReduction)?u:0,d=(null==i?void 0:i.originalIndices)||null,g=d?d.length:0,y=(null==i?void 0:i.componentOffsets)||null;let U=0;if(y)for(let t=0;t<y.length-1;t++){const n=y[t+1]-y[t];n>U&&(U=n)}else U=c;const w=Math.floor(1.1*U)+1;(null==o||o.length<2*w)&&(o=new Uint32Array(t(2*w)));for(let t=0;t<2*w;t++)o[t]=0;let A=0;const m=!!y&&!!d,b=m?g:c,p=m?new Uint32Array(g):null,v=1.96;let M=0!==h?Math.ceil(4*v*v/(h*h)*h*(1-h)):b,q=1,x=y?y[1]:b;for(let t=0;t<b;t++){if(t===M){const n=1-A/t;if(n+v*Math.sqrt(n*(1-n)/t)<h)return null;M*=2}if(t===x){for(let t=0;t<2*w;t++)o[t]=0;if(d)for(let t=y[q-1];t<y[q];t++)p[t]=a[d[t]];x=y[++q]}const n=m?d[t]:t,l=n*f,i=r(s,l,f);let u=i%w,c=A;for(;0!==o[2*u+1];){if(o[2*u]===i){const t=o[2*u+1]-1;if(e(s,l,t*f,f)){c=a[t];break}}u++,u>=w&&(u-=w)}c===A&&(o[2*u]=i,o[2*u+1]=n+1,A++),a[n]=c}if(0!==h&&1-A/c<h)return null;if(m){for(let t=y[q-1];t<p.length;t++)p[t]=a[d[t]];a=p}const j=new Uint32Array(f*A);A=0;for(let t=0;t<b;t++)if(a[t]===A){l(s,(m?d[t]:t)*f,j,A*f,f),A++}if(d&&!m){const t=new Uint32Array(g);for(let n=0;n<t.length;n++)t[n]=a[d[n]];a=t}return{buffer:j.buffer,indices:a,uniqueCount:A}}function e(t,n,e,l){for(let r=0;r<l;r++)if(t[n+r]!==t[e+r])return!1;return!0}function l(t,n,e,l,r){for(let o=0;o<r;o++)e[l+o]=t[n+o]}function r(t,n,e){let l=0;for(let r=0;r<e;r++)l=t[n+r]+l|0,l=l+(l<<11)+(l>>>2)|0;return l>>>0}let o=null;export default n;export{n as deduplicate};\n"],"sourceRoot":"webpack:///"}