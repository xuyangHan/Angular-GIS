(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{"9fxc":function(e,t,r){"use strict";r.r(t);var i,s=r("pO5D"),n=(r("wSAH"),r("srIe")),l=(r("6S2I"),r("zqDF")),a=r("WbKI"),o=r("r88o"),u=r("04ZG"),b=r("Cduq"),c=r("4EHJ"),h=(r("ju1D"),r("9AIY"),r("WZb1")),y=r("OvF4"),p=(r("4GrV"),r("LE9a")),d=r("TRCY"),O=r("pqNC"),j=r("5pQd"),f=r("IvSi"),v=r("uRH/"),m=r("mXvl"),g=r("DbUH"),S=r("jhcG"),M=r("WmKv"),w=r("BGvB"),x=r("s7YA"),E=r("Gj5k"),_=r("ag7Y"),I=r("zm0L"),k=r("bV/r"),F=r("N5XI");let L=i=class extends(I.a.EventedMixin(Object(_.b)(k.a))){constructor(){super(...arguments),this._sublayersHandles=null,this.description=null,this.id=null,this.networkLink=null,this.title=null,this.sourceJSON=null,this.fullExtent=null}initialize(){Object(F.j)(this,"networkLink").then(()=>Object(F.l)(this,"visible")).then(()=>this.load())}load(e){if(!this.networkLink)return;if(this.networkLink.viewFormat)return;const t=Object(n.i)(e)?e.signal:null,r=this._fetchService(this._get("networkLink").href,t).then(e=>{const t=Object(w.a)(e.sublayers);this.fullExtent=y.a.fromJSON(t),this.sourceJSON=e;const r=Object(l.m)(p.a.ofType(i),Object(w.e)(i,e));this.sublayers?this.sublayers.addMany(r):this.sublayers=r,this.layer.emit("sublayer-update"),this.layer&&this.layer.notifyChange("visibleSublayers")});return this.addResolvingPromise(r),Promise.resolve(this)}set sublayers(e){const t=this._get("sublayers");t&&(t.forEach(e=>{e.parent=null,e.layer=null}),this._sublayersHandles.forEach(e=>e.remove()),this._sublayersHandles=null),e&&(e.forEach(e=>{e.parent=this,e.layer=this.layer}),this._sublayersHandles=[e.on("after-add",({item:e})=>{e.parent=this,e.layer=this.layer}),e.on("after-remove",({item:e})=>{e.parent=null,e.layer=null})]),this._set("sublayers",e)}castSublayers(e){return Object(l.m)(p.a.ofType(i),e)}get visible(){return this._get("visible")}set visible(e){this._get("visible")!==e&&(this._set("visible",e),this.layer&&this.layer.notifyChange("visibleSublayers"))}readVisible(e,t){return!!t.visibility}set layer(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(t=>t.layer=e)}_fetchService(e,t){return Object(w.b)(e,this.layer.outSpatialReference,this.layer.refreshInterval,t).then(e=>Object(w.d)(e.data))}};Object(s.a)([Object(a.b)()],L.prototype,"description",void 0),Object(s.a)([Object(a.b)()],L.prototype,"id",void 0),Object(s.a)([Object(a.b)({readOnly:!0,value:null})],L.prototype,"networkLink",void 0),Object(s.a)([Object(a.b)({json:{write:{allowNull:!0}}})],L.prototype,"parent",void 0),Object(s.a)([Object(a.b)({value:null,json:{write:{allowNull:!0}}})],L.prototype,"sublayers",null),Object(s.a)([Object(E.a)("sublayers")],L.prototype,"castSublayers",null),Object(s.a)([Object(a.b)({value:null,json:{read:{source:"name",reader:e=>Object(x.d)(e)}}})],L.prototype,"title",void 0),Object(s.a)([Object(a.b)({value:!0})],L.prototype,"visible",null),Object(s.a)([Object(o.a)("visible",["visibility"])],L.prototype,"readVisible",null),Object(s.a)([Object(a.b)()],L.prototype,"sourceJSON",void 0),Object(s.a)([Object(a.b)({value:null})],L.prototype,"layer",null),Object(s.a)([Object(a.b)({type:y.a})],L.prototype,"fullExtent",void 0),L=i=Object(s.a)([Object(u.a)("esri.layers.support.KMLSublayer")],L);var N=L;const T=["kml","xml"];let C=class extends(Object(m.a)(Object(S.a)(Object(M.a)(Object(v.a)(Object(g.a)(Object(j.a)(O.a))))))){constructor(...e){super(...e),this._visibleFolders=[],this.allSublayers=new d.a({root:this,rootCollectionNames:["sublayers"],getChildrenFunction:e=>e.sublayers}),this.outSpatialReference=h.a.WGS84,this.path=null,this.legendEnabled=!1,this.operationalLayerType="KML",this.sublayers=null,this.type="kml",this.url=null}initialize(){this.watch("sublayers",(e,t)=>{t&&t.forEach(e=>{e.parent=null,e.layer=null}),e&&e.forEach(e=>{e.parent=this,e.layer=this})},!0),this.on("sublayer-update",()=>this.notifyChange("fullExtent"))}normalizeCtorArgs(e,t){return"string"==typeof e?{url:e,...t}:e}readSublayersFromItemOrWebMap(e,t){this._visibleFolders=t.visibleFolders}readSublayers(e,t,r){return Object(w.e)(N,t,r,this._visibleFolders)}writeSublayers(e,t){const r=[],i=e.toArray();for(;i.length;){const e=i[0];e.networkLink||(e.visible&&r.push(e.id),e.sublayers&&i.push(...e.sublayers.toArray())),i.shift()}t.visibleFolders=r}get title(){const e=this._get("title");return e&&"defaults"!==this.originOf("title")?e:this.url?Object(c.k)(this.url,T)||"KML":e||""}set title(e){this._set("title",e)}get visibleSublayers(){const e=this.sublayers,t=[],r=e=>{e.visible&&(t.push(e),e.sublayers&&e.sublayers.forEach(r))};return e&&e.forEach(r),t}get fullExtent(){return this._recomputeFullExtent()}load(e){const t=Object(n.i)(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["KML"]},e).then(()=>this._fetchService(t))),Promise.resolve(this)}destroy(){super.destroy(),this.allSublayers.destroy()}async _fetchService(e){const t=await Promise.resolve().then(()=>this.resourceInfo?{ssl:!1,data:this.resourceInfo}:Object(w.b)(this.url,this.outSpatialReference,this.refreshInterval,e)),r=Object(w.d)(t.data);r&&this.read(r,{origin:"service"})}_recomputeFullExtent(){let e=null;this.extent&&(e=this.extent.clone());const t=r=>{if(r.sublayers)for(const i of r.sublayers.items)t(i),i.visible&&i.fullExtent&&(e?e.union(i.fullExtent):e=i.fullExtent.clone())};return t(this),e}};Object(s.a)([Object(a.b)({readOnly:!0})],C.prototype,"allSublayers",void 0),Object(s.a)([Object(a.b)({type:h.a})],C.prototype,"outSpatialReference",void 0),Object(s.a)([Object(a.b)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],C.prototype,"path",void 0),Object(s.a)([Object(a.b)({readOnly:!0,json:{read:!1,write:!1}})],C.prototype,"legendEnabled",void 0),Object(s.a)([Object(a.b)({type:["show","hide","hide-children"]})],C.prototype,"listMode",void 0),Object(s.a)([Object(a.b)({type:["KML"]})],C.prototype,"operationalLayerType",void 0),Object(s.a)([Object(a.b)({})],C.prototype,"resourceInfo",void 0),Object(s.a)([Object(a.b)({type:p.a.ofType(N),json:{write:{ignoreOrigin:!0}}})],C.prototype,"sublayers",void 0),Object(s.a)([Object(o.a)(["web-map","portal-item"],"sublayers",["visibleFolders"])],C.prototype,"readSublayersFromItemOrWebMap",null),Object(s.a)([Object(o.a)("service","sublayers",["sublayers"])],C.prototype,"readSublayers",null),Object(s.a)([Object(b.a)("sublayers")],C.prototype,"writeSublayers",null),Object(s.a)([Object(a.b)({readOnly:!0,json:{read:!1}})],C.prototype,"type",void 0),Object(s.a)([Object(a.b)({json:{origins:{"web-map":{read:{source:"title"}}},write:{ignoreOrigin:!0}}})],C.prototype,"title",null),Object(s.a)([Object(a.b)(f.n)],C.prototype,"url",void 0),Object(s.a)([Object(a.b)({readOnly:!0})],C.prototype,"visibleSublayers",null),Object(s.a)([Object(a.b)({type:y.a})],C.prototype,"extent",void 0),Object(s.a)([Object(a.b)()],C.prototype,"fullExtent",null),C=Object(s.a)([Object(u.a)("esri.layers.KMLLayer")],C),t.default=C},QmHG:function(e,t,r){"use strict";r.d(t,"a",function(){return j}),r.d(t,"b",function(){return s}),r.d(t,"c",function(){return y}),r.d(t,"d",function(){return O}),r.d(t,"e",function(){return l}),r.d(t,"f",function(){return o}),r.d(t,"g",function(){return a}),r.d(t,"h",function(){return p}),r.d(t,"i",function(){return n}),r.d(t,"j",function(){return h}),r.d(t,"k",function(){return c}),r.d(t,"l",function(){return b}),r.d(t,"m",function(){return u});var i=r("srIe");function s(e=f){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function n(e,t,r,i,n,l,a=s()){return a[0]=e,a[1]=t,a[2]=r,a[3]=i,a[4]=n,a[5]=l,a}function l(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function a(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function o(e,t,r){const i=t.length;let s=e[0],n=e[1],l=e[2],a=e[3],o=e[4],u=e[5];if(r)for(let b=0;b<i;b++){const e=t[b];s=Math.min(s,e[0]),n=Math.min(n,e[1]),l=Math.min(l,e[2]),a=Math.max(a,e[0]),o=Math.max(o,e[1]),u=Math.max(u,e[2])}else for(let b=0;b<i;b++){const e=t[b];s=Math.min(s,e[0]),n=Math.min(n,e[1]),a=Math.max(a,e[0]),o=Math.max(o,e[1])}e[0]=s,e[1]=n,e[2]=l,e[3]=a,e[4]=o,e[5]=u}function u(e,t=[0,0,0]){return t[0]=function(e){return e[0]>=e[3]?0:e[3]-e[0]}(e),t[1]=function(e){return e[1]>=e[4]?0:e[4]-e[1]}(e),t[2]=function(e){return e[2]>=e[5]?0:e[5]-e[2]}(e),t}function b(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function c(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function h(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function y(e){return e?h(e,j):s(j)}function p(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function d(e){return 6===e.length}function O(e,t,r){if(Object(i.h)(e)||Object(i.h)(t))return e===t;if(!d(e)||!d(t))return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}r("OvF4"),r("kYAx");const j=[1/0,1/0,1/0,-1/0,-1/0,-1/0],f=[0,0,0,0,0,0];s()}}]);