(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{InNl:function(t,e,n){"use strict";n.r(e),n.d(e,"work",function(){return K}),n.d(e,"wrappedWork",function(){return $});var o=n("OKTS");function r(t,e,n,o){for(let r=0;r<o;r++)if(t[e+r]!==t[n+r])return!1;return!0}function i(t,e,n,o,r){for(let i=0;i<r;i++)n[o+i]=t[e+i]}function s(t,e,n){let o=0;for(let r=0;r<n;r++)o=t[e+r]+o|0,o=o+(o<<11)+(o>>>2)|0;return o>>>0}let c=null;const a={divisor:0};function l(t,e={}){e={...a,...e};const n=t.stride;return t.fieldNames.filter(e=>{const n=t.fields.get(e).optional;return!(n&&n.glPadding)}).map(o=>{const r=t.fields.get(o),i=r.constructor.ElementCount,s=function(t){const e=f[t];if(e)return e;throw new Error("BufferType not supported in WebGL")}(r.constructor.ElementType);return{name:o,stride:n,count:i,type:s,offset:r.offset,normalized:!(!r.optional||!r.optional.glNormalized),divisor:e.divisor}})}const f={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126};var u=n("/ADo");const d=Object(u.a)().vec3f("position").u16("componentIndex").u16("u16padding"),g=(l(Object(u.a)().vec2u8("sideness")),Object(u.a)().vec3f("position0").vec3f("position1").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("u8padding",{glPadding:!0}).u16("u16padding",{glPadding:!0})),p=g.clone().vec3f("normal"),h=g.clone().vec3f("normalA").vec3f("normalB");var m=n("iA3P"),b=n("Cy1f"),w=n("5DEt");class v{updateSettings(t){this.settings=t,this.edgeHashFunction=t.reducedPrecision?I:j}write(t,e,n){const o=this.edgeHashFunction(n);U.seed=o;const r=U.getIntRange(0,255),i=U.getIntRange(0,this.settings.variants-1),s=U.getFloat(),c=255*(.5*function(t,e){const n=t<0?-1:1;return Math.abs(t)**1.2*n}(-(1-Math.min(s/.7,1))+Math.max(0,s-.7)/(1-.7))+.5);t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex),t.variantOffset.set(e,r),t.variantStroke.set(e,i),t.variantExtension.set(e,c)}trim(t,e){return t.slice(0,e)}}const y=new Float32Array(6),O=new Uint32Array(y.buffer),A=new Uint32Array(1);function j(t){const e=y;e[0]=t.position0[0],e[1]=t.position0[1],e[2]=t.position0[2],e[3]=t.position1[0],e[4]=t.position1[1],e[5]=t.position1[2],A[0]=5381;for(let n=0;n<O.length;n++)A[0]=31*A[0]+O[n];return A[0]}function I(t){const e=y;e[0]=N(t.position0[0]),e[1]=N(t.position0[1]),e[2]=N(t.position0[2]),e[3]=N(t.position1[0]),e[4]=N(t.position1[1]),e[5]=N(t.position1[2]),A[0]=5381;for(let n=0;n<O.length;n++)A[0]=31*A[0]+O[n];return A[0]}function N(t){return Math.round(1e4*t)/1e4}class E{constructor(){this.commonWriter=new v}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return p.createBuffer(t)}write(t,e,n){this.commonWriter.write(t,e,n),Object(w.c)(S,n.faceNormal0,n.faceNormal1),Object(w.o)(S,S),t.normal.setVec(e,S)}trim(t,e){return this.commonWriter.trim(t,e)}}E.Layout=p,E.glLayout=l(p,{divisor:1});class L{constructor(){this.commonWriter=new v}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return h.createBuffer(t)}write(t,e,n){this.commonWriter.write(t,e,n),t.normalA.setVec(e,n.faceNormal0),t.normalB.setVec(e,n.faceNormal1)}trim(t,e){return this.commonWriter.trim(t,e)}}L.Layout=h,L.glLayout=l(h,{divisor:1});const S=Object(b.e)(),U=new m.a;var V=n("VeZB");function x(t,e){return e.push(t.buffer),{buffer:t.buffer,layout:D(t.layout)}}function D(t){const e=new Array;return t.fields.forEach((t,n)=>{const o={...t,constructor:B(t.constructor)};e.push([n,o])}),{stride:t.stride,fields:e,fieldNames:t.fieldNames}}const k=[V.a,V.m,V.u,V.C,V.f,V.h,V.b,V.n,V.v,V.D,V.g,V.i,V.l,V.t,V.B,V.J,V.j,V.r,V.z,V.H,V.k,V.s,V.A,V.I,V.e,V.q,V.y,V.G,V.c,V.o,V.w,V.E,V.d,V.p,V.x,V.F];function B(t){return`${t.ElementType}_${t.ElementCount}`}const M=new Map;function W(t,e,n){const o=e/3,r=new Uint32Array(n+1),i=new Uint32Array(n+1),s=(t,e)=>{t<e?r[t+1]++:i[e+1]++};for(let b=0;b<o;b++){const e=t[3*b],n=t[3*b+1],o=t[3*b+2];s(e,n),s(n,o),s(o,e)}let c=0,a=0;for(let b=0;b<n;b++){const t=r[b+1],e=i[b+1];r[b+1]=c,i[b+1]=a,c+=t,a+=e}const l=new Uint32Array(6*o),f=r[n],u=(t,e,n)=>{if(t<e){const o=r[t+1]++;l[2*o]=e,l[2*o+1]=n}else{const o=i[e+1]++;l[2*f+2*o]=t,l[2*f+2*o+1]=n}};for(let b=0;b<o;b++){const e=t[3*b],n=t[3*b+1],o=t[3*b+2];u(e,n,b),u(n,o,b),u(o,e,b)}const d=(t,e)=>{const n=2*t,o=e-t;for(let r=1;r<o;r++){const t=l[n+2*r],e=l[n+2*r+1];let o=r-1;for(;o>=0&&l[n+2*o]>t;o--)l[n+2*o+2]=l[n+2*o],l[n+2*o+3]=l[n+2*o+1];l[n+2*o+2]=t,l[n+2*o+3]=e}};for(let b=0;b<n;b++)d(r[b],r[b+1]),d(f+i[b],f+i[b+1]);const g=new Int32Array(3*o),p=(e,n)=>e===t[3*n]?0:e===t[3*n+1]?1:e===t[3*n+2]?2:-1,h=(t,e)=>{const n=p(t,e);g[3*e+n]=-1},m=(t,e,n,o)=>{const r=p(t,e);g[3*e+r]=o;const i=p(n,o);g[3*o+i]=e};for(let b=0;b<n;b++){let t=r[b];const e=r[b+1];let n=i[b];const o=i[b+1];for(;t<e&&n<o;){const e=l[2*t],o=l[2*f+2*n];e===o?(m(b,l[2*t+1],o,l[2*f+2*n+1]),t++,n++):e<o?(h(b,l[2*t+1]),t++):(h(o,l[2*f+2*n+1]),n++)}for(;t<e;)h(b,l[2*t+1]),t++;for(;n<o;)h(l[2*f+2*n],l[2*f+2*n+1]),n++}return g}k.forEach(t=>M.set(B(t),t));var F=n("ohva"),P=n("tQ+6"),C=n("aAs6");const T=-1;function z(t,e){return t.cosAngle<e}function q(t,e){return t.cosAngle>e}function H(t,e){const n=Object(o.a)(t.cosAngle),r=J.fwd,i=J.ortho;return Object(C.c)(r,t.position1,t.position0),n*(Object(w.e)(Object(w.d)(i,t.faceNormal0,t.faceNormal1),r)>0?-1:1)>e}const J={edge:{position0:Object(b.e)(),position1:Object(b.e)(),faceNormal0:Object(b.e)(),faceNormal1:Object(b.e)(),componentIndex:0,cosAngle:0},ortho:Object(b.e)(),fwd:Object(b.e)()},R={v0:Object(b.e)(),v1:Object(b.e)(),v2:Object(b.e)()},G={anglePlanar:4,angleSignificantEdge:35};async function $(t){const e=function(t){return{data:d.createView(t.dataBuffer),indices:"Uint32Array"===t.indicesType?new Uint32Array(t.indicesBuffer):"Uint16Array"===t.indicesType?new Uint16Array(t.indicesBuffer):void 0,indicesLength:t.indicesLength,writerSettings:t.writerSettings,skipDeduplicate:t.skipDeduplicate}}(t),n=K(e),o=[e.data.buffer];return{result:Q(n,o),transferList:o}}function K(t){const e=function(t,e,n,a){if(e)return{faces:n,facesLength:a,neighbors:W(n,a,t.count),vertices:t};const l=function(t,e,n){var a;const l=t.byteLength/(4*e),f=new Uint32Array(t,0,l*e);let u=new Uint32Array(l);const d=null!=(a=null==n?void 0:n.minReduction)?a:0,g=(null==n?void 0:n.originalIndices)||null,p=g?g.length:0,h=(null==n?void 0:n.componentOffsets)||null;let m=0;if(h)for(let o=0;o<h.length-1;o++){const t=h[o+1]-h[o];t>m&&(m=t)}else m=l;const b=Math.floor(1.1*m)+1;(null==c||c.length<2*b)&&(c=new Uint32Array(Object(o.i)(2*b)));for(let o=0;o<2*b;o++)c[o]=0;let w=0;const v=!!h&&!!g,y=v?p:l,O=v?new Uint32Array(p):null,A=1.96;let j=0!==d?Math.ceil(4*A*A/(d*d)*d*(1-d)):y,I=1,N=h?h[1]:y;for(let o=0;o<y;o++){if(o===j){const t=1-w/o;if(t+A*Math.sqrt(t*(1-t)/o)<d)return null;j*=2}if(o===N){for(let t=0;t<2*b;t++)c[t]=0;if(g)for(let t=h[I-1];t<h[I];t++)O[t]=u[g[t]];N=h[++I]}const t=v?g[o]:o,n=t*e,i=s(f,n,e);let a=i%b,l=w;for(;0!==c[2*a+1];){if(c[2*a]===i){const t=c[2*a+1]-1;if(r(f,n,t*e,e)){l=u[t];break}}a++,a>=b&&(a-=b)}l===w&&(c[2*a]=i,c[2*a+1]=t+1,w++),u[t]=l}if(0!==d&&1-w/l<d)return null;if(v){for(let t=h[I-1];t<O.length;t++)O[t]=u[g[t]];u=O}const E=new Uint32Array(e*w);w=0;for(let o=0;o<y;o++)u[o]===w&&(i(f,(v?g[o]:o)*e,E,w*e,e),w++);if(g&&!v){const t=new Uint32Array(p);for(let e=0;e<t.length;e++)t[e]=u[g[e]];u=t}return{buffer:E.buffer,indices:u,uniqueCount:w}}(t.buffer,t.stride/4,{originalIndices:n,originalIndicesLength:a}),f=W(l.indices,a,l.uniqueCount);return{faces:l.indices,facesLength:l.indices.length,neighbors:f,vertices:d.createView(l.buffer)}}(t.data,t.skipDeduplicate,t.indices,t.indicesLength);return Z.updateSettings(t.writerSettings),_.updateSettings(t.writerSettings),function(t,e,n,r=G){const i=t.vertices.position,s=t.vertices.componentIndex,c=Object(o.d)(r.anglePlanar),a=Object(o.d)(r.angleSignificantEdge),l=Math.cos(a),f=Math.cos(c),u=J.edge,d=u.position0,g=u.position1,p=u.faceNormal0,h=u.faceNormal1,m=function(t){const e=t.faces.length/3,n=t.vertices.position,o=t.faces,r=R.v0,i=R.v1,s=R.v2,c=new Float32Array(3*e);for(let a=0;a<e;a++){const t=o[3*a+1],e=o[3*a+2];n.getVec(o[3*a+0],r),n.getVec(t,i),n.getVec(e,s),Object(w.g)(i,i,r),Object(w.g)(s,s,r),Object(w.d)(r,i,s),Object(w.o)(r,r),c[3*a+0]=r[0],c[3*a+1]=r[1],c[3*a+2]=r[2]}return c}(t),b=function(t){const e=t.faces.length/3,n=t.faces,o=t.neighbors;let r=0;for(let c=0;c<e;c++){const t=n[3*c+0],e=n[3*c+1],i=n[3*c+2];r+=o[3*c+0]===T||t<e?1:0,r+=o[3*c+1]===T||e<i?1:0,r+=o[3*c+2]===T||i<t?1:0}const i=new Int32Array(4*r);let s=0;for(let c=0;c<e;c++){const t=o[3*c+0],e=o[3*c+1],r=o[3*c+2],a=n[3*c+0],l=n[3*c+1],f=n[3*c+2];(t===T||a<l)&&(i[s++]=a,i[s++]=l,i[s++]=c,i[s++]=t),(e===T||l<f)&&(i[s++]=l,i[s++]=f,i[s++]=c,i[s++]=e),(r===T||f<a)&&(i[s++]=f,i[s++]=a,i[s++]=c,i[s++]=r)}return i}(t),v=b.length/4,y=e.allocate(v);let O=0;const A=n.allocate(v);let j=0,I=0,N=0;const E=Object(P.h)(0,v),L=new Float32Array(v);Object(F.b)(L,(t,e,n)=>{i.getVec(b[4*e+0],d),i.getVec(b[4*e+1],g),n[e]=Object(w.l)(d,g)}),E.sort((t,e)=>L[e]-L[t]);const S=new Array,U=new Array;for(let o=0;o<v;o++){const t=E[o],r=L[t],a=b[4*t+0],v=b[4*t+1],V=b[4*t+2],x=b[4*t+3],D=x===T;if(i.getVec(a,d),i.getVec(v,g),D)Object(w.r)(p,m[3*V+0],m[3*V+1],m[3*V+2]),Object(w.h)(h,p),u.componentIndex=s.get(a),u.cosAngle=Object(w.e)(p,h);else{if(Object(w.r)(p,m[3*V+0],m[3*V+1],m[3*V+2]),Object(w.r)(h,m[3*x+0],m[3*x+1],m[3*x+2]),u.componentIndex=s.get(a),u.cosAngle=Object(w.e)(p,h),q(u,f))continue;u.cosAngle<-.9999&&Object(w.h)(h,p)}I+=r,N++,D||z(u,l)?(e.write(y,O++,u),S.push(r)):H(u,c)&&(n.write(A,j++,u),U.push(r))}const V=new Float32Array(S.reverse()),x=new Float32Array(U.reverse());return{regular:{instancesData:e.trim(y,O),lodInfo:{lengths:V}},silhouette:{instancesData:n.trim(A,j),lodInfo:{lengths:x}},averageEdgeLength:I/N}}(e,Z,_)}function Q(t,e){return e.push(t.regular.lodInfo.lengths.buffer),e.push(t.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:x(t.regular.instancesData,e),lodInfo:{lengths:t.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:x(t.silhouette.instancesData,e),lodInfo:{lengths:t.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:t.averageEdgeLength}}const Z=new E,_=new L}}]);