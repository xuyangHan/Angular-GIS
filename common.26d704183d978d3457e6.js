(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/ADo":function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("VeZB"),i=r("grla");class s{constructor(e,t){this.layout=e,this.buffer="number"==typeof t?new ArrayBuffer(t*e.stride):t;for(const r of e.fieldNames){const t=e.fields.get(r);this[r]=new t.constructor(this.buffer,t.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(e,t){const r=this[e];return r&&r.elementCount===t.ElementCount&&r.elementType===t.ElementType?r:null}slice(e,t){return new s(this.layout,this.buffer.slice(e*this.stride,t*this.stride))}copyFrom(e,t,r,n){const i=this.stride;if(i%4==0){const s=new Uint32Array(e.buffer,t*i,n*i/4);new Uint32Array(this.buffer,r*i,n*i/4).set(s)}else{const s=new Uint8Array(e.buffer,t*i,n*i);new Uint8Array(this.buffer,r*i,n*i).set(s)}}}class a{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(e,t){return this.appendField(e,n.m,t),this}vec2f64(e,t){return this.appendField(e,n.n,t),this}vec3f(e,t){return this.appendField(e,n.u,t),this}vec3f64(e,t){return this.appendField(e,n.v,t),this}vec4f(e,t){return this.appendField(e,n.C,t),this}vec4f64(e,t){return this.appendField(e,n.D,t),this}mat3f(e,t){return this.appendField(e,n.f,t),this}mat3f64(e,t){return this.appendField(e,n.g,t),this}mat4f(e,t){return this.appendField(e,n.h,t),this}mat4f64(e,t){return this.appendField(e,n.i,t),this}vec4u8(e,t){return this.appendField(e,n.J,t),this}f32(e,t){return this.appendField(e,n.a,t),this}f64(e,t){return this.appendField(e,n.b,t),this}u8(e,t){return this.appendField(e,n.l,t),this}u16(e,t){return this.appendField(e,n.j,t),this}i8(e,t){return this.appendField(e,n.e,t),this}vec2i8(e,t){return this.appendField(e,n.q,t),this}vec2i16(e,t){return this.appendField(e,n.o,t),this}vec2u8(e,t){return this.appendField(e,n.t,t),this}vec4u16(e,t){return this.appendField(e,n.H,t),this}u32(e,t){return this.appendField(e,n.k,t),this}appendField(e,t,r){const n=t.ElementCount*Object(i.a)(t.ElementType);this.fields.set(e,{size:n,constructor:t,offset:this.stride,optional:r}),this.stride+=n,this.fieldNames.push(e)}alignTo(e){return this.stride=Math.floor((this.stride+e-1)/e)*e,this}hasField(e){return this.fieldNames.indexOf(e)>=0}createBuffer(e){return new s(this,e)}createView(e){return new s(this,e)}clone(){const e=new a;return e.stride=this.stride,e.fields=new Map,this.fields.forEach((t,r)=>e.fields.set(r,t)),e.fieldNames=this.fieldNames.slice(),e.BufferType=this.BufferType,e}}function o(){return new a}},"1Ana":function(e,t,r){"use strict";r.d(t,"a",function(){return m});var n=r("pO5D"),i=(r("wSAH"),r("6S2I")),s=(r("zqDF"),r("TDcG")),a=r("WbKI"),o=r("04ZG"),l=r("zlDU"),c=(r("4EHJ"),r("ju1D"),r("ku/q")),u=(r("9AIY"),r("LE9a")),d=r("TRCY"),h=r("6dDx"),p=r("Ilhi");const f=i.a.getLogger("esri.layers.TileLayer"),y=u.a.ofType(h.a);function b(e,t){e&&e.forEach(e=>{t(e),e.sublayers&&e.sublayers.length&&b(e.sublayers,t)})}const m=e=>{let t=class extends e{constructor(...e){super(...e),this.allSublayers=new d.a({root:this,rootCollectionNames:["sublayers"],getChildrenFunction:e=>e.sublayers}),this.sublayersSourceJSON={2:{},3:{},4:{},5:{}},this.watch("sublayers",(e,t)=>this._handleSublayersChange(e,t),!0)}readSublayers(e,t){if(!t||!e)return;const{sublayersSourceJSON:r}=this,n=Object(c.d)(t.origin);if(n<2)return;if(r[n]={context:t,visibleLayers:e.visibleLayers||r[n].visibleLayers,layers:e.layers||r[n].layers},n>2)return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:i,origin:a}=this.createSublayersForOrigin("web-document"),o=Object(s.a)(this);o.setDefaultOrigin(a),this._set("sublayers",new y(i)),o.setDefaultOrigin("user")}findSublayerById(e){return this.allSublayers.find(t=>t.id===e)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(e){const t=Object(c.d)("web-document"===e?"web-map":e);let r=2,n=this.sublayersSourceJSON[2].layers,i=this.sublayersSourceJSON[2].context,s=null;const a=[3,4,5].filter(e=>e<=t);for(const c of a){const e=this.sublayersSourceJSON[c];Object(p.b)(e.layers)&&(r=c,n=e.layers,i=e.context,e.visibleLayers&&(s={visibleLayers:e.visibleLayers,context:e.context}))}const o=[3,4,5].filter(e=>e>r&&e<=t);let l=null;for(const c of o){const{layers:e,visibleLayers:t,context:r}=this.sublayersSourceJSON[c];e&&(l={layers:e,context:r}),t&&(s={visibleLayers:t,context:r})}const u=function(e,t){const r=[],n={};return e?(e.forEach(e=>{const i=new h.a;if(i.read(e,t),n[i.id]=i,null!=e.parentLayerId&&-1!==e.parentLayerId){const t=n[e.parentLayerId];t.sublayers||(t.sublayers=[]),t.sublayers.unshift(i)}else r.unshift(i)}),r):r}(n,i),d=new Map,f=new Set;if(l)for(const c of l.layers)d.set(c.id,c);if(s)for(const c of s.visibleLayers)f.add(c);return b(u,e=>{l&&e.read(d.get(e.id),l.context),s&&e.read({defaultVisibility:f.has(e.id)},s.context)}),{origin:Object(c.b)(r),sublayers:new y({items:u})}}read(e,t){super.read(e,t),this.readSublayers(e,t)}_handleSublayersChange(e,t){t&&(t.forEach(e=>{e.parent=null,e.layer=null}),this.handles.remove("sublayers-owner")),e&&(e.forEach(e=>{e.parent=this,e.layer=this}),this.handles.add([e.on("after-add",({item:e})=>{e.parent=this,e.layer=this}),e.on("after-remove",({item:e})=>{e.parent=null,e.layer=null})],"sublayers-owner"),"tile"===this.type&&this.handles.add(e.on("before-changes",e=>{f.error(new l.a("tilelayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),e.preventDefault()}),"sublayers-owner"))}};return Object(n.a)([Object(a.b)({readOnly:!0})],t.prototype,"allSublayers",void 0),Object(n.a)([Object(a.b)({readOnly:!0,type:u.a.ofType(h.a)})],t.prototype,"serviceSublayers",void 0),Object(n.a)([Object(a.b)({value:null,type:y,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),Object(n.a)([Object(a.b)({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=Object(n.a)([Object(o.a)("esri.layers.mixins.SublayersOwner")],t),t}},"1agI":function(e,t,r){"use strict";r.d(t,"a",function(){return c}),r.d(t,"b",function(){return u}),r.d(t,"c",function(){return l}),r.d(t,"d",function(){return a}),r.d(t,"e",function(){return o});var n=r("OKTS"),i=r("feGD"),s=r("jIHu");const a=0,o=1,l=2;class c{constructor(e,t){this.width=e,this.height=t;const r=Math.ceil(e/1),n=Math.ceil(t/1);this._cols=r,this._rows=n,this._cells=i.a.create(r*n)}insertMetrics(e){const t=this._hasCollision(e);return t===a&&this._markMetrics(e),t}getCellId(e,t){return e+t*this._cols}has(e){return this._cells.has(e)}hasRange(e,t){return this._cells.hasRange(e,t)}set(e){this._cells.set(e)}setRange(e,t){this._cells.setRange(e,t)}_hasCollision(e){const t=e.id;let r=0,n=0;e.save();do{const t=e.boundsCount;r+=t;for(let r=0;r<t;r++){const t=e.boundsComputedAnchorX(r),i=e.boundsComputedAnchorY(r),s=e.boundsWidth(r)+2,a=e.boundsHeight(r)+2;switch(this._collide(t,i,s,a)){case l:return l;case o:n++}}}while(e.peekId()===t&&e.next());return e.restore(),r===n?o:a}_collide(e,t,r,i){const s=e-r/2,c=e+r/2,u=t-i/2,d=t+i/2;if(c<0||d<0||s>this.width||u>this.height)return o;const h=Object(n.c)(Math.floor(s/1),0,this._cols),p=Object(n.c)(Math.floor(u/1),0,this._rows),f=Object(n.c)(Math.ceil(c/1),0,this._cols),y=Object(n.c)(Math.ceil(d/1),0,this._rows);for(let n=p;n<=y;n++)for(let e=h;e<=f;e++){const t=this.getCellId(e,n);if(this.has(t))return l}return a}_mark(e,t,r,i){const s=e-r/2,a=e+r/2,o=t-i/2,l=t+i/2,c=Object(n.c)(Math.floor(s/1),0,this._cols),u=Object(n.c)(Math.floor(o/1),0,this._rows),d=Object(n.c)(Math.ceil(a/1),0,this._cols),h=Object(n.c)(Math.ceil(l/1),0,this._rows);for(let n=u;n<=h;n++)for(let e=c;e<=d;e++){const t=this.getCellId(e,n);this.set(t)}return!1}_markMetrics(e){const t=e.id;do{const t=e.boundsCount;for(let r=0;r<t;r++){const t=e.boundsComputedAnchorX(r),n=e.boundsComputedAnchorY(r),i=e.boundsWidth(r)+2,s=e.boundsHeight(r)+2;this._mark(t,n,i,s)}}while(e.peekId()===t&&e.next())}}class u{constructor(e,t=2){this._bucketSize=e,this._rowsLength=s.E/e,this._colsLength=s.E/e,this._elementsPerBucket=t,this._grid=this._initGrid()}checkOverlap(e,t){const r=Math.floor(e/this._bucketSize),n=Math.floor(t/this._bucketSize);return r<0||r>=this._rowsLength||n<0||n>=this._colsLength||this._grid[n*this._colsLength+r]>=this._elementsPerBucket}markUsed(e,t){const r=Math.floor(e/this._bucketSize),n=Math.floor(t/this._bucketSize);this._grid[n*this._colsLength+r]+=1}reset(){this._grid=this._initGrid()}_initGrid(){return new Uint8Array(this._rowsLength*this._colsLength)}}},"2uVf":function(e,t,r){"use strict";function n(){return[1,0,0,0,1,0,0,0,1]}function i(e,t){return new Float64Array(e,t,9)}r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i}),Object.freeze({__proto__:null,create:n,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},fromValues:function(e,t,r,n,i,s,a,o,l){return[e,t,r,n,i,s,a,o,l]},createView:i})},3:function(e,t){},4:function(e,t){},"46M0":function(e,t,r){"use strict";r.d(t,"a",function(){return w}),r.d(t,"b",function(){return v}),r.d(t,"c",function(){return j});var n=r("zlDU"),i=r("k5I3"),s=r("gVKr");function a(e){const t=[];return e.forEach(e=>t.push(e)),t}const o={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function*l(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*c(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const e of t)yield*e}}function u(e){for(;;){const{value:t,done:r}=e.next();if(r)return!1;if(t.length>2)return!0}}function d(e){let t=0;for(let r=0;r<e.length;r++){const n=e[r],i=e[(r+1)%e.length];t+=n[0]*i[1]-i[0]*n[1]}return t<=0}function h(e){const t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]||e.push(t),e}function p(e,t,r){switch(t.type){case"LineString":return function(e,t,r){return b(e,t.coordinates,r),e}(e,t,r);case"MultiLineString":return function(e,t,r){for(const n of t.coordinates)b(e,n,r);return e}(e,t,r);case"MultiPoint":return function(e,t,r){return b(e,t.coordinates,r),e}(e,t,r);case"MultiPolygon":return function(e,t,r){for(const n of t.coordinates){f(e,n[0],r);for(let t=1;t<n.length;t++)y(e,n[t],r)}return e}(e,t,r);case"Point":return function(e,t,r){return g(e,t.coordinates,r),e}(e,t,r);case"Polygon":return function(e,t,r){const n=t.coordinates;f(e,n[0],r);for(let i=1;i<n.length;i++)y(e,n[i],r);return e}(e,t,r)}}function f(e,t,r){const n=h(t);!function(e){return!d(e)}(n)?b(e,n,r):m(e,n,r)}function y(e,t,r){const n=h(t);!function(e){return d(e)}(n)?b(e,n,r):m(e,n,r)}function b(e,t,r){for(const n of t)g(e,n,r);e.lengths.push(t.length)}function m(e,t,r){for(let n=t.length-1;n>=0;n--)g(e,t[n],r);e.lengths.push(t.length)}function g(e,t,r){const[n,i,s]=t;e.coords.push(n,i),r.hasZ&&e.coords.push(s||0)}function O(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function j(e){if(!e)throw new n.a("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new n.a("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const r="string"==typeof t?t:"name"===t.type?t.properties.name:null,i=new RegExp(".*(CRS84H?|4326)$","i");if(!r||!i.test(r))throw new n.a("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function v(e,t={}){const r=l(e),n=[],i=new Set,s=new Set;let d,h=!1,p=Number.NEGATIVE_INFINITY,f=null,y=!1,{geometryType:b=null}=t,m=!1;for(;;){const{value:e,done:t}=r.next();if(t){const e=f&&1===f.length&&f[0]||null;if(e)for(const t of n)t.name===e&&(t.type="esriFieldTypeOID");return{fields:n,geometryType:b,hasZ:h,maxObjectId:Math.max(0,p),objectIdFieldName:e,objectIdFieldType:d,unknownFields:a(s)}}const{geometry:l,properties:g,id:j}=e;if((!l||(b||(b=o[l.type]),o[l.type]===b))&&(h||(h=u(c(l))),y||(y=null!=j,y&&(d=typeof j,"number"===d&&(f=Object.keys(g).filter(e=>g[e]===j)))),y&&"number"===d&&null!=j&&(p=Math.max(p,j),f.length>1?f=f.filter(e=>g[e]===j):1===f.length&&(f=g[f[0]]===j?f:[])),!m&&g)){let e=!0;for(const t in g){if(i.has(t))continue;const r=g[t];if(null==r){e=!1,s.add(t);continue}const a=O(r);"unknown"!==a?(s.delete(t),i.add(t),n.push({name:t,alias:t,type:a})):s.add(t)}m=e}}}function w(e,t){return function(e){const t=[];for(;;){const{value:r,done:n}=e.next();if(n)return t;t.push(r)}}(function*(e,t={}){const{geometryType:r,objectIdFieldName:n}=t;for(;;){const{value:a,done:l}=e.next();if(l)return;const{geometry:c,properties:u,id:d}=a;if(c&&o[c.type]!==r)continue;const h=u||{};n&&null!=d&&!h[n]&&(h[n]=d);const f=new i.a(c?p(new s.a,c,t):null,h);yield f}}(l(e),t))}},"4xTw":function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("04ZG"),a=(r("4EHJ"),r("ju1D"),r("9AIY"),r("kJYu"));let o=class extends a.a{constructor(e){super(e),this.tiles=new Map}destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(e){const t=this.createTile(e);return t.once("isReady",()=>this.notifyChange("updating")),this.tiles.set(e.id,t),t}forceAttributeTextureUpload(){}forEachTile(e){this.tiles.forEach(e)}releaseTile(e){this.tiles.delete(e.key.id),this.disposeTile(e)}isUpdating(){let e=!0;return this.tiles.forEach(t=>{e=e&&t.isReady}),!e}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}};Object(n.a)([Object(i.b)()],o.prototype,"layer",void 0),Object(n.a)([Object(i.b)()],o.prototype,"layerView",void 0),Object(n.a)([Object(i.b)()],o.prototype,"tileInfoView",void 0),Object(n.a)([Object(i.b)()],o.prototype,"updating",null),o=Object(n.a)([Object(s.a)("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],o),t.a=o},"54nt":function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("+opI"),a=r("04ZG"),o=(r("4EHJ"),r("ju1D"),r("9AIY"),r("DKHk"));const l=new s.a({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"});let c=class extends o.a{constructor(e){super(e),this.type=null}};Object(n.a)([Object(i.b)({type:String,json:{read:l.read,write:l.write}})],c.prototype,"type",void 0),c=Object(n.a)([Object(a.a)("esri.tasks.support.NAMessage")],c),t.a=c},"5qYV":function(e,t,r){"use strict";r.r(t),r.d(t,"addOrUpdateResource",function(){return l}),r.d(t,"contentToBlob",function(){return p}),r.d(t,"fetchResources",function(){return o}),r.d(t,"getSiblingOfSameType",function(){return f}),r.d(t,"getSiblingOfSameTypeI",function(){return y}),r.d(t,"removeAllResources",function(){return u}),r.d(t,"removeResource",function(){return c}),r.d(t,"splitPrefixFileNameAndExtension",function(){return h});var n=r("srIe"),i=r("zlDU"),s=r("4EHJ"),a=r("Lqtk");async function o(e,t={},r){await e.load(r);const i=Object(s.y)(e.itemUrl,"resources"),{start:a=1,num:o=10,sortOrder:l="asc",sortField:c="created"}=t,u={query:{start:a,num:o,sortOrder:l,sortField:c},signal:Object(n.g)(r,"signal")},d=await e.portal._request(i,u);return{total:d.total,nextStart:d.nextStart,resources:d.resources.map(({created:t,size:r,resource:n})=>({created:new Date(t),size:r,resource:e.resourceFromPath(n)}))}}async function l(e,t,r,a){if(!e.hasPath())throw new i.a(`portal-item-resource-${t}:invalid-path`,"Resource does not have a valid path");await e.portalItem.load(a);const o=Object(s.y)(e.portalItem.userItemUrl,"add"===t?"addResources":"updateResources"),[l,c]=d(e.path),u=await p(r),h=new FormData;return l&&"."!==l&&h.append("resourcesPrefix",l),h.append("fileName",c),h.append("file",u,c),h.append("f","json"),Object(n.i)(a)&&a.access&&h.append("access",a.access),await e.portalItem.portal._request(o,{method:"post",body:h,signal:Object(n.g)(a,"signal")}),e}async function c(e,t,r){if(!t.hasPath())throw new i.a("portal-item-resources-remove:invalid-path","Resource does not have a valid path");await e.load(r);const a=Object(s.y)(e.userItemUrl,"removeResources");await e.portal._request(a,{method:"post",query:{resource:t.path},signal:Object(n.g)(r,"signal")}),t.portalItem=null}async function u(e,t){await e.load(t);const r=Object(s.y)(e.userItemUrl,"removeResources");return e.portal._request(r,{method:"post",query:{deleteAll:!0},signal:Object(n.g)(t,"signal")})}function d(e){const t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function h(e){const[t,r]=function(e){const t=Object(s.n)(e);return Object(n.h)(t)?[e,""]:[e.slice(0,e.length-t.length-1),`.${t}`]}(e),[i,a]=d(t);return[i,a,r]}async function p(e){return e instanceof Blob?e:(await Object(a.default)(e.url,{responseType:"blob"})).data}function f(e,t){if(!e.hasPath())return null;const[r,,n]=h(e.path);return e.portalItem.resourceFromPath(Object(s.y)(r,t+n))}function y(e,t){if(!e.hasPath())return null;const[r,,n]=h(e.path);return e.portalItem.resourceFromPath(Object(s.y)(r,t+n))}},"6Az7":function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r("kYAx"),i=r("yE7X"),s=r("Oxob"),a=r("ZyIX"),o=r("5LEI"),l=r("xzrc");class c extends o.a{constructor(e,t,r,n=null){super(e,t,r,r),this.bitmap=new l.a(n,"standard",!1),this.bitmap.coordScale=r,this.bitmap.once("isReady",()=>this.ready())}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(e){super.beforeRender(e),this.bitmap.beforeRender(e)}afterRender(e){super.afterRender(e),this.bitmap.afterRender(e)}set stencilRef(e){this.bitmap.stencilRef=e}get stencilRef(){return this.bitmap.stencilRef}setTransform(e,t){super.setTransform(e,t),this.bitmap.transforms.dvs=this.transforms.dvs}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}}class u extends a.a{get requiresDedicatedFBO(){return this.children.some(e=>"additive"===e.bitmap.blendFunction)}createTile(e){const t=this._tileInfoView.getTileBounds(Object(n.e)(),e);return new c(e,t,this._tileInfoView.tileInfo.size)}destroyTile(){}prepareRenderPasses(e){const t=e.registerRenderPass({name:"bitmap (tile)",brushes:[s.a.bitmap],target:()=>this.children.map(e=>e.bitmap),drawPhase:i.c.MAP});return[...super.prepareRenderPasses(e),t]}doRender(e){this.visible&&e.drawPhase===i.c.MAP&&super.doRender(e)}}},"6dDx":function(e,t,r){"use strict";var n,i=r("pO5D"),s=(r("wSAH"),r("f/qv")),a=r("6S2I"),o=r("zqDF"),l=r("TDcG"),c=r("WbKI"),u=r("Gj5k"),d=r("r88o"),h=r("04ZG"),p=r("Cduq"),f=r("zlDU"),y=r("4EHJ"),b=(r("ju1D"),r("ku/q")),m=(r("9AIY"),r("OvF4")),g=(r("4GrV"),r("LE9a")),O=r("wdpY"),j=r("pdg3"),v=r("SFah"),w=r("Lqtk"),x=r("bV/r"),I=r("H9eC"),S=r("5pQd"),_=(r("ZnuT"),r("tCO6"),r("2gBT"),r("JhoD"),r("tI3Y"),r("R4xK"),r("/1dM"),r("XNvV")),M=(r("+Xal"),r("ofM5")),T=r("gLc9"),L=r("wkZP"),A=r("orEy"),E=r("WmHL"),B=r("Ykwf"),F=r("9Ruv"),P=r("xk++"),D=r("kJYu");function R(e){return e&&"esriSMS"===e.type}function C(e,t,r){var n;return{ignoreOrigin:!0,enabled:!!r&&"map-image"===(null==(n=r.layer)?void 0:n.type)&&(r.writeSublayerStructure||this.originIdOf(t)>=Object(b.d)(r.origin))}}function N(e,t,r){var n;return{enabled:!!r&&"tile"===(null==(n=r.layer)?void 0:n.type)&&this._isOverridden(t)}}function k(e,t,r){return{ignoreOrigin:!0,enabled:r&&r.writeSublayerStructure||!1}}function z(e,t,r){return{ignoreOrigin:!0,enabled:!!r&&(r.writeSublayerStructure||this.originIdOf(t)>=Object(b.d)(r.origin))}}const q=a.a.getLogger("esri.layers.support.Sublayer");let U=0;const V=new Set;V.add("layer"),V.add("parent"),V.add("loaded"),V.add("loadStatus"),V.add("loadError"),V.add("loadWarnings");let G=n=class extends(Object(D.b)(Object(S.a)(Object(j.a)(x.a)))){constructor(e){super(e),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null}async load(e){return this.addResolvingPromise((async()=>{var t;if(!this.layer&&!this.url)throw new f.a("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});let r=null;if(!this.layer||this.originIdOf("url")>2||"data-layer"===(null==(t=this.source)?void 0:t.type))r=(await Object(w.default)(this.url,{responseType:"json",query:{f:"json"},...e})).data;else{var n;let t=this.id;"map-layer"===(null==(n=this.source)?void 0:n.type)&&(t=this.source.mapLayerId),r=await this.layer.fetchSublayerInfo(t,e)}r&&(this.sourceJSON=r,this.read({layerDefinition:r},{origin:"service"}))})()),this}readCapabilities(e,t){const r=(e=(t=t.layerDefinition||t).capabilities||e)?e.toLowerCase().split(",").map(e=>e.trim()):[];return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:-1!==r.indexOf("query")}}}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get fieldsIndex(){return new T.a(this.fields||[])}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields)for(const r of t.fields)if("esriFieldTypeGlobalID"===r.type)return r.name}get id(){const e=this._get("id");return null==e?U++:e}set id(e){this._get("id")!==e&&(!1!==this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,t,r,n){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map(e=>e.write({},n))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(t=>t.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields)for(const r of t.fields)if("esriFieldTypeOID"===r.type)return r.name}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,t){const r=t.layerDefinition;return 1-.01*(null!=r.transparency?r.transparency:r.drawingInfo.transparency)}writeOpacity(e,t,r,n){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,t){t.parentLayerId=this.parent&&this.parent!==this.layer?Object(o.e)(this.parent.id):-1}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){if(e)for(const t of e.getSymbols())if(Object(I.c)(t)){q.warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new E.a({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return Object(o.m)(g.a.ofType(n),e)}writeSublayers(e,t,r){this.get("sublayers.length")&&(t[r]=this.sublayers.map(e=>e.id).toArray().reverse())}readTypeIdField(e,t){const r=(t=t.layerDefinition||t).typeIdField;if(r){const e=Object(O.n)(t.fields,r);if(e)return e.name}return null}get url(){var e,t;const r=null!=(e=null==(t=this.layer)?void 0:t.parsedUrl)?e:this._lastParsedUrl,n=this.source;if(!r)return null;if(this._lastParsedUrl=r,"map-layer"===(null==n?void 0:n.type))return`${r.path}/${n.mapLayerId}`;const i={layer:JSON.stringify({source:this.source})};return`${r.path}/dynamicLayer?${Object(y.D)(i)}`}set url(e){e?this._override("url",e):this._clearOverride("url")}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,t,r,n){t[r]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=Object(l.a)(this),t=new n;return Object(l.a)(t).store=e.clone(V),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}createPopupTemplate(e){return Object(F.a)(this,e)}createQuery(){return new P.a({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){var e,t;if(this.hasOwnProperty("sublayers"))return null;const n=null==(e=this.layer)?void 0:e.parsedUrl,i=new(0,(await Promise.resolve().then(r.bind(null,"W9Wu"))).default)({url:n.path});return n&&this.source&&("map-layer"===this.source.type?i.layerId=this.source.mapLayerId:i.dynamicDataSource=this.source),null!=this.layer.refreshInterval&&(i.refreshInterval=this.layer.refreshInterval),this.definitionExpression&&(i.definitionExpression=this.definitionExpression),this.originIdOf("labelingInfo")>2&&(i.labelingInfo=Object(s.a)(this.labelingInfo)),this.originIdOf("labelsVisible")>0&&(i.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>0&&(i.legendEnabled=this.legendEnabled),this.originIdOf("visible")>0&&(i.visible=this.visible),this.originIdOf("minScale")>0&&(i.minScale=this.minScale),this.originIdOf("maxScale")>0&&(i.maxScale=this.maxScale),this.originIdOf("opacity")>0&&(i.opacity=this.opacity),this.originIdOf("popupTemplate")>0&&(i.popupTemplate=Object(s.a)(this.popupTemplate)),this.originIdOf("renderer")>2&&(i.renderer=Object(s.a)(this.renderer)),"data-layer"===(null==(t=this.source)?void 0:t.type)&&(i.dynamicDataSource=this.source.clone()),this.originIdOf("title")>0&&(i.title=this.title),"map-image"===this.layer.type&&this.layer.originIdOf("customParameters")>0&&(i.customParameters=this.layer.customParameters),"tile"===this.layer.type&&this.layer.originIdOf("customParameters")>0&&(i.customParameters=this.layer.customParameters),i}getFeatureType(e){const{typeIdField:t,types:r}=this;if(!t||!e)return null;const n=e.attributes?e.attributes[t]:void 0;if(null==n)return null;let i=null;return r.some(e=>{const{id:t}=e;return null!=t&&(t.toString()===n.toString()&&(i=e),!!i)}),i}getFieldDomain(e,t){const r=this.getFeatureType(t&&t.feature);if(r){const t=r.domains&&r.domains[e];if(t&&"inherited"!==t.type)return t}return this._getLayerDomain(e)}queryFeatures(e=this.createQuery(),t){return this.load().then(()=>{if(!this.get("capabilities.operations.supportsQuery"))throw new f.a("Sublayer.queryFeatures","this layer doesn't support queries.");return Promise.all([Promise.resolve().then(r.bind(null,"6fyR")),Promise.resolve().then(r.bind(null,"8prj"))])}).then(([{executeQuery:r},{default:n}])=>r(this.url,P.a.from(e),this.layer?this.layer.spatialReference:null,{...t,query:{...this.layer.customParameters}}).then(e=>n.fromJSON(e.data))).then(e=>(e&&e.features&&e.features.forEach(e=>{e.sourceLayer=this}),e))}toExportImageJSON(){var e;const t={id:this.id,source:(null==(e=this.source)?void 0:e.toJSON())||{mapLayerId:this.id,type:"mapLayer"}};this.definitionExpression&&(t.definitionExpression=this.definitionExpression);const r=["renderer","labelingInfo","opacity","labelsVisible"].reduce((e,t)=>(e[t]=this.originIdOf(t),e),{});if(Object.keys(r).some(e=>r[e]>2)){const e=t.drawingInfo={};r.renderer>2&&(e.renderer=this.renderer?this.renderer.toJSON():null),r.labelsVisible>2&&(e.showLabels=this.labelsVisible),this.labelsVisible&&r.labelingInfo>2&&(e.labelingInfo=this.labelingInfo?this.labelingInfo.map(e=>e.write({},{origin:"service",layer:this.layer})):null,e.showLabels=!0),r.opacity>2&&(e.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(e.renderer)}return t}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,e=>{e.color||"esriSMSX"!==e.style&&"esriSMSCross"!==e.style||(e.color=e.outline&&e.outline.color?e.outline.color:[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,t){if(e){const r="uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:[];for(const e of r)R(e.symbol)&&t(e.symbol);"symbol"in e&&R(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&R(e.defaultSymbol)&&t(e.defaultSymbol)}}_setAndNotifyLayer(e,t){const r=this.layer,n=this._get(e);let i,s;switch(e){case"definitionExpression":i="supportsSublayerDefinitionExpression";case"minScale":case"maxScale":case"visible":i="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":i="supportsDynamicLayers",s="supportsModification"}const a=Object(l.a)(this).getDefaultOrigin();if("service"!==a){if(i&&!1===this.get(`layer.capabilities.exportMap.${i}`))return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${i}'`);if(s&&!1===this.get(`capabilities.exportMap.${s}`))return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${s}'`)}"source"!==e||"not-loaded"===this.loadStatus?(this._set(e,t),"service"!==a&&n!==t&&r&&r.emit&&r.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,t){t&&(t.forEach(e=>{e.parent=null,e.layer=null}),this.handles.removeAll()),e&&(e.forEach(e=>{e.parent=this,e.layer=this.layer}),this.handles.add([e.on("after-add",({item:e})=>{e.parent=this,e.layer=this.layer}),e.on("after-remove",({item:e})=>{e.parent=null,e.layer=null}),e.on("before-changes",e=>{const t=this.get("layer.capabilities.exportMap.supportsSublayersChanges");null==t||t||(q.error(new f.a("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),e.preventDefault())})]))}_logLockedError(e,t){q.error(new f.a("sublayer:locked",`Property '${e}' can't be changed on Sublayer from the layer '${this.layer.id}'`,{reason:t,sublayer:this,layer:this.layer}))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}};G.test={isMapImageLayerOverridePolicy:e=>e===k||e===C,isTileImageLayerOverridePolicy:e=>e===N},Object(i.a)([Object(c.b)({readOnly:!0})],G.prototype,"capabilities",void 0),Object(i.a)([Object(d.a)("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],G.prototype,"readCapabilities",null),Object(i.a)([Object(c.b)({type:String,value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression",overridePolicy:C}}})],G.prototype,"definitionExpression",null),Object(i.a)([Object(c.b)({type:[M.a],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],G.prototype,"fields",void 0),Object(i.a)([Object(c.b)({readOnly:!0})],G.prototype,"fieldsIndex",null),Object(i.a)([Object(c.b)({type:m.a,json:{read:{source:"layerDefinition.extent"}}})],G.prototype,"fullExtent",void 0),Object(i.a)([Object(c.b)({type:String})],G.prototype,"globalIdField",void 0),Object(i.a)([Object(d.a)("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],G.prototype,"readGlobalIdFieldFromService",null),Object(i.a)([Object(c.b)({type:o.a,json:{write:{ignoreOrigin:!0}}})],G.prototype,"id",null),Object(i.a)([Object(c.b)({value:null,type:[L.a],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:k}}})],G.prototype,"labelingInfo",null),Object(i.a)([Object(p.a)("labelingInfo")],G.prototype,"writeLabelingInfo",null),Object(i.a)([Object(c.b)({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:k}}})],G.prototype,"labelsVisible",null),Object(i.a)([Object(c.b)({value:null})],G.prototype,"layer",null),Object(i.a)([Object(c.b)({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:z}}})],G.prototype,"legendEnabled",void 0),Object(i.a)([Object(c.b)({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],G.prototype,"listMode",null),Object(i.a)([Object(c.b)({type:Number,value:0,json:{write:{overridePolicy:k}}})],G.prototype,"minScale",null),Object(i.a)([Object(d.a)("minScale",["minScale","layerDefinition.minScale"])],G.prototype,"readMinScale",null),Object(i.a)([Object(c.b)({type:Number,value:0,json:{write:{overridePolicy:k}}})],G.prototype,"maxScale",null),Object(i.a)([Object(d.a)("maxScale",["maxScale","layerDefinition.maxScale"])],G.prototype,"readMaxScale",null),Object(i.a)([Object(c.b)({type:String})],G.prototype,"objectIdField",void 0),Object(i.a)([Object(d.a)("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],G.prototype,"readObjectIdFieldFromService",null),Object(i.a)([Object(c.b)({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:k}}})],G.prototype,"opacity",null),Object(i.a)([Object(d.a)("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],G.prototype,"readOpacity",null),Object(i.a)([Object(p.a)("opacity")],G.prototype,"writeOpacity",null),Object(i.a)([Object(c.b)({json:{type:o.a,write:{target:"parentLayerId",allowNull:!0,overridePolicy:k}}})],G.prototype,"parent",void 0),Object(i.a)([Object(p.a)("parent")],G.prototype,"writeParent",null),Object(i.a)([Object(c.b)({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(e,t)=>!t.disablePopup},write:{target:"disablePopup",overridePolicy:z,writer(e,t,r){t[r]=!e}}}})],G.prototype,"popupEnabled",void 0),Object(i.a)([Object(c.b)({type:v.a,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:z}}})],G.prototype,"popupTemplate",void 0),Object(i.a)([Object(c.b)({readOnly:!0})],G.prototype,"defaultPopupTemplate",null),Object(i.a)([Object(c.b)({types:_.a,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:k},origins:{"web-scene":{types:_.b,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:k}}}}})],G.prototype,"renderer",null),Object(i.a)([Object(c.b)({types:{key:"type",base:null,typeMap:{"data-layer":B.a,"map-layer":E.a}},cast(e){if(e){if("mapLayerId"in e)return Object(o.d)(E.a,e);if("dataSource"in e)return Object(o.d)(B.a,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:k}}})],G.prototype,"source",null),Object(i.a)([Object(c.b)()],G.prototype,"sourceJSON",void 0),Object(i.a)([Object(c.b)({value:null,json:{type:[o.a],write:{target:"subLayerIds",allowNull:!0,overridePolicy:k}}})],G.prototype,"sublayers",null),Object(i.a)([Object(u.a)("sublayers")],G.prototype,"castSublayers",null),Object(i.a)([Object(p.a)("sublayers")],G.prototype,"writeSublayers",null),Object(i.a)([Object(c.b)({type:String,json:{read:{source:"name"},write:{target:"name",allowNull:!0,overridePolicy:z}}})],G.prototype,"title",void 0),Object(i.a)([Object(c.b)({type:String})],G.prototype,"typeIdField",void 0),Object(i.a)([Object(d.a)("typeIdField",["layerDefinition.typeIdField"])],G.prototype,"readTypeIdField",null),Object(i.a)([Object(c.b)({type:[A.a],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],G.prototype,"types",void 0),Object(i.a)([Object(c.b)({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:N}}})],G.prototype,"url",null),Object(i.a)([Object(c.b)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:k}}})],G.prototype,"visible",null),Object(i.a)([Object(p.a)("visible")],G.prototype,"writeVisible",null),G=n=Object(i.a)([Object(h.a)("esri.layers.support.Sublayer")],G),t.a=G},"8Lmx":function(e,t,r){"use strict";function n(e){return 32+e.length}function i(e){if(!e)return 0;let t=32;for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];switch(typeof i){case"string":t+=n(i);break;case"number":t+=16;break;case"boolean":t+=4}}return t}function s(e,t){return 32+e.length*t}r.d(t,"a",function(){return i}),r.d(t,"b",function(){return s})},"8gnY":function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("8NDJ");class i extends n.a{constructor(e,t){super(n.a.createInstance()),this._currentIndex=-1,this._reader=e,this._indices=t}static from(e,t){return new i(e.copy(),t)}get hasNext(){return this._currentIndex+1<this._indices.length}getApproximateSize(){return this._indices.length}getCursor(){return this.copy()}copy(){const e=new i(this._reader.copy(),this._indices);return e._currentIndex=this._currentIndex,e}next(){for(;this._nextIndex()&&!this._reader._passesFilter()&&!this._reader._getExists(););return this._currentIndex<this._indices.length}_nextIndex(){return++this._currentIndex<this._indices.length&&(this._reader.setIndex(this._indices[this._currentIndex]),!0)}setArcadeSpatialReference(e){this._reader.setArcadeSpatialReference(e)}attachStorage(e){this._reader.attachStorage(e)}get geometryType(){return this._reader.geometryType}get hasFeatures(){return this._reader.hasFeatures}get exceededTransferLimit(){return this._reader.exceededTransferLimit}get hasZ(){return this._reader.hasZ}get hasM(){return this._reader.hasM}getStorage(){return this._reader.getStorage()}getComputedNumeric(e){return this._reader.getComputedNumericAtIndex(0)}setComputedNumeric(e,t){return this._reader.setComputedNumericAtIndex(t,0)}getComputedString(e){return this._reader.getComputedStringAtIndex(0)}setComputedString(e,t){return this._reader.setComputedStringAtIndex(0,t)}getComputedNumericAtIndex(e){return this._reader.getComputedNumericAtIndex(e)}setComputedNumericAtIndex(e,t){this._reader.setComputedNumericAtIndex(e,t)}getComputedStringAtIndex(e){return this._reader.getComputedStringAtIndex(e)}setComputedStringAtIndex(e,t){return this._reader.setComputedStringAtIndex(e,t)}transform(e,t,r,n){const i=this.copy();return i._reader=this._reader.transform(e,t,r,n),i}extent(e,t,r,n){const i=this.copy();return i._reader=this._reader.extent(e,t,r,n),i}hasFilter(){return this._reader.hasFilter()}readAttribute(e,t=!1){return this._reader.readAttribute(e,t)}readAttributes(){return this._reader.readAttributes()}joinAttributes(e){return this._reader.joinAttributes(e)}readArcadeFeature(){return this._reader.readArcadeFeature()}geometry(){return this._reader.geometry()}field(e){return this.readAttribute(e,!0)}hasField(e){return this._reader.hasField(e)}setField(e,t){return this._reader.setField(e,t)}keys(){return this._reader.keys()}castToText(){return this._reader.castToText()}getQuantizationTransform(){return this._reader.getQuantizationTransform()}getAttributeHash(){return this._reader.getAttributeHash()}getObjectId(){return this._reader.getObjectId()}getDisplayId(){return this._reader.getDisplayId()}setDisplayId(e){return this._reader.setDisplayId(e)}getGroupId(){return this._reader.getGroupId()}setGroupId(e){return this._reader.setGroupId(e)}getXHydrate(){return this._reader.getXHydrate()}getYHydrate(){return this._reader.getYHydrate()}getX(){return this._reader.getX()}getY(){return this._reader.getY()}setIndex(e){return this._reader.setIndex(e)}getIndex(){return this._reader.getIndex()}readLegacyFeature(){return this._reader.readLegacyFeature()}readOptimizedFeature(){return this._reader.readOptimizedFeature()}readLegacyPointGeometry(){return this._reader.readLegacyPointGeometry()}readLegacyGeometry(){return this._reader.readLegacyGeometry()}readLegacyCentroid(){return this._reader.readLegacyCentroid()}readGeometryArea(){return this._reader.readGeometryArea()}readUnquantizedGeometry(){return this._reader.readUnquantizedGeometry()}readHydratedGeometry(){return this._reader.readHydratedGeometry()}readGeometry(){return this._reader.readGeometry()}readCentroid(){return this._reader.readCentroid()}_passesFilter(){return this._reader._passesFilter()}_readAttribute(e,t){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}_readAttributes(){throw new Error("Error: Should not be called. Underlying _reader should be used instead")}}},AfLA:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return o}),r.d(t,"c",function(){return s});var n=r("3r0u"),i=r("OKTS");const s=(()=>{if(!("document"in n.a))return()=>null;const e=document.createElement("canvas"),t=e.getContext("2d");return e.height=512,e.width=1,r=>{t.clearRect(0,0,1,e.height);const n=t.createLinearGradient(0,0,0,e.height);for(const{ratio:e,color:t}of r.colorStops)n.addColorStop(Math.max(e,.001),`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]})`);return t.fillStyle=n,t.fillRect(0,0,1,e.height),t.getImageData(0,0,1,e.height).data}})();function a(e,t,r,n){const{blurRadius:i,fieldOffset:s,field:a}=t,o=new Float64Array(r*n),l=function(e){const t=Math.round(3*e),r=2*e*e,n=new Float64Array(2*t+1);for(let i=0;i<=n.length;i++)n[i]=Math.exp(-((i-t)**2)/r)/Math.sqrt(2*Math.PI)*(e/2);return n}(i),c=Math.round(3*i);let u,d=Number.NEGATIVE_INFINITY;const h=function(e,t){return null!=e?"string"==typeof t?t=>-1*+t.readAttribute(e):r=>+r.readAttribute(e)+t:e=>1}(a,s),p=new Set;for(const f of e){const e=f.getCursor();for(;e.next();){const t=e.getObjectId();if(p.has(t))continue;p.add(t);const i=e.readLegacyPointGeometry(),s=128;if(i.x<-s||i.x>=r+s||i.y<-s||i.y>n+s)continue;const a=+h(e),f=Math.round(i.x)-c,y=Math.round(i.y)-c,b=Math.max(0,f),m=Math.max(0,y),g=Math.min(n,Math.round(i.y)+c),O=Math.min(r,Math.round(i.x)+c);for(let e=m;e<g;e++){const t=l[e-y];for(let n=b;n<O;n++)u=o[e*r+n]+=t*l[n-f]*a,u>d&&(d=u)}}}return{matrix:o.buffer,max:d}}function o(e,t,r,n,s,a){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);const o=e.getImageData(0,0,t,t);r&&n&&o.data.set(new Uint8ClampedArray(function(e,t,r,n,s){const a=new Uint32Array(e*e),o="buffer"in t?t:new Float64Array(t),l="buffer"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer),c=l.length/(s-n);for(let u=0;u<o.length;u++){const e=Math.floor((o[u]-n)*c);a[u]=l[Object(i.c)(e,0,l.length-1)]}return a.buffer}(t,r,n,s,a))),e.putImageData(o,0,0)}},BGvB:function(e,t,r){"use strict";r.d(t,"a",function(){return j}),r.d(t,"b",function(){return b}),r.d(t,"c",function(){return O}),r.d(t,"d",function(){return y}),r.d(t,"e",function(){return m});var n=r("f/qv"),i=r("EyXx"),s=r("4EHJ"),a=r("WZb1"),o=r("KLE9"),l=r("SFah"),c=r("975N"),u=r("Lqtk"),d=r("+Xal"),h=r("8prj"),p=r("QmHG");const f={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function y(e){const t=e.folders||[],r=t.slice(),i=new Map,s=new Map,a=new Map,o=new Map,l=new Map,c={esriGeometryPoint:s,esriGeometryPolyline:a,esriGeometryPolygon:o};(e.featureCollection&&e.featureCollection.layers||[]).forEach(e=>{const t=Object(n.a)(e);t.featureSet.features=[];const r=e.featureSet.geometryType;i.set(r,t);const l=e.layerDefinition.objectIdField;"esriGeometryPoint"===r?g(s,l,e.featureSet.features):"esriGeometryPolyline"===r?g(a,l,e.featureSet.features):"esriGeometryPolygon"===r&&g(o,l,e.featureSet.features)}),e.groundOverlays&&e.groundOverlays.forEach(e=>{l.set(e.id,e)}),t.forEach(t=>{t.networkLinkIds.forEach(n=>{const i=function(e,t,r){const n=function(e,t){let r;return t.some(t=>t.id===e&&(r=t,!0)),r}(e,r);return n&&(n.parentFolderId=t,n.networkLink=n),n}(n,t.id,e.networkLinks);i&&r.push(i)})}),r.forEach(e=>{e.featureInfos&&(e.points=Object(n.a)(i.get("esriGeometryPoint")),e.polylines=Object(n.a)(i.get("esriGeometryPolyline")),e.polygons=Object(n.a)(i.get("esriGeometryPolygon")),e.mapImages=[],e.featureInfos.map(t=>{switch(t.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const r=c[t.type].get(t.id);r&&e[f[t.type]].featureSet.features.push(r);break}case"GroundOverlay":{const r=l.get(t.id);r&&e.mapImages.push(r);break}}}),e.fullExtent=j([e]))});const u=j(r);return{folders:t,sublayers:r,extent:u}}function b(e,t,r,n){const a=c.b&&c.b.findCredential(e);e=Object(s.e)(e,{token:a&&a.token});const o=i.a.kmlServiceUrl;return Object(u.default)(o,{query:{url:e,model:"simple",folders:"",refresh:0!==r||void 0,outSR:JSON.stringify(t)},responseType:"json",signal:n})}function m(e,t,r=null,n=[]){const i=[],s={},a=t.sublayers,o=t.folders.map(e=>e.id);return a.forEach(t=>{const a=new e;if(r?a.read(t,r):a.read(t),n.length&&o.indexOf(a.id)>-1&&(a.visible=-1!==n.indexOf(a.id)),s[t.id]=a,null!=t.parentFolderId&&-1!==t.parentFolderId){const e=s[t.parentFolderId];e.sublayers||(e.sublayers=[]),e.sublayers.unshift(a)}else i.unshift(a)}),i}function g(e,t,r){r.forEach(r=>{e.set(r.attributes[t],r)})}async function O(e){const t=h.default.fromJSON(e.featureSet).features,r=e.layerDefinition,n=Object(d.a)(r.drawingInfo.renderer),i=l.a.fromJSON(e.popupInfo),s=[];for(const a of t){const e=await n.getSymbolAsync(a);a.symbol=e,a.popupTemplate=i,a.visible=!0,s.push(a)}return s}function j(e){const t=Object(p.b)(),r=Object(p.b)(p.a);for(const n of e){if(n.polygons&&n.polygons.featureSet&&n.polygons.featureSet.features)for(const e of n.polygons.featureSet.features)Object(o.b)(t,e.geometry),Object(p.e)(r,t);if(n.polylines&&n.polylines.featureSet&&n.polylines.featureSet.features)for(const e of n.polylines.featureSet.features)Object(o.b)(t,e.geometry),Object(p.e)(r,t);if(n.points&&n.points.featureSet&&n.points.featureSet.features)for(const e of n.points.featureSet.features)Object(o.b)(t,e.geometry),Object(p.e)(r,t);if(n.mapImages)for(const e of n.mapImages)Object(o.b)(t,e.extent),Object(p.e)(r,t)}return Object(p.d)(r,p.a)?null:{xmin:r[0],ymin:r[1],zmin:r[2],xmax:r[3],ymax:r[4],zmax:r[5],spatialReference:a.a.WGS84}}},BMSW:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("wSAH"),i=r("zna6");const s={minX:0,minY:0,maxX:0,maxY:0};class a{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new i.a(9,Object(n.a)("csp-restrictions")?e=>({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const e=new Array(this._idByBounds.size);let t=0;this._idByBounds.forEach((r,n)=>{e[t++]=n}),this._indexInvalid=!1,this._index.clear(),this._index.load(e)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(e=>this._idByBounds.has(e))),this._boundsToLoad.length=0)}}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(e){const t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}forEachInBounds(e,t){this._loadIndex(),function(e,t,r){s.minX=t[0],s.minY=t[1],s.maxX=t[2],s.maxY=t[3],e.search(s,r)}(this._index,e,e=>t(this._idByBounds.get(e)))}get(e){return this._boundsById.get(e)}has(e){return this._boundsById.has(e)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(e,t){if(!this._indexInvalid){const t=this._boundsById.get(e);t&&(this._index.remove(t),this._idByBounds.delete(t))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},BPBZ:function(e,t,r){"use strict";r.d(t,"a",function(){return p}),r.d(t,"b",function(){return u});var n=r("Cy1f"),i=r("QhKk"),s=r("5DEt"),a=r("2uVf"),o=r("sTkM"),l=r("dXfX");function c(e,t,r){r*=.5;const n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function u(e,t){const r=2*Math.acos(t[3]),n=Math.sin(r/2);return n>i.a?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),r}function d(e,t,r){const n=t[0],i=t[1],s=t[2],a=t[3],o=r[0],l=r[1],c=r[2],u=r[3];return e[0]=n*u+a*o+i*c-s*l,e[1]=i*u+a*l+s*o-n*c,e[2]=s*u+a*c+n*l-i*o,e[3]=a*u-n*o-i*l-s*c,e}function h(e,t,r,n){const s=t[0],a=t[1],o=t[2],l=t[3];let c,u,d,h,p,f=r[0],y=r[1],b=r[2],m=r[3];return u=s*f+a*y+o*b+l*m,u<0&&(u=-u,f=-f,y=-y,b=-b,m=-m),1-u>i.a?(c=Math.acos(u),d=Math.sin(c),h=Math.sin((1-n)*c)/d,p=Math.sin(n*c)/d):(h=1-n,p=n),e[0]=h*s+p*f,e[1]=h*a+p*y,e[2]=h*o+p*b,e[3]=h*l+p*m,e}function p(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function f(e,t){const r=t[0]+t[4]+t[8];let n;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{let r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);const i=(r+1)%3,s=(r+2)%3;n=Math.sqrt(t[3*r+r]-t[3*i+i]-t[3*s+s]+1),e[r]=.5*n,n=.5/n,e[3]=(t[3*i+s]-t[3*s+i])*n,e[i]=(t[3*i+r]+t[3*r+i])*n,e[s]=(t[3*s+r]+t[3*r+s])*n}return e}const y=l.c,b=l.k,m=l.a,g=d,O=l.b,j=l.d,v=l.i,w=l.e,x=w,I=l.f,S=I,_=l.j,M=l.g,T=l.h,L=Object(n.e)(),A=Object(n.g)(1,0,0),E=Object(n.g)(0,1,0),B=Object(o.a)(),F=Object(o.a)(),P=Object(a.a)();Object.freeze({__proto__:null,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},setAxisAngle:c,getAxisAngle:u,multiply:d,rotateX:function(e,t,r){r*=.5;const n=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(r),l=Math.cos(r);return e[0]=n*l+a*o,e[1]=i*l+s*o,e[2]=s*l-i*o,e[3]=a*l-n*o,e},rotateY:function(e,t,r){r*=.5;const n=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(r),l=Math.cos(r);return e[0]=n*l-s*o,e[1]=i*l+a*o,e[2]=s*l+n*o,e[3]=a*l-i*o,e},rotateZ:function(e,t,r){r*=.5;const n=t[0],i=t[1],s=t[2],a=t[3],o=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*o,e[1]=i*l-n*o,e[2]=s*l+a*o,e[3]=a*l-s*o,e},calculateW:function(e,t){const r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e},slerp:h,random:function(e){const t=Object(i.b)(),r=Object(i.b)(),n=Object(i.b)(),s=Math.sqrt(1-t),a=Math.sqrt(t);return e[0]=s*Math.sin(2*Math.PI*r),e[1]=s*Math.cos(2*Math.PI*r),e[2]=a*Math.sin(2*Math.PI*n),e[3]=a*Math.cos(2*Math.PI*n),e},invert:function(e,t){const r=t[0],n=t[1],i=t[2],s=t[3],a=r*r+n*n+i*i+s*s,o=a?1/a:0;return e[0]=-r*o,e[1]=-n*o,e[2]=-i*o,e[3]=s*o,e},conjugate:p,fromMat3:f,fromEuler:function(e,t,r,n){const i=.5*Math.PI/180;t*=i,r*=i,n*=i;const s=Math.sin(t),a=Math.cos(t),o=Math.sin(r),l=Math.cos(r),c=Math.sin(n),u=Math.cos(n);return e[0]=s*l*u-a*o*c,e[1]=a*o*u+s*l*c,e[2]=a*l*c-s*o*u,e[3]=a*l*u+s*o*c,e},str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},copy:y,set:b,add:m,mul:g,scale:O,dot:j,lerp:v,length:w,len:x,squaredLength:I,sqrLen:S,normalize:_,exactEquals:M,equals:T,rotationTo:function(e,t,r){const n=Object(s.e)(t,r);return n<-.999999?(Object(s.d)(L,A,t),Object(s.k)(L)<1e-6&&Object(s.d)(L,E,t),Object(s.o)(L,L),c(e,L,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(Object(s.d)(L,t,r),e[0]=L[0],e[1]=L[1],e[2]=L[2],e[3]=1+n,_(e,e))},sqlerp:function(e,t,r,n,i,s){return h(B,t,i,s),h(F,r,n,s),h(e,B,F,2*s*(1-s)),e},setAxes:function(e,t,r,n){const i=P;return i[0]=r[0],i[3]=r[1],i[6]=r[2],i[1]=n[0],i[4]=n[1],i[7]=n[2],i[2]=-t[0],i[5]=-t[1],i[8]=-t[2],_(e,f(e,i))}})},DJok:function(e,t,r){"use strict";r.d(t,"a",function(){return f}),r.d(t,"b",function(){return p}),r("wSAH");var n=r("srIe"),i=r("zm0L"),s=r("lx5q"),a=r("QmHG"),o=r("kB+0"),l=r("hIOP"),c=r("8gnY");function u(e,t){return e<<16|t}function d(e){return(4294901760&e)>>>16}function h(e){return 65535&e}const p={getObjectId:e=>e.getObjectId(),getAttributes:e=>e.readAttributes(),getAttribute:(e,t)=>e.readAttribute(t),cloneWithGeometry:(e,t)=>e,getGeometry:e=>e.readHydratedGeometry(),getCentroid:(e,t)=>e.readCentroid()};class f extends l.a{constructor(e,t,r){super(e,t),this.featureAdapter=p,this.events=new i.a,this._featureSetsByInstance=new Map,this._objectIdToDisplayId=new Map,this._spatialIndexInvalid=!0,this._indexSearchCache=new s.a(50),this._index=Object(o.a)(9,e=>({minX:this._storage.getXMin(e),minY:this._storage.getYMin(e),maxX:this._storage.getXMax(e),maxY:this._storage.getYMax(e)})),this._storage=t,this.mode=r}get storage(){return this._storage}get storeStatistics(){return{featureCount:0,vertexCount:0}}hasInstance(e){return this._featureSetsByInstance.has(e)}onTileData(e,t){if(Object(n.h)(t.addOrUpdate))return t;if(t.addOrUpdate.attachStorage(this._storage),"snapshot"===this.mode){const r=t.addOrUpdate.getCursor();for(;r.next();){const t=r.getDisplayId();this.setComputedAttributes(this._storage,r,t,e.scale)}return t}this._featureSetsByInstance.set(t.addOrUpdate.instance,t.addOrUpdate);const r=t.addOrUpdate.getCursor();for(;r.next();)this._insertFeature(r,e.scale);return this._spatialIndexInvalid=!0,this.events.emit("changed"),t}search(e){this._rebuildIndex();const t=e.id,r=this._indexSearchCache.find(e=>e.tileId===t);if(Object(n.i)(r))return r.readers;const i=new Map,s=this._searchIndex(e.bounds),a=[];for(const n of s){const e=this._storage.getInstanceId(n),t=d(e),r=h(e);i.has(t)||i.set(t,[]),i.get(t).push(r)}return i.forEach((e,t)=>{const r=this._featureSetsByInstance.get(t);a.push(c.a.from(r,e))}),this._indexSearchCache.enqueue({tileId:t,readers:a}),a}insert(e){const t=e.getCursor(),r=this._storage;for(;t.next();){var n;const e=u(t.instance,t.getIndex()),i=t.getObjectId(),s=null!=(n=this._objectIdToDisplayId.get(i))?n:this._storage.createDisplayId();t.setDisplayId(s),r.setInstanceId(s,e),this._objectIdToDisplayId.set(i,s)}this._featureSetsByInstance.set(e.instance,e),this._spatialIndexInvalid=!0}remove(e){const t=this._objectIdToDisplayId.get(e);if(!t)return;const r=this._storage.getInstanceId(t),n=h(r),i=d(r),s=this._featureSetsByInstance.get(i);this._objectIdToDisplayId.delete(e),this._storage.releaseDisplayId(t),s.removeAtIndex(n),s.isEmpty&&this._featureSetsByInstance.delete(i),this._spatialIndexInvalid=!0}forEach(e){this._objectIdToDisplayId.forEach(t=>{const r=this._storage.getInstanceId(t),n=this._lookupFeature(r);e(n)})}forEachUnsafe(e){this._objectIdToDisplayId.forEach(t=>{const r=this._storage.getInstanceId(t),n=d(r),i=h(r),s=this._getFeatureSet(n);s.setIndex(i),e(s)})}forEachInBounds(e,t){const r=this._searchIndex(e);for(const i of r){const e=this.lookupFeatureByDisplayId(i,this._storage);t(Object(n.o)(e))}}forEachBounds(e,t,r){this._rebuildIndex();const n=[0,0,0,0];for(const i of e){if(!i.readGeometry())continue;const e=i.getDisplayId();n[0]=this._storage.getXMin(e),n[1]=this._storage.getYMin(e),n[2]=this._storage.getXMax(e),n[3]=this._storage.getYMax(e),t(Object(a.h)(r,n))}}sweepFeatures(e,t,r){this._spatialIndexInvalid=!0,this._objectIdToDisplayId.forEach((n,i)=>{e.has(n)||(t.releaseDisplayId(n),r&&r.unsetAttributeData(n),this._objectIdToDisplayId.delete(i))}),this.events.emit("changed")}sweepFeatureSets(e){this._spatialIndexInvalid=!0,this._featureSetsByInstance.forEach((t,r)=>{e.has(r)||this._featureSetsByInstance.delete(r)})}lookupObjectId(e,t){const r=this.lookupFeatureByDisplayId(e,t);return Object(n.h)(r)?null:r.getObjectId()}lookupDisplayId(e){return this._objectIdToDisplayId.get(e)}lookupFeatureByDisplayId(e,t){const r=t.getInstanceId(e);return this._lookupFeature(r)}lookupByDisplayIdUnsafe(e){const t=this._storage.getInstanceId(e),r=d(t),n=h(t),i=this._getFeatureSet(r);return i?(i.setIndex(n),i):null}_insertFeature(e,t){const r=this._storage,n=e.getObjectId(),i=u(e.instance,e.getIndex());r.getInstanceId(e.getDisplayId());let s=this._objectIdToDisplayId.get(n);s||(s=r.createDisplayId(),this._objectIdToDisplayId.set(n,s),this._spatialIndexInvalid=!0),e.setDisplayId(s),r.setInstanceId(s,i),this.setComputedAttributes(r,e,s,t)}_searchIndex(e){return this._rebuildIndex(),this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}_rebuildIndex(){if(!this._spatialIndexInvalid)return;const e=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(t=>{const r=t.getCursor();for(;r.next();){const t=r.getDisplayId();this._storage.setBounds(t,r)&&e.push(t)}}):this._objectIdToDisplayId.forEach(t=>{const r=this._storage.getInstanceId(t);this._storage.setBounds(t,this._lookupFeature(r))&&e.push(t)}),this._index.clear(),this._index.load(e),this._indexSearchCache.clear(),this._spatialIndexInvalid=!1}_lookupFeature(e){const t=d(e),r=h(e),n=this._getFeatureSet(t);if(!n)return null;const i=n.getCursor();return i.setIndex(r),i}_getFeatureSet(e){return this._featureSetsByInstance.get(e)}}},DKHk:function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("+opI"),a=r("04ZG"),o=(r("4EHJ"),r("ju1D"),r("9AIY"),r("ag7Y"));const l=new s.a({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let c=class extends o.a{constructor(e){super(e),this.description=null,this.type=null}};Object(n.a)([Object(i.b)({type:String,json:{write:!0}})],c.prototype,"description",void 0),Object(n.a)([Object(i.b)({type:String,json:{read:l.read,write:l.write}})],c.prototype,"type",void 0),c=Object(n.a)([Object(a.a)("esri.tasks.support.GPMessage")],c),t.a=c},Dfpg:function(e,t,r){"use strict";function n(e,t){return!!e.typeKeywords&&e.typeKeywords.indexOf(t)>-1}r.d(t,"a",function(){return n})},Fewv:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r("4EHJ"),i=r("AiS/");function s(e){return{origin:"portal-item",url:Object(n.J)(e.itemUrl),portal:e.portal||i.a.getDefault(),portalItem:e,readResourcePaths:[]}}},Fkrg:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI"),r("04ZG")),s=(r("4EHJ"),r("ju1D"),r("9AIY"),r("6Az7"));const a=e=>{let t=class extends e{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new s.a(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView.removeAllChildren()}};return t=Object(n.a)([Object(i.a)("esri.views.2d.layers.BitmapTileLayerView2D")],t),t}},IAPW:function(e,t,r){"use strict";r.d(t,"a",function(){return y}),r.d(t,"b",function(){return f}),r.d(t,"c",function(){return u}),r.d(t,"d",function(){return l}),r.d(t,"e",function(){return c}),r.d(t,"f",function(){return h}),r.d(t,"g",function(){return a}),r.d(t,"h",function(){return d}),r.d(t,"i",function(){return s}),r.d(t,"j",function(){return p}),r.d(t,"k",function(){return o}),r.d(t,"l",function(){return i});var n=r("nvBr");const i={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function s(e,t,r){let n=22,i=22;e<1?n*=.75:e>1&&(i*=1.25);let s=22,a=22;return t&&r&&(n=i=s=a=0),[{type:"path",path:[{command:"M",values:[s,0]},{command:"L",values:[r?s:.875*s,0]},{command:"L",values:[r?n-.5*s:0,i-.5*a]},{command:"L",values:[n-.5*s,i-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,0]},{command:"L",values:[s,t?0:.125*a]},{command:"L",values:[n-.5*s,t?i-.5*a:a]},{command:"L",values:[n-.5*s,i-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[n-.5*s,i-.5*a]},{command:"L",values:[r?n-.5*s:0,i-.5*a]},{command:"L",values:[r?n-.5*s:0,t?i-.5*a:a]},{command:"L",values:[n-.5*s,t?i-.5*a:a]},{command:"Z",values:[]}]}]}function a(e){const t=22,r=.5*e;return[{type:"path",path:[{command:"M",values:[0,.7*t*.5]},{command:"L",values:[6.6,.7*t]},{command:"L",values:[6.6,.7*t+r]},{command:"L",values:[0,.7*t+r-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,.7*t]},{command:"L",values:[6.6,.7*t+r]},{command:"L",values:[t,r]},{command:"L",values:[t,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[6.6,0]},{command:"L",values:[t,0]},{command:"L",values:[6.6,.7*t]},{command:"L",values:[0,.7*t*.5]},{command:"Z",values:[]}]}]}function o(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function l(e,t){let r=t?20:e;const n=t?4:6;r-=r<=22?.5*n:n;const i=t?.35*r:.5*r;return[{type:"path",path:[{command:"M",values:[.5*r,0]},{command:"L",values:[r,.5*i]},{command:"L",values:[.5*r,i]},{command:"L",values:[0,.5*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*i]},{command:"L",values:[.5*r,i]},{command:"L",values:[.5*r,e]},{command:"L",values:[0,e-.5*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*r,i]},{command:"L",values:[.5*r,e]},{command:"L",values:[r,e-.5*i]},{command:"L",values:[r,.5*i]},{command:"Z",values:[]}]}]}function c(e,t){let r=t?20:e;const n=t?4:6;r-=r<=22?.5*n:n;const i=.5*r,s=.15*r,a=e-s;return[{type:"ellipse",cx:.5*r,cy:a,rx:i,ry:s},{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[0,a]},{command:"L",values:[r,a]},{command:"L",values:[r,s]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*r,cy:s,rx:i,ry:s}]}function u(e,t){let r=t?20:e;const n=t?4:6;r-=r<=22?.5*n:n;const i=.15*r,s=e-i;return[{type:"ellipse",cx:.5*r,cy:s,rx:.5*r,ry:i},{type:"path",path:[{command:"M",values:[.5*r,0]},{command:"L",values:[r,s]},{command:"L",values:[0,s]},{command:"Z",values:[]}]}]}function d(e){let t=e;t-=t<22?3:6;const r=.15*t;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[t,0]},{command:"L",values:[.5*t,e-r]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:0,rx:.5*t,ry:r}]}function h(e){let t=e;const r=e;t-=t<22?2:4;const n=t,i=r,s=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*n,0]},{command:"L",values:[n,.5*i-s]},{command:"L",values:[.45*n-s,.5*i+s]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*n,0]},{command:"L",values:[.45*n-s,.5*i+s]},{command:"L",values:[0,.5*i-s]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*i-s]},{command:"L",values:[.45*n-s,.5*i+s]},{command:"L",values:[.45*n,r]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*n,r]},{command:"L",values:[n,.5*i-s]},{command:"L",values:[.45*n-s,.5*i+s]},{command:"Z",values:[]}]}]}function p(e){let t=e;return t-=t<22?1:2,[{type:"path",path:[{command:"M",values:[.45*e,0]},{command:"L",values:[e,t]},{command:"L",values:[.45*e,.6*t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,0]},{command:"L",values:[.45*e,.6*t]},{command:"L",values:[0,t]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,t]},{command:"L",values:[.45*e,.6*t]},{command:"L",values:[e,t]},{command:"Z",values:[]}]}]}function f(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function y(e,t){if("type"in e&&("linear"===e.type||"pattern"===e.type))return e;const r=new n.a(e);return new n.a([f(r.r,t),f(r.g,t),f(r.b,t),r.a])}},IYxN:function(e,t,r){"use strict";r.d(t,"a",function(){return d}),r.d(t,"b",function(){return f}),r.d(t,"c",function(){return h}),r.d(t,"d",function(){return l}),r.d(t,"e",function(){return p}),r.d(t,"f",function(){return c}),r.d(t,"g",function(){return u}),r.d(t,"h",function(){return y});var n=r("srIe"),i=r("SuVq");r("4GrV");var s=r("tODX");const a=new Map,o=new class{constructor(e=15e3,t=5e3){this._timer=null,this._cachedBlocks=new Map,this._size=-1,this._duration=e,this._interval=Math.min(e,t)}decreaseRefCount(e,t){const r=e+"/"+t,n=this._cachedBlocks;if(n.has(r)){const e=n.get(r);return e.refCount--,e.refCount<=0&&(n.delete(r),e.controller&&e.controller.abort()),e.refCount}return 0}getBlock(e,t){const r=e+"/"+t,n=this._cachedBlocks;if(n.has(r)){const e=n.get(r);return e.ts=Date.now(),e.refCount++,n.delete(r),n.set(r,e),e.block}return null}putBlock(e,t,r,n=null){const i=this._cachedBlocks,s=e+"/"+t;if(i.has(s)){const e=i.get(s);e.ts=Date.now(),e.refCount++}else i.set(s,{block:r,ts:Date.now(),refCount:1,controller:n});this.trim(),this.updateTimer()}deleteBlock(e,t){const r=this._cachedBlocks,n=e+"/"+t;r.has(n)&&r.delete(n)}updateMaxSize(e){this._size=e,this.trim()}empty(){this._cachedBlocks.clear(),this.clearTimer()}getCurrentSize(){return this._cachedBlocks.size}updateTimer(){if(null!=this._timer)return;const e=this._cachedBlocks;this._timer=setInterval(()=>{const t=Array.from(e),r=Date.now();for(let n=0;n<t.length&&t[n][1].ts<=r-this._duration;n++)e.delete(t[n][0]);0===e.size&&this.clearTimer()},this._interval)}trim(){const e=this._cachedBlocks;if(-1===this._size||this._size>=e.size)return;const t=Array.from(e);for(let r=0;r<t.length-this._size;r++)e.delete(t[r][0])}clearTimer(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)}};function l(e,t){return null==t?e:`${e}?sliceId=${t}`}function c(e,t){const r={extent:null,rasterInfo:t,cache:new Map};if(a.has(e)){const t=a.get(e);return t.push(r),t.length-1}return a.set(e,[r]),0}function u(e,t){if(a.has(e)){const r=a.get(e);r[t]=null,r.some(e=>null!=e)||a.delete(e)}}function d(e,t,r){if(!a.has(e))return null==t?o.decreaseRefCount(e,r):0;const n=a.get(e);if(null==n[t])return o.decreaseRefCount(e,r);const i=n[t].cache;if(i.has(r)){const e=i.get(r);if(e.refCount--,0===e.refCount){i.delete(r);for(let e=0;e<n.length;e++)n[e]&&n[e].cache.has(r)&&n[e].cache.delete(r);e.controller&&e.controller.abort()}return e.refCount}return 0}function h(e,t,r){if(!a.has(e))return null==t?o.getBlock(e,r):null;const n=a.get(e);if(null==n[t]){for(let e=0;e<n.length;e++)if(n[e]&&n[e].cache.has(r)){const t=n[e].cache.get(r);return t.refCount++,t.block}return o.getBlock(e,r)}const i=n[t].cache;if(i.has(r)){const e=i.get(r);return e.refCount++,e.block}for(let s=0;s<n.length;s++)if(s!==t&&n[s]&&n[s]&&n[s].cache.has(r)){const e=n[s].cache.get(r);return e.refCount++,i.set(r,e),e.block}return null}function p(e,t,r,n,i=null){if(!a.has(e))return void(null==t&&o.putBlock(e,r,n,i));const s=a.get(e);if(null==s[t])return void o.putBlock(e,r,n,i);const l={refCount:1,block:n,isResolved:!1,isRejected:!1,controller:i};n.then(()=>l.isResolved=!0).catch(()=>l.isRejected=!0),s[t].cache.set(r,l)}function f(e,t,r){if(!a.has(e))return void(null==t&&o.deleteBlock(e,r));const n=a.get(e);null!=n[t]?n[t].cache.delete(r):o.deleteBlock(e,r)}function y(e,t,r,o,l,c,u=null){const d=function(e,t){if(!a.has(e))return null;const r=a.get(e);return null==r[t]?null:r[t]}(e,t),h=d.extent,{cache:p,rasterInfo:f}=d;if(h&&h.xmin===r.xmin&&h.xmax===r.xmax&&h.ymin===r.ymin&&h.ymax===r.ymax)return;const y=r.clone().normalize(),{spatialReference:b,transform:m}=f,g=new Set;for(let a=0;a<y.length;a++){const e=y[a];if(e.xmax-e.xmin<=o||e.ymax-e.ymin<=o)continue;let t=Object(s.e)(e,b,u);Object(n.i)(m)&&(t=m.inverseTransform(t));const r=new i.a({x:o,y:o,spatialReference:e.spatialReference});if(null==l&&!(l=Object(s.g)(r,b,e,u)))return;const{pyramidLevel:d,pyramidResolution:h,excessiveReading:p}=Object(s.h)(l,f,c||"closest");if(p)return;const{storageInfo:O}=f,{origin:j}=O,v={x:Math.max(0,Math.floor((t.xmin-j.x)/h.x)),y:Math.max(0,Math.floor((j.y-t.ymax)/h.y))},w=Math.ceil((t.xmax-t.xmin)/h.x-.1),x=Math.ceil((t.ymax-t.ymin)/h.y-.1),I=d>0?O.pyramidBlockWidth:O.blockWidth,S=d>0?O.pyramidBlockHeight:O.blockHeight,_=1,M=Math.max(0,Math.floor(v.x/I)-_),T=Math.max(0,Math.floor(v.y/S)-_),L=Math.floor((v.x+w-1)/I)+_,A=Math.floor((v.y+x-1)/S)+_;for(let n=T;n<=A;n++)for(let e=M;e<=L;e++)g.add(`${d}/${n}/${e}`)}p.forEach((e,t)=>{if(!g.has(t)){const e=p.get(t);(null==e||e.isResolved||e.isRejected)&&p.delete(t)}}),d.extent={xmin:r.xmin,ymin:r.ymin,xmax:r.xmax,ymax:r.ymax}}},IcpP:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return c}),r.d(t,"c",function(){return y}),r.d(t,"d",function(){return d}),r.d(t,"e",function(){return f});var n=r("f4Nx"),i=r("wdpY");class s{constructor(){this.code=null,this.description=null}}class a{constructor(e){this.error=new s,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function o(e){return new a(e)}class l{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function c(e){return new l(e)}const u=new Set;function d(e,t,r,n,s=!1,a){u.clear();for(const l in n){const t=e.get(l);if(!t)continue;const c=n[l],d=h(t,c);if(d!==c&&a&&a.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:t,originalValue:c,sanitizedValue:d}}),u.add(t.name),t&&(s||t.editable)){const e=Object(i.u)(t,d);if(e)return o(Object(i.v)(e,t,d));r[t.name]=d}}for(const i of t)if(!u.has(i.name))return o(`missing required field "${i.name}"`);return null}function h(e,t){let r=t;return"string"==typeof t&&Object(i.q)(e)?r=parseFloat(t):null!=t&&Object(i.r)(e)&&"string"!=typeof t&&(r=String(t)),Object(i.s)(r)}let p;function f(e,t){if(!e||!Object(n.i)(t))return e;if("rings"in e||"paths"in e){if(!p)throw new TypeError("geometry engine not loaded");return p.simplify(t,e)}return e}async function y(e,t){!Object(n.i)(e)||"esriGeometryPolygon"!==t&&"esriGeometryPolyline"!==t||await async function(){return p||(p=await Promise.all([r.e(12),r.e(0),r.e(21)]).then(r.bind(null,"AKzY")),p)}()}},Ilhi:function(e,t,r){"use strict";function n(e,t,r){return t.flatten(({sublayers:e})=>e).length!==e.length||!!e.some(e=>e.originIdOf("minScale")>r||e.originIdOf("maxScale")>r||e.originIdOf("renderer")>r||e.originIdOf("labelingInfo")>r||e.originIdOf("opacity")>r||e.originIdOf("labelsVisible")>r||e.originIdOf("source")>r)||!s(e,t)}function i(e,t,r){return!!e.some(e=>{const t=e.source;return!(!t||"map-layer"===t.type&&t.mapLayerId===e.id&&(!t.gdbVersion||t.gdbVersion===r.gdbVersion))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("opacity")>2||e.originIdOf("labelsVisible")>2})||!s(e,t)}function s(e,t){if(!e||!e.length)return!0;const r=t.slice().reverse().flatten(({sublayers:e})=>e&&e.toArray().reverse()).map(e=>e.id).toArray();if(e.length>r.length)return!1;let n=0;const i=r.length;for(const{id:s}of e){for(;n<i&&r[n]!==s;)n++;if(n>=i)return!1}return!0}function a(e){return!!e&&e.some(e=>null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale)}r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a}),r.d(t,"c",function(){return n})},JYLa:function(e,t,r){"use strict";var n=r("9MzC"),i=r("llFo"),s=r("rlSK");t.a=class{constructor(e){if(e instanceof i.a)this._tilemapCache=e;else{if(!e||!("index"in e))throw new Error("Invalid tilemap!");this._tilemap=e.index}}dataKey(e,t){if(this._tilemapCache){const{level:r,row:i,col:a}=e,o=new s.a(e);return this._tilemapCache.fetchAvailabilityUpsample(r,i,a,o,t).then(()=>(o.world=e.world,o)).catch(e=>{if(Object(n.m)(e))throw e;return null})}return this._getIndexedDataKey(e)}forEach(e,t,r,n,i){this._callback=i,this._maxLevel=t+e,this._forEach(this._tilemap,t,r,n)}_forEach(e,t,r,n){0!==e&&(this._callback(t,r,n),t!==this._maxLevel&&"object"==typeof e&&(this._forEach(e[0],t+1,2*r,2*n),this._forEach(e[1],t+1,2*r,2*n+1),this._forEach(e[2],t+1,2*r+1,2*n),this._forEach(e[3],t+1,2*r+1,2*n+1)))}_getIndexedDataKey(e){const t=[e];if(e.level<0||e.row<0||e.col<0||e.row>>e.level>0||e.col>>e.level>0)return Promise.resolve(null);let r=e;for(;0!==r.level;)r=new s.a(r.level-1,r.row>>1,r.col>>1,r.world),t.push(r);let n,i,a=this._tilemap,o=t.pop();if(1===a)return Promise.resolve(o);for(;t.length;)if(n=t.pop(),i=(1&n.col)+((1&n.row)<<1),a){if(0===a[i]){o=null;break}if(1===a[i]){o=n;break}o=n,a=a[i]}return Promise.resolve(o)}}},Jpjp:function(e,t,r){"use strict";function n(e){return e&&"getAtOrigin"in e&&"originOf"in e}r.d(t,"a",function(){return n})},LTnl:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("yE7X"),i=r("Oxob"),s=r("mgI5");class a extends s.a{get requiresDedicatedFBO(){return this.children.some(e=>"additive"===e.blendFunction)}prepareRenderPasses(e){const t=e.registerRenderPass({name:"bitmap",brushes:[i.a.bitmap],target:()=>this.children,drawPhase:n.c.MAP});return[...super.prepareRenderPasses(e),t]}}},LbAs:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("Lqtk");async function i(e,t){const{data:r}=await Object(n.default)(e,{responseType:"image",...t});return r}},MD9Z:function(e,t,r){"use strict";r.d(t,"a",function(){return f});var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("r88o"),a=r("04ZG"),o=r("4EHJ"),l=(r("ju1D"),r("9AIY"),r("9MzC")),c=r("WZb1"),u=r("OvF4"),d=r("Lqtk"),h=r("VJrH"),p=r("IvSi");const f=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=null}readCapabilities(e,t){const r=t.capabilities&&t.capabilities.split(",").map(e=>e.toLowerCase().trim());if(!r)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const n=this.type,i=-1!==r.indexOf("query"),s=-1!==r.indexOf("map"),a=!!t.exportTilesAllowed,o=-1!==r.indexOf("tilemap"),l="tile"!==n&&!!t.supportsDynamicLayers,c="tile"!==n&&(!t.tileInfo||l),u="tile"!==n&&(!t.tileInfo||l),d="tile"!==n,p=!!t.cimVersion&&h.a.parse(t.cimVersion).since(1,4);return{operations:{supportsQuery:i,supportsExportMap:s,supportsExportTiles:a,supportsTileMap:o},exportMap:s?{supportsArcadeExpressionForLabeling:p,supportsSublayersChanges:d,supportsDynamicLayers:l,supportsSublayerVisibility:c,supportsSublayerDefinitionExpression:u}:null,exportTiles:a?{maxExportTilesCount:+t.maxExportTilesCount}:null}}readVersion(e,t){let r=t.currentVersion;return r||(r=t.hasOwnProperty("capabilities")||t.hasOwnProperty("tables")?10:t.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),r}async fetchSublayerInfo(e,t){return await this.fetchAllLayersAndTables(t),this._allLayersAndTablesMap.get(e)}async fetchAllLayersAndTables(e){await this.load(e),this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=Object(d.default)(Object(o.J)(this.url).path+"/layers",{responseType:"json",query:{f:"json",...this.customParameters}}).then(e=>{this._allLayersAndTablesMap=new Map;for(const t of e.data.layers)this._allLayersAndTablesMap.set(t.id,t);return{result:e.data}},e=>({error:e})));const t=await this._allLayersAndTablesPromise;if(Object(l.u)(e),"result"in t)return t.result;throw t.error}};return Object(n.a)([Object(i.b)({readOnly:!0})],t.prototype,"capabilities",void 0),Object(n.a)([Object(s.a)("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),Object(n.a)([Object(i.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(n.a)([Object(i.b)({type:u.a})],t.prototype,"fullExtent",void 0),Object(n.a)([Object(i.b)(p.c)],t.prototype,"id",void 0),Object(n.a)([Object(i.b)({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),Object(n.a)([Object(i.b)(p.j)],t.prototype,"popupEnabled",void 0),Object(n.a)([Object(i.b)({type:c.a})],t.prototype,"spatialReference",void 0),Object(n.a)([Object(i.b)()],t.prototype,"version",void 0),Object(n.a)([Object(s.a)("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=Object(n.a)([Object(a.a)("esri.layers.mixins.ArcGISMapService")],t),t}},N3sV:function(e,t,r){"use strict";r.d(t,"a",function(){return l}),r("wSAH");var n=r("jjdI"),i=r("fOQB"),s=r("of9L"),a=r("D6bk"),o=r("0meK");async function l(e){const t=new Image;if(t.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A",t.width=5,t.height=5,await t.decode(),!e.gl)return!0;const r=new o.a(e,{colorTarget:0,depthStencilTarget:0},{target:3553,wrapMode:33071,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1}),l=i.a.createVertex(e,35044,new Uint16Array([0,0,1,0,0,1,1,1])),c=new a.a(e,{a_pos:0},{geometry:[{name:"a_pos",count:2,type:5123,offset:0,stride:4,normalized:!1}]},{geometry:l}),u=new n.a(e,"\n  precision highp float;\n\n  attribute vec2 a_pos;\n  varying vec2 v_uv;\n\n  void main() {\n    v_uv = a_pos;\n    gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n  }\n  ","\n  precision highp float;\n\n  varying vec2 v_uv;\n  uniform sampler2D u_texture;\n\n  void main() {\n    gl_FragColor = texture2D(u_texture, v_uv);\n  }\n  ",{a_pos:0});e.bindProgram(u);const d=new s.a(e,{dataType:5121,pixelFormat:6408,preMultiplyAlpha:!1,wrapMode:33071,samplingMode:9729},t);e.bindTexture(d,0),u.setUniform1i("u_texture",0);const h=e.getBoundFramebufferObject(),{x:p,y:f,width:y,height:b}=e.getViewport();e.bindFramebuffer(r),e.setViewport(0,0,1,1),e.bindVAO(c),e.drawArrays(5,0,4);const m=new Uint8Array(4);return r.readPixels(0,0,1,1,6408,5121,m),u.dispose(),c.dispose(!1),l.dispose(),r.dispose(),d.dispose(),e.setViewport(p,f,y,b),e.bindFramebuffer(h),t.src="",255===m[0]}},NOfn:function(e,t,r){"use strict";r.r(t),r.d(t,"registerFunctions",function(){return m});var n=r("N2DF"),i=r("SuVq"),s=r("OvF4"),a=r("V9wi"),o=r("Ehki"),l=r("UhwK"),c=r("qatw"),u=r("975N"),d=r("idrm"),h=r("3xY4"),p=r("hUmP"),f=r("u1HQ");function y(e){return 0===u.d.indexOf("4.")?o.a.fromExtent(e):new o.a({spatialReference:e.spatialReference,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}function b(e){if(Object(d.J)(e,2,2),e[0]instanceof n.a&&e[1]instanceof n.a);else if(e[0]instanceof n.a&&null===e[1]);else if(e[1]instanceof n.a&&null===e[0]);else if(null!==e[0]||null!==e[1])throw new Error("Illegal Argument")}function m(e){"async"===e.mode&&(e.functions.disjoint=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null===r[0]||null===r[1]||Object(f.h)(r[0],r[1])})},e.functions.intersects=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null!==r[0]&&null!==r[1]&&Object(f.q)(r[0],r[1])})},e.functions.touches=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null!==r[0]&&null!==r[1]&&Object(f.A)(r[0],r[1])})},e.functions.crosses=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null!==r[0]&&null!==r[1]&&Object(f.d)(r[0],r[1])})},e.functions.within=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null!==r[0]&&null!==r[1]&&Object(f.C)(r[0],r[1])})},e.functions.contains=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null!==r[0]&&null!==r[1]&&Object(f.c)(r[0],r[1])})},e.functions.overlaps=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null!==r[0]&&null!==r[1]&&Object(f.t)(r[0],r[1])})},e.functions.equals=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return Object(d.J)(r,2,2),r[0]===r[1]||(r[0]instanceof n.a&&r[1]instanceof n.a?Object(f.j)(r[0],r[1]):!(!Object(d.z)(r[0])||!Object(d.z)(r[1]))&&r[0].getTime()===r[1].getTime())})},e.functions.relate=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,3,3),r[0]instanceof n.a&&r[1]instanceof n.a)return Object(f.w)(r[0],r[1],Object(d.y)(r[2]));if(r[0]instanceof n.a&&null===r[1])return!1;if(r[1]instanceof n.a&&null===r[0])return!1;if(null===r[0]&&null===r[1])return!1;throw new Error("Illegal Argument")})},e.functions.intersection=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null===r[0]||null===r[1]?null:Object(f.p)(r[0],r[1])})},e.functions.union=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){const s=[];if(0===(i=Object(d.j)(i)).length)throw new Error("Function called with wrong number of Parameters");if(1===i.length)if(Object(d.B)(i[0])){const e=Object(d.j)(i[0]);for(let t=0;t<e.length;t++)if(null!==e[t]){if(!(e[t]instanceof n.a))throw new Error("Illegal Argument");s.push(e[t])}}else{if(!Object(d.I)(i[0])){if(i[0]instanceof n.a)return Object(d.L)(Object(p.a)(i[0]),t.spatialReference);if(null===i[0])return null;throw new Error("Illegal Argument")}{const e=Object(d.j)(i[0].toArray());for(let t=0;t<e.length;t++)if(null!==e[t]){if(!(e[t]instanceof n.a))throw new Error("Illegal Argument");s.push(e[t])}}}else for(let t=0;t<i.length;t++)if(null!==i[t]){if(!(i[t]instanceof n.a))throw new Error("Illegal Argument");s.push(i[t])}return 0===s.length?null:Object(f.B)(s)})},e.functions.difference=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null!==r[0]&&null===r[1]?Object(p.a)(r[0]):null===r[0]?null:Object(f.g)(r[0],r[1])})},e.functions.symmetricdifference=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){return b(r=Object(d.j)(r)),null===r[0]&&null===r[1]?null:null===r[0]?Object(p.a)(r[1]):null===r[1]?Object(p.a)(r[0]):Object(f.z)(r[0],r[1])})},e.functions.clip=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,2,2),!(r[1]instanceof s.a)&&null!==r[1])throw new Error("Illegal Argument");if(null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");return null===r[1]?null:Object(f.b)(r[0],r[1])})},e.functions.cut=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,2,2),!(r[1]instanceof l.a)&&null!==r[1])throw new Error("Illegal Argument");if(null===r[0])return[];if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");return null===r[1]?[Object(p.a)(r[0])]:Object(f.e)(r[0],r[1])})},e.functions.area=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){if(Object(d.J)(i,1,2),null===(i=Object(d.j)(i))[0])return 0;if(Object(d.T)(i[0]))return i[0].sumArea(Object(p.c)(Object(d.c)(i[1],-1)),!1,t.abortSignal).then(e=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e});if(Object(d.B)(i[0])||Object(d.I)(i[0])){const e=Object(d.l)(i[0],t.spatialReference);return null===e?0:Object(f.u)(e,Object(p.c)(Object(d.c)(i[1],-1)))}if(!(i[0]instanceof n.a))throw new Error("Illegal Argument");return Object(f.u)(i[0],Object(p.c)(Object(d.c)(i[1],-1)))})},e.functions.areageodetic=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){if(Object(d.J)(i,1,2),null===(i=Object(d.j)(i))[0])return 0;if(Object(d.T)(i[0]))return i[0].sumArea(Object(p.c)(Object(d.c)(i[1],-1)),!0,t.abortSignal).then(e=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e});if(Object(d.B)(i[0])||Object(d.I)(i[0])){const e=Object(d.l)(i[0],t.spatialReference);return null===e?0:Object(f.l)(e,Object(p.c)(Object(d.c)(i[1],-1)))}if(!(i[0]instanceof n.a))throw new Error("Illegal Argument");return Object(f.l)(i[0],Object(p.c)(Object(d.c)(i[1],-1)))})},e.functions.length=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){if(Object(d.J)(i,1,2),null===(i=Object(d.j)(i))[0])return 0;if(Object(d.T)(i[0]))return i[0].sumLength(Object(p.b)(Object(d.c)(i[1],-1)),!1,t.abortSignal).then(e=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e});if(Object(d.B)(i[0])||Object(d.I)(i[0])){const e=Object(d.k)(i[0],t.spatialReference);return null===e?0:Object(f.v)(e,Object(p.b)(Object(d.c)(i[1],-1)))}if(!(i[0]instanceof n.a))throw new Error("Illegal Argument");return Object(f.v)(i[0],Object(p.b)(Object(d.c)(i[1],-1)))})},e.functions.lengthgeodetic=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){if(Object(d.J)(i,1,2),null===(i=Object(d.j)(i))[0])return 0;if(Object(d.T)(i[0]))return i[0].sumLength(Object(p.b)(Object(d.c)(i[1],-1)),!0,t.abortSignal).then(e=>{if(t.abortSignal.aborted)throw new Error("Operation has been cancelled.");return e});if(Object(d.B)(i[0])||Object(d.I)(i[0])){const e=Object(d.k)(i[0],t.spatialReference);return null===e?0:Object(f.o)(e,Object(p.b)(Object(d.c)(i[1],-1)))}if(!(i[0]instanceof n.a))throw new Error("Illegal Argument");return Object(f.o)(i[0],Object(p.b)(Object(d.c)(i[1],-1)))})},e.functions.distance=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,i){i=Object(d.j)(i),Object(d.J)(i,2,3);let s=i[0];(Object(d.B)(i[0])||Object(d.I)(i[0]))&&(s=Object(d.o)(i[0],t.spatialReference));let a=i[1];if((Object(d.B)(i[1])||Object(d.I)(i[1]))&&(a=Object(d.o)(i[1],t.spatialReference)),!(s instanceof n.a))throw new Error("Illegal Argument");if(!(a instanceof n.a))throw new Error("Illegal Argument");return Object(f.i)(s,a,Object(p.b)(Object(d.c)(i[2],-1)))})},e.functions.distancegeodetic=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){r=Object(d.j)(r),Object(d.J)(r,2,3);const n=r[0],s=r[1];if(!(n instanceof i.a))throw new Error("Illegal Argument");if(!(s instanceof i.a))throw new Error("Illegal Argument");const a=new l.a({paths:[],spatialReference:n.spatialReference});return a.addPath([n,s]),Object(f.o)(a,Object(p.b)(Object(d.c)(r[2],-1)))})},e.functions.densify=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,2,3),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");const i=Object(d.w)(r[1]);if(isNaN(i))throw new Error("Illegal Argument");if(i<=0)throw new Error("Illegal Argument");return r[0]instanceof o.a||r[0]instanceof l.a?Object(f.f)(r[0],i,Object(p.b)(Object(d.c)(r[2],-1))):r[0]instanceof s.a?Object(f.f)(y(r[0]),i,Object(p.b)(Object(d.c)(r[2],-1))):r[0]})},e.functions.densifygeodetic=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,2,3),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");const i=Object(d.w)(r[1]);if(isNaN(i))throw new Error("Illegal Argument");if(i<=0)throw new Error("Illegal Argument");return r[0]instanceof o.a||r[0]instanceof l.a?Object(f.n)(r[0],i,Object(p.b)(Object(d.c)(r[2],-1))):r[0]instanceof s.a?Object(f.n)(y(r[0]),i,Object(p.b)(Object(d.c)(r[2],-1))):r[0]})},e.functions.generalize=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,2,4),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");const i=Object(d.w)(r[1]);if(isNaN(i))throw new Error("Illegal Argument");return Object(f.k)(r[0],i,Object(d.x)(Object(d.c)(r[2],!0)),Object(p.b)(Object(d.c)(r[3],-1)))})},e.functions.buffer=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,2,3),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");const i=Object(d.w)(r[1]);if(isNaN(i))throw new Error("Illegal Argument");return 0===i?Object(p.a)(r[0]):Object(f.a)(r[0],i,Object(p.b)(Object(d.c)(r[2],-1)))})},e.functions.buffergeodetic=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,2,3),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");const i=Object(d.w)(r[1]);if(isNaN(i))throw new Error("Illegal Argument");return 0===i?Object(p.a)(r[0]):Object(f.m)(r[0],i,Object(p.b)(Object(d.c)(r[2],-1)))})},e.functions.offset=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,2,6),null===r[0])return null;if(!(r[0]instanceof o.a||r[0]instanceof l.a))throw new Error("Illegal Argument");const n=Object(d.w)(r[1]);if(isNaN(n))throw new Error("Illegal Argument");const i=Object(d.w)(Object(d.c)(r[4],10));if(isNaN(i))throw new Error("Illegal Argument");const s=Object(d.w)(Object(d.c)(r[5],0));if(isNaN(s))throw new Error("Illegal Argument");return Object(f.s)(r[0],n,Object(p.b)(Object(d.c)(r[2],-1)),Object(d.y)(Object(d.c)(r[3],"round")).toLowerCase(),i,s)})},e.functions.rotate=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){r=Object(d.j)(r),Object(d.J)(r,2,3);let a=r[0];if(null===a)return null;if(!(a instanceof n.a))throw new Error("Illegal Argument");a instanceof s.a&&(a=o.a.fromExtent(a));const l=Object(d.w)(r[1]);if(isNaN(l))throw new Error("Illegal Argument");const c=Object(d.c)(r[2],null);if(null===c)return Object(f.x)(a,l);if(c instanceof i.a)return Object(f.x)(a,l,c);throw new Error("Illegal Argument")})},e.functions.centroid=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,c){if(c=Object(d.j)(c),Object(d.J)(c,1,1),null===c[0])return null;let u=c[0];if((Object(d.B)(c[0])||Object(d.I)(c[0]))&&(u=Object(d.o)(c[0],t.spatialReference)),null===u)return null;if(!(u instanceof n.a))throw new Error("Illegal Argument");return u instanceof i.a?Object(d.L)(Object(p.a)(c[0]),t.spatialReference):u instanceof o.a?u.centroid:u instanceof l.a?Object(h.f)(u):u instanceof a.a?Object(h.e)(u):u instanceof s.a?u.center:null})},e.functions.multiparttosinglepart=function(t,r){return e.standardFunctionAsync(t,r,function(e,r,u){u=Object(d.j)(u),Object(d.J)(u,1,1);const h=[];if(null===u[0])return null;if(!(u[0]instanceof n.a))throw new Error("Illegal Argument");return u[0]instanceof i.a||u[0]instanceof s.a?[Object(d.L)(Object(p.a)(u[0]),t.spatialReference)]:Object(f.y)(u[0]).then(e=>{if(e instanceof o.a){const t=[],r=[];for(let n=0;n<e.rings.length;n++)if(e.isClockwise(e.rings[n])){const r=Object(c.a)({rings:[e.rings[n]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});t.push(r)}else r.push({ring:e.rings[n],pt:e.getPoint(n,0)});for(let e=0;e<r.length;e++)for(let n=0;n<t.length;n++)if(t[n].contains(r[e].pt)){t[n].addRing(r[e].ring);break}return t}if(e instanceof l.a){const t=[];for(let r=0;r<e.paths.length;r++){const n=Object(c.a)({paths:[e.paths[r]],hasZ:!0===e.hasZ,hazM:!0===e.hasM,spatialReference:e.spatialReference.toJSON()});t.push(n)}return t}if(u[0]instanceof a.a){const e=Object(d.L)(Object(p.a)(u[0]),t.spatialReference);for(let t=0;t<e.points.length;t++)h.push(e.getPoint(t));return h}return null})})},e.functions.issimple=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,1,1),null===r[0])return!0;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");return Object(f.r)(r[0])})},e.functions.simplify=function(t,r){return e.standardFunctionAsync(t,r,function(e,t,r){if(r=Object(d.j)(r),Object(d.J)(r,1,1),null===r[0])return null;if(!(r[0]instanceof n.a))throw new Error("Illegal Argument");return Object(f.y)(r[0])})})}},OYGz:function(e,t,r){"use strict";var n,i=r("pO5D"),s=(r("wSAH"),r("f/qv")),a=(r("6S2I"),r("zqDF"),r("WbKI")),o=r("04ZG"),l=(r("4EHJ"),r("ju1D"),r("9AIY"),r("ag7Y"));let c=n=class extends l.a{constructor(e){super(e)}clone(){return new n({customLayerParameters:Object(s.a)(this.customLayerParameters),customParameters:Object(s.a)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};Object(i.a)([Object(a.b)({json:{type:Object,write:!0}})],c.prototype,"customLayerParameters",void 0),Object(i.a)([Object(a.b)({json:{type:Object,write:!0}})],c.prototype,"customParameters",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"layerIdentifier",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"tileMatrixSet",void 0),Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],c.prototype,"url",void 0),c=n=Object(i.a)([Object(o.a)("esri.layer.support.WMTSLayerInfo")],c),t.a=c},OvWd:function(e,t,r){"use strict";r.d(t,"a",function(){return d});var n=r("pO5D"),i=(r("wSAH"),r("nR38")),s=r("srIe"),a=(r("6S2I"),r("zqDF"),r("WbKI"),r("04ZG")),o=r("zlDU"),l=r("4EHJ"),c=(r("ju1D"),r("9AIY"),r("Lqtk")),u=r("kglp");const d=e=>{let t=class extends e{async getServiceDescription(e){return this._serviceDescriptionPromise||(this._serviceDescriptionPromise=this._fetchServiceDescription(e)),this._serviceDescriptionPromise}async _fetchServiceDescription(e){if(!this.url||!this.parsedUrl)throw new o.a("network-service:missing-url","Url to Network service is missing");const t=this.url,{data:r}=await Object(c.default)(t,{query:{f:"json",token:e}});r.supportedTravelModes||(r.supportedTravelModes=[]);for(let i=0;i<r.supportedTravelModes.length;i++)r.supportedTravelModes[i].id||(r.supportedTravelModes[i].id=r.supportedTravelModes[i].itemId);const n=r.currentVersion>=10.4?async function(e,t){try{const{data:{supportedTravelModes:r,defaultTravelMode:n}}=await Object(c.default)(e+("/"===e[e.length-1]?"":"/")+"retrieveTravelModes",{query:{f:"json",token:t}});return{supportedTravelModes:r,defaultTravelMode:n}}catch(r){throw new o.a("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:r})}}(t,e):async function(e,t){const{data:r}=await Object(c.default)(e.substring(0,e.indexOf("/rest/")+6)+"info",{query:{f:"json",token:t}});if(!r||!r.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};e=r.owningSystemUrl;const{data:n}=await Object(c.default)(e+("/"===e[e.length-1]?"":"/")+"sharing/rest/portals/self",{query:{f:"json",token:t}}),s=Object(i.b)("helperServices.routingUtilities.url",n);if(!s)return{supportedTravelModes:[],defaultTravelMode:null};const a=Object(l.J)(e),o=/\/solveClosestFacility$/.test(a.path)?"Route":/\/solveClosestFacility$/.test(a.path)?"ClosestFacility":"ServiceAreas",u=await Object(c.default)(s+("/"===s[s.length-1]?"":"/")+"GetTravelModes/execute",{query:{f:"json",serviceName:o,token:t}}),d=[];let h=null;if(u&&u.data&&u.data.results&&u.data.results.length){const e=u.data.results;for(const t of e)if("supportedTravelModes"===t.paramName){if(t.value&&t.value.features)for(const{attributes:e}of t.value.features)if(e){const t=JSON.parse(e.TravelMode);d.push(t)}}else"defaultTravelMode"===t.paramName&&(h=t.value)}return{supportedTravelModes:d,defaultTravelMode:h}}(t,e),{defaultTravelMode:s,supportedTravelModes:a}=await n;return r.defaultTravelMode=s,r.supportedTravelModes=a,r}_isInputGeometryZAware(e,t){for(let r=0;r<t.length;r++){const n=e[t[r]];if(n&&n.length)for(const e of n)if(Object(s.i)(e)&&e.hasZ)return!0}return!1}_dropZValuesOffInputGeometry(e,t){for(let r=0;r<t.length;r++){const n=e[t[r]];if(n&&n.length)for(const e of n)e.z=void 0}console.log("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}};return t=Object(n.a)([Object(a.a)("esri.tasks.mixins.NAServiceDescription")],t),t};let h=class extends(d(u.a)){};h=Object(n.a)([Object(a.a)("esri.tasks.mixins.NAServiceDescription")],h)},"R/jG":function(e,t,r){"use strict";function n(){return new Float32Array(3)}function i(e,t,r){const n=new Float32Array(3);return n[0]=e,n[1]=t,n[2]=r,n}function s(){return n()}function a(){return i(1,1,1)}function o(){return i(1,0,0)}function l(){return i(0,1,0)}function c(){return i(0,0,1)}r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i});const u=s(),d=a(),h=o(),p=l(),f=c();Object.freeze({__proto__:null,create:n,clone:function(e){const t=new Float32Array(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},fromValues:i,createView:function(e,t){return new Float32Array(e,t,3)},zeros:s,ones:a,unitX:o,unitY:l,unitZ:c,ZEROS:u,ONES:d,UNIT_X:h,UNIT_Y:p,UNIT_Z:f})},S60b:function(e,t,r){"use strict";r.d(t,"a",function(){return z}),r.d(t,"b",function(){return U});var n=r("wSAH"),i=r("zlDU"),s=r("975N"),a=r("Lqtk"),o=r("0ynT"),l=(r("5sKF"),r("aelY")),c=(r("6S2I"),r("nvBr")),u=(r("cCpn"),r("Jv1m")),d=r("opr1"),h=r("LGNZ");let p=0,f=0;const y=Object(n.a)("android"),b=Object(n.a)("chrome")||y&&y>=4?"auto":"optimizeLegibility",m={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},g=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let O={},j={};const v={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},w=Math.PI;function x(e,t){const r=e*(w/180);return Math.abs(t*Math.sin(r))+Math.abs(t*Math.cos(r))}function I(e){return e.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function S(e,t,r,n){if(e){if("circle"===e.type)return Object(u.a)("circle",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,r:e.r});if("ellipse"===e.type)return Object(u.a)("ellipse",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry});if("rect"===e.type)return Object(u.a)("rect",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",x:e.x,y:e.y,width:e.width,height:e.height});if("image"===e.type)return Object(u.a)("image",{href:e.src,x:e.x,y:e.y,width:e.width,height:e.height,preserveAspectRatio:"none"});if("path"===e.type){const n="string"!=typeof e.path?I(e.path):e.path;return Object(u.a)("path",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4",d:n})}if("text"===e.type)return Object(u.a)("text",{fill:t,"fill-rule":"evenodd",stroke:r.color,"stroke-width":r.width,"stroke-linecap":r.cap,"stroke-linejoin":r.join,"stroke-dasharray":r.dashArray,"stroke-miterlimit":"4","text-anchor":n.align,"text-decoration":n.decoration,kerning:n.kerning,rotate:n.rotate,"text-rendering":b,"font-style":n.font.style,"font-variant":n.font.variant,"font-weight":n.font.weight,"font-size":n.font.size,"font-family":n.font.family,x:e.x,y:e.y},e.text)}return null}function _(e){const t={fill:"none",pattern:null,linearGradient:null};if(e)if("type"in e&&"pattern"===e.type){const r="patternId-"+ ++p;t.fill=`url(#${r})`,t.pattern={id:r,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&"linear"===e.type){const r="linearGradientId-"+ ++f;t.fill=`url(#${r})`,t.linearGradient={id:r,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(e=>({offset:e.offset,color:e.color&&new c.a(e.color).toString()}))}}else if(e){const r=new c.a(e);t.fill=r.toString()}return t}function M(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none"};if(e&&(null!=e.width&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new c.a(e.color).toString()),e.style)){let r=null;if(e.style in v&&(r=v[e.style]),Array.isArray(r)){r=r.slice(0);for(let t=0;t<r.length;++t)r[t]*=e.width;if("butt"!==e.cap){for(let t=0;t<r.length;t+=2)r[t]-=e.width,r[t]<1&&(r[t]=1);for(let t=1;t<r.length;t+=2)r[t]+=e.width}r=r.join(",")}t.dashArray=r}return t}function T(e,t){const r={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};return e&&(r.align=e.align,r.decoration=e.decoration,r.kerning=e.kerning?"auto":"0",r.rotate=e.rotated?"90":"0",r.font.style=t.style||"normal",r.font.variant=t.variant||"normal",r.font.weight=t.weight||"normal",r.font.size=t.size&&t.size.toString()||"10pt",r.font.family=t.family||"serif"),r}function L(e){const{pattern:t,linearGradient:r}=e;if(t)return Object(u.a)("pattern",{id:t.id,patternUnits:"userSpaceOnUse",x:t.x,y:t.y,width:t.width,height:t.height},Object(u.a)("image",{x:t.image.x,y:t.image.y,width:t.image.width,height:t.image.height,href:t.image.href}));if(r){const e=r.stops.map((e,t)=>Object(u.a)("stop",{key:`${t}-stop`,offset:e.offset,"stop-color":e.color}));return Object(u.a)("linearGradient",{id:r.id,gradientUnits:"userSpaceOnUse",x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},e)}return null}function A(e,t,r){return Object(d.h)(e,Object(d.d)(e),[t,r])}function E(e,t,r,n,i){return Object(d.g)(e,Object(d.d)(e),[t,r]),e[4]=e[4]*t-n*t+n,e[5]=e[5]*r-i*r+i,e}function B(e,t){O&&"left"in O?(O.left>e&&(O.left=e),O.right<e&&(O.right=e),O.top>t&&(O.top=t),O.bottom<t&&(O.bottom=t)):O={left:e,bottom:t,right:e,top:t}}function F(e){const t=e.args,r=t.length;let n;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(n=0;n<r;n+=2)B(t[n],t[n+1]);j.x=t[r-2],j.y=t[r-1];break;case"H":for(n=0;n<r;++n)B(t[n],j.y);j.x=t[r-1];break;case"V":for(n=0;n<r;++n)B(j.x,t[n]);j.y=t[r-1];break;case"m":{let e=0;"x"in j||(B(j.x=t[0],j.y=t[1]),e=2);for(n=e;n<r;n+=2)B(j.x+=t[n],j.y+=t[n+1]);break}case"l":case"t":for(n=0;n<r;n+=2)B(j.x+=t[n],j.y+=t[n+1]);break;case"h":for(n=0;n<r;++n)B(j.x+=t[n],j.y);break;case"v":for(n=0;n<r;++n)B(j.x,j.y+=t[n]);break;case"c":for(n=0;n<r;n+=6)B(j.x+t[n],j.y+t[n+1]),B(j.x+t[n+2],j.y+t[n+3]),B(j.x+=t[n+4],j.y+=t[n+5]);break;case"s":case"q":for(n=0;n<r;n+=4)B(j.x+t[n],j.y+t[n+1]),B(j.x+=t[n+2],j.y+=t[n+3]);break;case"A":for(n=0;n<r;n+=7)B(t[n+5],t[n+6]);j.x=t[r-2],j.y=t[r-1];break;case"a":for(n=0;n<r;n+=7)B(j.x+=t[n+5],j.y+=t[n+6])}}function P(e,t,r){const n=m[e.toLowerCase()];let i;"number"==typeof n&&(n?t.length>=n&&(i={action:e,args:t.slice(0,t.length-t.length%n)},r.push(i),F(i)):(i={action:e,args:[]},r.push(i),F(i)))}function D(e){const t={x:0,y:0,width:0,height:0};if("circle"===e.type)t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if("ellipse"===e.type)t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if("image"===e.type||"rect"===e.type)t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if("path"===e.type){const r=function(e){const t=("string"!=typeof e.path?I(e.path):e.path).match(g),r=[];if(O={},j={},!t)return null;let n="",i=[];const s=t.length;for(let o=0;o<s;++o){const e=t[o],s=parseFloat(e);isNaN(s)?(n&&P(n,i,r),i=[],n=e):i.push(s)}P(n,i,r);const a={x:0,y:0,width:0,height:0};return O&&"left"in O&&(a.x=O.left,a.y=O.top,a.width=O.right-O.left,a.height=O.bottom-O.top),a}(e);t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height}return t}function R(e){const t={x:0,y:0,width:0,height:0};let r=null,n=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(const s of e)r?(r.x=Math.min(r.x,s.x),r.y=Math.min(r.y,s.y),n=Math.max(n,s.x+s.width),i=Math.max(i,s.y+s.height)):(r=t,r.x=s.x,r.y=s.y,n=s.x+s.width,i=s.y+s.height);return r&&(r.width=n-r.x,r.height=i-r.y),r}function C(e,t,r,n,i,s,a,o){const l=(a&&s?x(s,t):t)/2,c=(a&&s?x(s,r):r)/2,u=e.width+n,p=e.height+n,f=Object(h.a)(),y=Object(h.a)();let b=!1;if(i&&0!==u&&0!==p){const e=u/p,n=t>r?t:r;let i=1,s=1;isNaN(n)||(e>1?(i=n/u,s=n/e/p):(s=n/p,i=n*e/u)),Object(d.e)(y,y,E(f,i,s,l,c)),b=!0}const m=e.x+(u-n)/2,g=e.y+(p-n)/2;if(Object(d.e)(y,y,A(f,l-m,c-g)),!b&&(u>t||p>r)){const e=u/t>p/r,n=(e?t:r)/(e?u:p);Object(d.e)(y,y,E(f,n,n,m,g))}return s&&Object(d.e)(y,y,function(e,t,r,n){const i=t%360*Math.PI/180;Object(d.f)(e,Object(d.d)(e),i);const s=Math.cos(i),a=Math.sin(i),o=e[4],l=e[5];return e[4]=o*s-l*a+n*a-r*s+r,e[5]=l*s+o*a-r*a-n*s+n,e}(f,s,m,g)),o&&Object(d.e)(y,y,A(f,o[0],o[1])),`matrix(${y[0]},${y[1]},${y[2]},${y[3]},${y[4]},${y[5]})`}function N(e,t,r,n){const i=[],s=[];for(const a of e){const e=[],o=[];let l=0,c=0,d=0;for(const t of a){const{shape:r,fill:n,stroke:s,font:a,offset:u}=t;l+=s&&s.width||0;const h=_(n),p=M(s),f="text"===r.type?T(r,a):null;i.push(L(h)),e.push(S(r,h.fill,p,f)),o.push(D(r)),u&&(c+=u[0],d+=u[1])}const h=C(R(o),t,r,l,null==n?void 0:n.scale,null==n?void 0:n.rotation,null==n?void 0:n.useRotationSize,[c,d]);s.push(Object(u.a)("g",{transform:h},e))}return null!=n&&n.useRotationSize&&null!=n&&n.rotation&&(t=x(null==n?void 0:n.rotation,t),r=x(null==n?void 0:n.rotation,r)),Object(u.a)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:r},Object(u.a)("defs",null,i),s)}const k=Object(l.a)();function z(e,t,r){const n=Math.ceil(t[0]),i=Math.ceil(t[1]);if(!e.some(e=>!!e.length))return null;const s=r&&r.node||document.createElement("div");return null!=r.opacity&&(s.style.opacity=r.opacity.toString()),k.append(s,N.bind(null,e,n,i,r)),s}function q(e,t,r,n,i){switch(i){case"multiply":e[t+0]*=r[0],e[t+1]*=r[1],e[t+2]*=r[2],e[t+3]*=r[3];break;default:{const i=Object(o.a)({r:e[t+0],g:e[t+1],b:e[t+2]});i.h=n.h,i.s=n.s,i.v=i.v/100*n.v;const s=Object(o.d)(i);e[t+0]=s.r,e[t+1]=s.g,e[t+2]=s.b,e[t+3]*=r[3];break}}}function U(e,t,r,l,c){return(u=e,d=t,h=c,u?Object(a.default)(u,{responseType:"image"}).then(e=>{const t=e.data,r=t.width,n=t.height,i=r/n;let s=d;if(h){const e=Math.max(r,n);s=Math.min(s,e)}return{image:t,width:i<=1?Math.ceil(s*i):s,height:i<=1?s:Math.ceil(s/i)}}):Promise.reject(new i.a("renderUtils: imageDataSize","href not provided."))).then(i=>{const a=i.width?i.width:t,c=i.height?i.height:t;if(i.image&&function(e,t){return!(!e||"ignore"===t||"multiply"===t&&255===e.r&&255===e.g&&255===e.b&&1===e.a)}(r,l)){let t=i.image.width,s=i.image.height;(Object(n.a)("edge")||Object(n.a)("ie"))&&/\.svg$/i.test(e)&&(t-=1,s-=1);const u=function(e,t){e=Math.ceil(e),t=Math.ceil(t);const r=document.createElement("canvas");r.width=e,r.height=t,r.style.width=e+"px",r.style.height=t+"px";const n=r.getContext("2d");return n.clearRect(0,0,e,t),n}(a,c);u.drawImage(i.image,0,0,t,s,0,0,a,c);const d=u.getImageData(0,0,a,c),h=[r.r/255,r.g/255,r.b/255,r.a],p=Object(o.a)(r);for(let e=0;e<d.data.length;e+=4)q(d.data,e,h,p,l);u.putImageData(d,0,0),e=u.canvas.toDataURL("image/png")}else{const t=s.b&&s.b.findCredential(e);if(t&&t.token){const r=-1===e.indexOf("?")?"?":"&";e=`${e}${r}token=${t.token}`}}return{url:e,width:a,height:c}}).catch(function(){return{url:e,width:t,height:t}});var u,d,h}},SaAm:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("gEht");function i(e,t){const r=t||e.extent,i=e.width,s=Object(n.d)(r&&r.spatialReference);return r&&i?r.width/i*s*n.h*96:0}},Tg0p:function(e,t,r){"use strict";var n,i=r("pO5D"),s=(r("wSAH"),r("f/qv")),a=(r("6S2I"),r("zqDF")),o=r("WbKI"),l=r("RI0u"),c=r("04ZG"),u=(r("4EHJ"),r("ju1D"),r("9AIY"),r("dzHX")),d=r("1hFN"),h=r("ag7Y"),p=r("nvBr");let f=n=class extends h.a{constructor(){super(...arguments),this.description=null,this.label=null,this.minValue=0,this.maxValue=0,this.color=null}clone(){return new n({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,color:Object(s.a)(this.color)})}};Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,"description",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,"label",void 0),Object(i.a)([Object(o.b)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],f.prototype,"minValue",void 0),Object(i.a)([Object(o.b)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],f.prototype,"maxValue",void 0),Object(i.a)([Object(o.b)({type:p.a,json:{type:[a.a],write:!0}})],f.prototype,"color",void 0),f=n=Object(i.a)([Object(c.a)("esri.renderers.support.pointCloud.ColorClassBreakInfo")],f);var y,b=f;let m=y=class extends u.a{constructor(e){super(e),this.type="point-cloud-class-breaks",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.colorClassBreakInfos=null}clone(){return new y({...this.cloneProperties(),field:this.field,fieldTransformType:this.fieldTransformType,colorClassBreakInfos:Object(s.a)(this.colorClassBreakInfos),legendOptions:Object(s.a)(this.legendOptions)})}};Object(i.a)([Object(l.a)({pointCloudClassBreaksRenderer:"point-cloud-class-breaks"})],m.prototype,"type",void 0),Object(i.a)([Object(o.b)({json:{write:!0},type:String})],m.prototype,"field",void 0),Object(i.a)([Object(o.b)({type:d.a,json:{write:!0}})],m.prototype,"legendOptions",void 0),Object(i.a)([Object(o.b)({type:u.a.fieldTransformTypeKebabDict.apiValues,json:{type:u.a.fieldTransformTypeKebabDict.jsonValues,read:u.a.fieldTransformTypeKebabDict.read,write:u.a.fieldTransformTypeKebabDict.write}})],m.prototype,"fieldTransformType",void 0),Object(i.a)([Object(o.b)({type:[b],json:{write:!0}})],m.prototype,"colorClassBreakInfos",void 0),m=y=Object(i.a)([Object(c.a)("esri.renderers.PointCloudClassBreaksRenderer")],m),t.a=m},V4u7:function(e,t,r){"use strict";var n,i=r("pO5D"),s=(r("wSAH"),r("f/qv")),a=(r("6S2I"),r("zqDF"),r("WbKI")),o=r("RI0u"),l=r("04ZG"),c=(r("4EHJ"),r("ju1D"),r("9AIY"),r("dzHX")),u=r("1hFN"),d=r("P2CQ");let h=n=class extends c.a{constructor(e){super(e),this.type="point-cloud-stretch",this.field=null,this.legendOptions=null,this.fieldTransformType=null,this.stops=null}clone(){return new n({...this.cloneProperties(),field:Object(s.a)(this.field),fieldTransformType:Object(s.a)(this.fieldTransformType),stops:Object(s.a)(this.stops),legendOptions:Object(s.a)(this.legendOptions)})}};Object(i.a)([Object(o.a)({pointCloudStretchRenderer:"point-cloud-stretch"})],h.prototype,"type",void 0),Object(i.a)([Object(a.b)({json:{write:!0},type:String})],h.prototype,"field",void 0),Object(i.a)([Object(a.b)({type:u.a,json:{write:!0}})],h.prototype,"legendOptions",void 0),Object(i.a)([Object(a.b)({type:c.a.fieldTransformTypeKebabDict.apiValues,json:{type:c.a.fieldTransformTypeKebabDict.jsonValues,read:c.a.fieldTransformTypeKebabDict.read,write:c.a.fieldTransformTypeKebabDict.write}})],h.prototype,"fieldTransformType",void 0),Object(i.a)([Object(a.b)({type:[d.a],json:{write:!0}})],h.prototype,"stops",void 0),h=n=Object(i.a)([Object(l.a)("esri.renderers.PointCloudStretchRenderer")],h),t.a=h},VJrH:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("zlDU");class i{constructor(e,t,r=""){this.major=e,this.minor=t,this._context=r}lessThan(e,t){return this.major<e||e===this.major&&this.minor<t}since(e,t){return!this.lessThan(e,t)}validate(e){if(this.major!==e.major)throw new n.a((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}clone(){return new i(this.major,this.minor,this._context)}static parse(e,t=""){const[r,s]=e.split("."),a=/^\s*\d+\s*$/;if(!r||!r.match||!r.match(a))throw new n.a((t&&t+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!s||!s.match||!s.match(a))throw new n.a((t&&t+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(r,10),l=parseInt(s,10);return new i(o,l,t)}}},VeZB:function(e,t,r){"use strict";r.d(t,"a",function(){return h}),r.d(t,"b",function(){return j}),r.d(t,"c",function(){return z}),r.d(t,"d",function(){return G}),r.d(t,"e",function(){return R}),r.d(t,"f",function(){return b}),r.d(t,"g",function(){return m}),r.d(t,"h",function(){return g}),r.d(t,"i",function(){return O}),r.d(t,"j",function(){return T}),r.d(t,"k",function(){return B}),r.d(t,"l",function(){return I}),r.d(t,"m",function(){return p}),r.d(t,"n",function(){return v}),r.d(t,"o",function(){return q}),r.d(t,"p",function(){return Y}),r.d(t,"q",function(){return C}),r.d(t,"r",function(){return L}),r.d(t,"s",function(){return F}),r.d(t,"t",function(){return S}),r.d(t,"u",function(){return f}),r.d(t,"v",function(){return w}),r.d(t,"w",function(){return U}),r.d(t,"x",function(){return J}),r.d(t,"y",function(){return N}),r.d(t,"z",function(){return A}),r.d(t,"A",function(){return P}),r.d(t,"B",function(){return _}),r.d(t,"C",function(){return y}),r.d(t,"D",function(){return x}),r.d(t,"E",function(){return V}),r.d(t,"F",function(){return Z}),r.d(t,"G",function(){return k}),r.d(t,"H",function(){return E}),r.d(t,"I",function(){return D}),r.d(t,"J",function(){return M});class n{constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.elementCount=9;const s=this.TypedArrayConstructor;void 0===n&&(n=9*s.BYTES_PER_ELEMENT);const a=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,a):new s(t,a,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getMat(e,t){const r=e*this.typedBufferStride;for(let n=0;n<9;n++)t[n]=this.typedBuffer[r+n];return t}setMat(e,t){const r=e*this.typedBufferStride;for(let n=0;n<9;n++)this.typedBuffer[r+n]=t[n]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}copyFrom(e,t,r){const n=this.typedBuffer,i=t.typedBuffer,s=e*this.typedBufferStride,a=r*t.typedBufferStride;for(let o=0;o<9;++o)n[s+o]=i[a+o]}get buffer(){return this.typedBuffer.buffer}}n.ElementCount=9;class i{constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.elementCount=16;const s=this.TypedArrayConstructor;void 0===n&&(n=16*s.BYTES_PER_ELEMENT);const a=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,a):new s(t,a,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getMat(e,t){const r=e*this.typedBufferStride;for(let n=0;n<16;n++)t[n]=this.typedBuffer[r+n];return t}setMat(e,t){const r=e*this.typedBufferStride;for(let n=0;n<16;n++)this.typedBuffer[r+n]=t[n]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}copyFrom(e,t,r){const n=this.typedBuffer,i=t.typedBuffer,s=e*this.typedBufferStride,a=r*t.typedBufferStride;for(let o=0;o<16;++o)n[s+o]=i[a+o]}get buffer(){return this.typedBuffer.buffer}}i.ElementCount=16;class s{constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.elementCount=1;const s=this.TypedArrayConstructor;void 0===n&&(n=s.BYTES_PER_ELEMENT);const a=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,a):new s(t,a,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}get(e){return this.typedBuffer[e*this.typedBufferStride]}set(e,t){this.typedBuffer[e*this.typedBufferStride]=t}get buffer(){return this.typedBuffer.buffer}}s.ElementCount=1;var a=r("M0lq");class o{constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.elementCount=2;const s=this.TypedArrayConstructor;void 0===n&&(n=2*s.BYTES_PER_ELEMENT);const a=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,a):new s(t,a,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getVec(e,t){return Object(a.m)(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1])}setVec(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r){this.typedBuffer[e*this.typedBufferStride]=t,this.typedBuffer[e*this.typedBufferStride+1]=r}copyFrom(e,t,r){const n=this.typedBuffer,i=t.typedBuffer,s=e*this.typedBufferStride,a=r*t.typedBufferStride;n[s]=i[a],n[s+1]=i[a+1]}get buffer(){return this.typedBuffer.buffer}}o.ElementCount=2;var l=r("5DEt");class c{constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.elementCount=3;const s=this.TypedArrayConstructor;void 0===n&&(n=3*s.BYTES_PER_ELEMENT);const a=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,a):new s(t,a,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getVec(e,t){return Object(l.r)(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1],this.typedBuffer[e*this.typedBufferStride+2])}setVec(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1],this.typedBuffer[e*this.typedBufferStride+2]=t[2]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r,n){this.typedBuffer[e*this.typedBufferStride]=t,this.typedBuffer[e*this.typedBufferStride+1]=r,this.typedBuffer[e*this.typedBufferStride+2]=n}copyFrom(e,t,r){const n=this.typedBuffer,i=t.typedBuffer,s=e*this.typedBufferStride,a=r*t.typedBufferStride;n[s]=i[a],n[s+1]=i[a+1],n[s+2]=i[a+2]}get buffer(){return this.typedBuffer.buffer}}c.ElementCount=3;var u=r("dXfX");class d{constructor(e,t,r=0,n,i){this.TypedArrayConstructor=e,this.elementCount=4;const s=this.TypedArrayConstructor;void 0===n&&(n=4*s.BYTES_PER_ELEMENT);const a=0===t.byteLength?0:r;this.typedBuffer=null==i?new s(t,a):new s(t,a,(i-r)/s.BYTES_PER_ELEMENT),this.typedBufferStride=n/s.BYTES_PER_ELEMENT,this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride),this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}getVec(e,t){return Object(u.k)(t,this.typedBuffer[e*this.typedBufferStride],this.typedBuffer[e*this.typedBufferStride+1],this.typedBuffer[e*this.typedBufferStride+2],this.typedBuffer[e*this.typedBufferStride+3])}setVec(e,t){this.typedBuffer[e*this.typedBufferStride]=t[0],this.typedBuffer[e*this.typedBufferStride+1]=t[1],this.typedBuffer[e*this.typedBufferStride+2]=t[2],this.typedBuffer[e*this.typedBufferStride+3]=t[3]}get(e,t){return this.typedBuffer[e*this.typedBufferStride+t]}set(e,t,r){this.typedBuffer[e*this.typedBufferStride+t]=r}setValues(e,t,r,n,i){this.typedBuffer[e*this.typedBufferStride]=t,this.typedBuffer[e*this.typedBufferStride+1]=r,this.typedBuffer[e*this.typedBufferStride+2]=n,this.typedBuffer[e*this.typedBufferStride+3]=i}copyFrom(e,t,r){const n=this.typedBuffer,i=t.typedBuffer,s=e*this.typedBufferStride,a=r*t.typedBufferStride;n[s]=i[a],n[s+1]=i[a+1],n[s+2]=i[a+2],n[s+3]=i[a+3]}get buffer(){return this.typedBuffer.buffer}}d.ElementCount=4;class h extends s{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}static fromTypedArray(e,t){return new h(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}h.ElementType="f32";class p extends o{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}static fromTypedArray(e,t){return new p(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}p.ElementType="f32";class f extends c{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}static fromTypedArray(e,t){return new f(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}f.ElementType="f32";class y extends d{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}static fromTypedArray(e,t){return new y(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}y.ElementType="f32";class b extends n{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}static fromTypedArray(e,t){return new b(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}b.ElementType="f32";class m extends n{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}static fromTypedArray(e,t){return new m(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}m.ElementType="f64";class g extends i{constructor(e,t=0,r,n){super(Float32Array,e,t,r,n),this.elementType="f32"}static fromTypedArray(e,t){return new g(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}g.ElementType="f32";class O extends i{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}static fromTypedArray(e,t){return new O(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}O.ElementType="f64";class j extends s{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}static fromTypedArray(e,t){return new j(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}j.ElementType="f64";class v extends o{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}static fromTypedArray(e,t){return new v(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}v.ElementType="f64";class w extends c{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}static fromTypedArray(e,t){return new w(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}w.ElementType="f64";class x extends d{constructor(e,t=0,r,n){super(Float64Array,e,t,r,n),this.elementType="f64"}static fromTypedArray(e,t){return new x(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}x.ElementType="f64";class I extends s{constructor(e,t=0,r,n){super(Uint8Array,e,t,r,n),this.elementType="u8"}static fromTypedArray(e,t){return new I(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}I.ElementType="u8";class S extends o{constructor(e,t=0,r,n){super(Uint8Array,e,t,r,n),this.elementType="u8"}static fromTypedArray(e,t){return new S(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}S.ElementType="u8";class _ extends c{constructor(e,t=0,r,n){super(Uint8Array,e,t,r,n),this.elementType="u8"}static fromTypedArray(e,t){return new _(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}_.ElementType="u8";class M extends d{constructor(e,t=0,r,n){super(Uint8Array,e,t,r,n),this.elementType="u8"}static fromTypedArray(e,t){return new M(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}M.ElementType="u8";class T extends s{constructor(e,t=0,r,n){super(Uint16Array,e,t,r,n),this.elementType="u16"}static fromTypedArray(e,t){return new T(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}T.ElementType="u16";class L extends o{constructor(e,t=0,r,n){super(Uint16Array,e,t,r,n),this.elementType="u16"}static fromTypedArray(e,t){return new L(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}L.ElementType="u16";class A extends c{constructor(e,t=0,r,n){super(Uint16Array,e,t,r,n),this.elementType="u16"}static fromTypedArray(e,t){return new A(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}A.ElementType="u16";class E extends d{constructor(e,t=0,r,n){super(Uint16Array,e,t,r,n),this.elementType="u16"}static fromTypedArray(e,t){return new E(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}E.ElementType="u16";class B extends s{constructor(e,t=0,r,n){super(Uint32Array,e,t,r,n),this.elementType="u32"}static fromTypedArray(e,t){return new B(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}B.ElementType="u32";class F extends o{constructor(e,t=0,r,n){super(Uint32Array,e,t,r,n),this.elementType="u32"}static fromTypedArray(e,t){return new F(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}F.ElementType="u32";class P extends c{constructor(e,t=0,r,n){super(Uint32Array,e,t,r,n),this.elementType="u32"}static fromTypedArray(e,t){return new P(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}P.ElementType="u32";class D extends d{constructor(e,t=0,r,n){super(Uint32Array,e,t,r,n),this.elementType="u32"}static fromTypedArray(e,t){return new D(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}D.ElementType="u32";class R extends s{constructor(e,t=0,r,n){super(Int8Array,e,t,r,n),this.elementType="i8"}static fromTypedArray(e,t){return new R(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}R.ElementType="i8";class C extends o{constructor(e,t=0,r,n){super(Int8Array,e,t,r,n),this.elementType="i8"}static fromTypedArray(e,t){return new C(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}C.ElementType="i8";class N extends c{constructor(e,t=0,r,n){super(Int8Array,e,t,r,n),this.elementType="i8"}static fromTypedArray(e,t){return new N(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}N.ElementType="i8";class k extends d{constructor(e,t=0,r,n){super(Int8Array,e,t,r,n),this.elementType="i8"}static fromTypedArray(e,t){return new k(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}k.ElementType="i8";class z extends s{constructor(e,t=0,r,n){super(Int16Array,e,t,r,n),this.elementType="i16"}static fromTypedArray(e,t){return new z(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}z.ElementType="i16";class q extends o{constructor(e,t=0,r,n){super(Int16Array,e,t,r,n),this.elementType="i16"}static fromTypedArray(e,t){return new q(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}q.ElementType="i16";class U extends c{constructor(e,t=0,r,n){super(Int16Array,e,t,r,n),this.elementType="i16"}static fromTypedArray(e,t){return new U(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}U.ElementType="i16";class V extends d{constructor(e,t=0,r,n){super(Int16Array,e,t,r,n),this.elementType="i16"}static fromTypedArray(e,t){return new V(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}V.ElementType="i16";class G extends s{constructor(e,t=0,r,n){super(Int32Array,e,t,r,n),this.elementType="i32"}static fromTypedArray(e,t){return new G(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}G.ElementType="i32";class Y extends o{constructor(e,t=0,r,n){super(Int32Array,e,t,r,n),this.elementType="i32"}static fromTypedArray(e,t){return new Y(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}Y.ElementType="i32";class J extends c{constructor(e,t=0,r,n){super(Int32Array,e,t,r,n),this.elementType="i32"}static fromTypedArray(e,t){return new J(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}J.ElementType="i32";class Z extends d{constructor(e,t=0,r,n){super(Int32Array,e,t,r,n),this.elementType="i32"}static fromTypedArray(e,t){return new Z(e.buffer,e.byteOffset,t,e.byteOffset+e.byteLength)}}Z.ElementType="i32"},XJLX:function(e,t,r){"use strict";r.r(t),r.d(t,"fromItem",function(){return c}),r.d(t,"selectLayerClassPath",function(){return u});var n=r("srIe"),i=r("zlDU"),s=r("Lqtk"),a=r("p+Gi"),o=r("Dfpg"),l=r("oLSx");function c(e){return!e.portalItem||e.portalItem instanceof a.default||(e={...e,portalItem:new a.default(e.portalItem)}),function(e){return e.load().then(u).then(d)}(e.portalItem).then(t=>{const r={portalItem:e.portalItem,...t.properties};return Promise.resolve(new(0,t.constructor)(r))})}function u(e){switch(e.type){case"Map Service":return function(e){return function(e){return b(e.url).then(e=>e.tileInfo)}(e).then(e=>e?{className:"TileLayer"}:{className:"MapImageLayer"})}(e);case"Feature Service":return function(e){return h(e).then(e=>{if("object"==typeof e){const t={};return null!=e.id&&(t.layerId=e.id),{className:"FeatureLayer",properties:t}}return{className:"GroupLayer"}})}(e);case"Feature Collection":return async function(e){return await e.load(),Object(o.a)(e,"Map Notes")?{className:"MapNotesLayer"}:Object(o.a)(e,"Route Layer")?{className:"RouteLayer"}:1===y(await e.fetchData())?{className:"FeatureLayer"}:{className:"GroupLayer"}}(e);case"Scene Service":return function(e){return h(e).then(t=>{if("object"==typeof t){const r={};let n;if(null!=t.id?(r.layerId=t.id,n=`${e.url}/layers/${t.id}`):n=e.url,Array.isArray(e.typeKeywords)&&e.typeKeywords.length>0){const t={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};for(const r of Object.keys(t))if(-1!==e.typeKeywords.indexOf(r))return{className:t[r]}}return b(n).then(e=>{let t="SceneLayer";const n={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return e&&e.layerType&&n[e.layerType]&&(t=n[e.layerType]),{className:t,properties:r}})}return{className:"GroupLayer"}})}(e);case"Image Service":return async function(e){var t,r,n;await e.load();const i=null!=(t=null==(r=e.typeKeywords)?void 0:r.map(e=>e.toLowerCase()))?t:[];if(i.indexOf("elevation 3d layer")>-1)return{className:"ElevationLayer"};if(i.indexOf("tiled imagery")>-1)return{className:"ImageryTileLayer"};const s=await e.fetchData(),a=null==s?void 0:s.layerType;return"ArcGISTiledImageServiceLayer"===a?{className:"ImageryTileLayer"}:"ArcGISImageServiceLayer"===a?{className:"ImageryLayer"}:"map"===(null==(n=(await b(e.url)).cacheType)?void 0:n.toLowerCase())?{className:"ImageryTileLayer"}:{className:"ImageryLayer"}}(e);case"Stream Service":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"KML":return{className:"KMLLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:return Promise.reject(new i.a("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type}))}}function d(e){return(0,l.a[e.className])().then(t=>({constructor:t,properties:e.properties}))}function h(e){return!e.url||e.url.match(/\/\d+$/)?Promise.resolve({}):e.load().then(()=>e.fetchData()).then(t=>y(t)>0?p(t):b(e.url).then(p))}function p(e){return 1===y(e)&&{id:Object(n.o)(f(e))}}function f(e){const t=e.layers;if(t&&t.length)return t[0].id;const r=e.tables;return r&&r.length?r[0].id:null}function y(e){var t,r,n,i;return(null!=(t=null==e||null==(r=e.layers)?void 0:r.length)?t:0)+(null!=(n=null==e||null==(i=e.tables)?void 0:i.length)?n:0)}function b(e){return Object(s.default)(e,{responseType:"json",query:{f:"json"}}).then(e=>e.data)}},XTTP:function(e,t,r){"use strict";r.d(t,"a",function(){return m}),r.d(t,"b",function(){return d}),r.d(t,"c",function(){return l}),r.d(t,"d",function(){return p});var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("RI0u"),a=r("04ZG"),o=(r("4EHJ"),r("ju1D"),r("9AIY"),r("ag7Y"));let l=class extends o.a{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};Object(n.a)([Object(i.b)({type:Number})],l.prototype,"nodesPerPage",void 0),Object(n.a)([Object(i.b)({type:Number})],l.prototype,"rootIndex",void 0),Object(n.a)([Object(i.b)({type:String})],l.prototype,"lodSelectionMetricType",void 0),l=Object(n.a)([Object(a.a)("esri.layer.support.I3SNodePageDefinition")],l);let c=class extends o.a{constructor(){super(...arguments),this.factor=1}};Object(n.a)([Object(i.b)({type:Number,json:{read:{source:"textureSetDefinitionId"}}})],c.prototype,"id",void 0),Object(n.a)([Object(i.b)({type:Number})],c.prototype,"factor",void 0),c=Object(n.a)([Object(a.a)("esri.layer.support.I3SMaterialTexture")],c);let u=class extends o.a{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};Object(n.a)([Object(i.b)({type:[Number]})],u.prototype,"baseColorFactor",void 0),Object(n.a)([Object(i.b)({type:c})],u.prototype,"baseColorTexture",void 0),Object(n.a)([Object(i.b)({type:c})],u.prototype,"metallicRoughnessTexture",void 0),Object(n.a)([Object(i.b)({type:Number})],u.prototype,"metallicFactor",void 0),Object(n.a)([Object(i.b)({type:Number})],u.prototype,"roughnessFactor",void 0),u=Object(n.a)([Object(a.a)("esri.layer.support.I3SMaterialPBRMetallicRoughness")],u);let d=class extends o.a{constructor(){super(...arguments),this.alphaMode="opaque",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace="none",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};Object(n.a)([Object(s.a)({opaque:"opaque",mask:"mask",blend:"blend"})],d.prototype,"alphaMode",void 0),Object(n.a)([Object(i.b)({type:Number})],d.prototype,"alphaCutoff",void 0),Object(n.a)([Object(i.b)({type:Boolean})],d.prototype,"doubleSided",void 0),Object(n.a)([Object(s.a)({none:"none",back:"back",front:"front"})],d.prototype,"cullFace",void 0),Object(n.a)([Object(i.b)({type:c})],d.prototype,"normalTexture",void 0),Object(n.a)([Object(i.b)({type:c})],d.prototype,"occlusionTexture",void 0),Object(n.a)([Object(i.b)({type:c})],d.prototype,"emissiveTexture",void 0),Object(n.a)([Object(i.b)({type:[Number]})],d.prototype,"emissiveFactor",void 0),Object(n.a)([Object(i.b)({type:u})],d.prototype,"pbrMetallicRoughness",void 0),d=Object(n.a)([Object(a.a)("esri.layer.support.I3SMaterialDefinition")],d);let h=class extends o.a{};Object(n.a)([Object(i.b)({type:String,json:{read:{source:["name","index"],reader:(e,t)=>null!=e?e:`${t.index}`}}})],h.prototype,"name",void 0),Object(n.a)([Object(s.a)({jpg:"jpg",png:"png",dds:"dds","ktx-etc2":"ktx-etc2",basis:"basis"})],h.prototype,"format",void 0),h=Object(n.a)([Object(a.a)("esri.layer.support.I3STextureFormat")],h);let p=class extends o.a{constructor(){super(...arguments),this.atlas=!1}};Object(n.a)([Object(i.b)({type:[h]})],p.prototype,"formats",void 0),Object(n.a)([Object(i.b)({type:Boolean})],p.prototype,"atlas",void 0),p=Object(n.a)([Object(a.a)("esri.layer.support.I3STextureSetDefinition")],p);let f=class extends o.a{};Object(n.a)([Object(s.a)({Float32:"Float32",UInt64:"UInt64",UInt32:"UInt32",UInt16:"UInt16",UInt8:"UInt8"})],f.prototype,"type",void 0),Object(n.a)([Object(i.b)({type:Number})],f.prototype,"component",void 0),f=Object(n.a)([Object(a.a)("esri.layer.support.I3SGeometryAttribute")],f);let y=class extends o.a{};Object(n.a)([Object(s.a)({draco:"draco"})],y.prototype,"encoding",void 0),Object(n.a)([Object(i.b)({type:[String]})],y.prototype,"attributes",void 0),y=Object(n.a)([Object(a.a)("esri.layer.support.I3SGeometryCompressedAttributes")],y);let b=class extends o.a{constructor(){super(...arguments),this.offset=0}};Object(n.a)([Object(i.b)({type:Number})],b.prototype,"offset",void 0),Object(n.a)([Object(i.b)({type:f})],b.prototype,"position",void 0),Object(n.a)([Object(i.b)({type:f})],b.prototype,"normal",void 0),Object(n.a)([Object(i.b)({type:f})],b.prototype,"uv0",void 0),Object(n.a)([Object(i.b)({type:f})],b.prototype,"color",void 0),Object(n.a)([Object(i.b)({type:f})],b.prototype,"uvRegion",void 0),Object(n.a)([Object(i.b)({type:f})],b.prototype,"featureId",void 0),Object(n.a)([Object(i.b)({type:f})],b.prototype,"faceRange",void 0),Object(n.a)([Object(i.b)({type:y})],b.prototype,"compressedAttributes",void 0),b=Object(n.a)([Object(a.a)("esri.layer.support.I3SGeometryBuffer")],b);let m=class extends o.a{};Object(n.a)([Object(s.a)({triangle:"triangle"})],m.prototype,"topology",void 0),Object(n.a)([Object(i.b)()],m.prototype,"geometryBuffers",void 0),m=Object(n.a)([Object(a.a)("esri.layer.support.I3SGeometryDefinition")],m)},ZKYY:function(e,t,r){"use strict";r.d(t,"a",function(){return w}),r.d(t,"b",function(){return x}),r.d(t,"c",function(){return _}),r.d(t,"d",function(){return I}),r.d(t,"e",function(){return S});var n=r("nR38"),i=r("srIe"),s=r("zlDU"),a=r("Lqtk"),o=r("u3Ia"),l=r("pO5D"),c=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),u=r("r88o"),d=r("04ZG"),h=(r("4EHJ"),r("ju1D"),r("9AIY"),r("ag7Y")),p=r("jWBI"),f=r("8prj"),y=r("54nt"),b=r("eKLr");let m=class extends h.a{constructor(e){super(e),this.directions=null,this.route=null,this.routeName=null,this.stops=null}};Object(l.a)([Object(c.b)({type:b.a,json:{write:!0}})],m.prototype,"directions",void 0),Object(l.a)([Object(c.b)({type:p.a,json:{write:!0}})],m.prototype,"route",void 0),Object(l.a)([Object(c.b)({type:String,json:{write:!0}})],m.prototype,"routeName",void 0),Object(l.a)([Object(c.b)({type:[p.a],json:{write:!0}})],m.prototype,"stops",void 0),m=Object(l.a)([Object(d.a)("esri.tasks.support.RouteResult")],m);var g=m;function O(e){return e&&f.default.fromJSON(e).features.map(e=>e)}let j=class extends h.a{constructor(e){super(e),this.barriers=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(e,t){return O(t.barriers||t.pointBarriers)}readPolylineBarriers(e){return O(e)}readPolygonBarriers(e){return O(e)}};Object(l.a)([Object(c.b)({aliasOf:"pointBarriers"})],j.prototype,"barriers",void 0),Object(l.a)([Object(c.b)({type:[y.a]})],j.prototype,"messages",void 0),Object(l.a)([Object(c.b)({type:[p.a]})],j.prototype,"pointBarriers",void 0),Object(l.a)([Object(u.a)("pointBarriers",["barriers","pointBarriers"])],j.prototype,"readPointBarriers",null),Object(l.a)([Object(c.b)({type:[p.a]})],j.prototype,"polylineBarriers",void 0),Object(l.a)([Object(u.a)("polylineBarriers")],j.prototype,"readPolylineBarriers",null),Object(l.a)([Object(c.b)({type:[p.a]})],j.prototype,"polygonBarriers",void 0),Object(l.a)([Object(u.a)("polygonBarriers")],j.prototype,"readPolygonBarriers",null),Object(l.a)([Object(c.b)({type:[g]})],j.prototype,"routeResults",void 0),j=Object(l.a)([Object(d.a)("esri.tasks.support.RouteResultsContainer")],j);var v=j;function w(e,t,r,n){n[r]=[t.length,t.length+e.length],e.forEach(e=>{t.push(e.geometry)})}function x(e,t){for(let r=0;r<t.length;r++){const n=e[t[r]];if(n&&n.length)for(const e of n)e.z=void 0}console.log("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}function I(e){const t=[],r=[],{directions:n=[],routes:{features:i=[],spatialReference:s=null}={},stops:{features:a=[],spatialReference:o=null}={},barriers:l,polygonBarriers:c,polylineBarriers:u,messages:d}=e.data,h="esri.tasks.RouteTask.NULL_ROUTE_NAME";let p,f,y=!0;const b=i&&s||a&&o||l&&l.spatialReference||c&&c.spatialReference||u&&u.spatialReference;n.forEach(e=>{t.push(p=e.routeName),r[p]={directions:e}}),i.forEach(e=>{-1===t.indexOf(p=e.attributes.Name)&&(t.push(p),r[p]={}),e.geometry&&(e.geometry.spatialReference=b),r[p].route=e}),a.forEach(e=>{f=e.attributes,-1===t.indexOf(p=f.RouteName||h)&&(t.push(p),r[p]={}),p!==h&&(y=!1),e.geometry&&(e.geometry.spatialReference=b),null==r[p].stops&&(r[p].stops=[]),r[p].stops.push(e)}),a.length>0&&!0===y&&(r[t[0]].stops=r[h].stops,delete r[h],t.splice(t.indexOf(h),1));const m=t.map(e=>(r[e].routeName=e===h?null:e,r[e]));return v.fromJSON({routeResults:m,pointBarriers:l,polygonBarriers:c,polylineBarriers:u,messages:d})}function S(e,t){for(let r=0;r<t.length;r++){const n=e[t[r]];if(n&&n.length)for(const e of n)if(Object(i.i)(e)&&e.hasZ)return!0}return!1}async function _(e){if(!e)throw new s.a("network-service:missing-url","Url to Network service is missing");const{data:t}=await Object(a.default)(e,{query:{f:"json"}});t.supportedTravelModes||(t.supportedTravelModes=[]);for(let n=0;n<t.supportedTravelModes.length;n++)t.supportedTravelModes[n].id||(t.supportedTravelModes[n].id=t.supportedTravelModes[n].itemId);const r=t.currentVersion>=10.4?async function(e){try{const{data:{supportedTravelModes:t,defaultTravelMode:r}}=await Object(a.default)(e+("/"===e[e.length-1]?"":"/")+"retrieveTravelModes",{query:{f:"json"}});return{supportedTravelModes:t,defaultTravelMode:r}}catch(t){throw new s.a("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:t})}}(e):async function(e){const{data:t}=await Object(a.default)(e.substring(0,e.indexOf("/rest/")+6)+"info",{query:{f:"json"}});if(!t||!t.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};e=t.owningSystemUrl;const{data:r}=await Object(a.default)(e+("/"===e[e.length-1]?"":"/")+"sharing/rest/portals/self",{query:{f:"json"}}),i=Object(n.b)("helperServices.routingUtilities.url",r);if(!i)return{supportedTravelModes:[],defaultTravelMode:null};const s=Object(o.c)(e),l=/\/solve$/.test(s.path)?"Route":/\/solveClosestFacility$/.test(s.path)?"ClosestFacility":"ServiceAreas",c=await Object(a.default)(i+("/"===i[i.length-1]?"":"/")+"GetTravelModes/execute",{query:{f:"json",serviceName:l}}),u=[];let d=null;if(c&&c.data&&c.data.results&&c.data.results.length){const e=c.data.results;for(const t of e)if("supportedTravelModes"===t.paramName){if(t.value&&t.value.features)for(const{attributes:e}of t.value.features)if(e){const t=JSON.parse(e.TravelMode);u.push(t)}}else"defaultTravelMode"===t.paramName&&(d=t.value)}return{supportedTravelModes:u,defaultTravelMode:d}}(e),{defaultTravelMode:i,supportedTravelModes:l}=await r;return t.defaultTravelMode=i,t.supportedTravelModes=l,t}},ZRfE:function(e,t,r){"use strict";var n=r("srIe"),i=r("6S2I"),s=r("zlDU"),a=r("zm0L"),o=r("kYAx"),l=r("ZlUD"),c=r("QmHG"),u=r("BMSW"),d=r("k5I3"),h=r("gVKr"),p=r("2X7Z");const f={getObjectId:e=>e.objectId,getAttributes:e=>e.attributes,getAttribute:(e,t)=>e.attributes[t],cloneWithGeometry:(e,t)=>new d.a(t,e.attributes,null,e.objectId),getGeometry:e=>e.geometry,getCentroid:(e,t)=>(e.centroid||(e.centroid=Object(p.a)(new h.a,e.geometry,t.hasZ,t.hasM)),e.centroid)};t.a=class{constructor(e){this.geometryInfo=e,this._boundsStore=new u.a,this._featuresById=new Map,this._markedIds=new Set,this.events=new a.a,this.featureAdapter=f}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){if(!this.numFeatures)return null;const e=Object(o.e)(o.a);return this._featuresById.forEach(t=>{const r=this._boundsStore.get(t.objectId);r&&(e[0]=Math.min(r[0],e[0]),e[1]=Math.min(r[1],e[1]),e[2]=Math.max(r[2],e[2]),e[3]=Math.max(r[3],e[3]))}),e}get storeStatistics(){let e=0;return this._featuresById.forEach(t=>{t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t,r){for(const n of e){const e=this._boundsStore.get(n.objectId);e&&t(Object(c.h)(r,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach(t=>e(t))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,e=>{t(this._featuresById.get(e))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))}),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(e){if(!e)return;const t=e.objectId;if(null==t)return void i.a.getLogger("esri.layers.graphics.data.FeatureStore").error(new s.a("featurestore:invalid-feature","feature id is missing",{feature:e}));const r=this._featuresById.get(t);let a;if(this._markedIds.add(t),r?(e.displayId=r.displayId,a=this._boundsStore.get(t),this._boundsStore.delete(t)):Object(n.i)(this.onFeatureAdd)&&this.onFeatureAdd(e),!e.geometry||!e.geometry.coords||!e.geometry.coords.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);a=Object(l.r)(a||Object(o.e)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(t,a),this._featuresById.set(t,e)}_remove(e){return Object(n.i)(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}},bjZF:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("srIe"),i=r("zlDU"),s=r("Lqtk");async function a(e,t,r,a,o){let l=null;if(Object(n.i)(r)){const t=`${e}/nodepages/`,i=t+Math.floor(r.rootIndex/r.nodesPerPage);try{return{type:"page",rootPage:(await Object(s.default)(i,{query:{f:"json"},responseType:"json",signal:o})).data,rootIndex:r.rootIndex,pageSize:r.nodesPerPage,lodMetric:r.lodSelectionMetricType,urlPrefix:t}}catch(d){Object(n.i)(a)&&a.warn("#fetchIndexInfo()","Failed to load root node page. Falling back to node documents.",i,d),l=d}}if(!t)return null;const c=`${e}/nodes/`,u=c+(t&&t.split("/").pop());try{return{type:"node",rootNode:(await Object(s.default)(u,{query:{f:"json"},responseType:"json",signal:o})).data,urlPrefix:c}}catch(d){throw new i.a("sceneservice:root-node-missing","Root node missing.",{pageError:l,nodeError:d,url:u})}}},cBWO:function(e,t,r){"use strict";r.d(t,"a",function(){return c}),r.d(t,"b",function(){return o}),r.d(t,"c",function(){return u});var n=r("s7YA"),i=r("IDUf");const s={ar:[".",","],bs:[",","."],ca:[",","."],cs:[",","\xa0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xa0"],fi:[",","\xa0"],fr:[",","\u202f"],"fr-ch":[",","\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xa0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xa0"],lv:[",","\xa0"],mk:[",","."],nb:[",","\xa0"],nl:[",","."],pl:[",","\xa0"],pt:[",","."],"pt-pt":[",","\xa0"],ro:[",","."],ru:[",","\xa0"],sk:[",","\xa0"],sl:[",","."],sr:[",","."],sv:[",","\xa0"],th:[".",","],tr:[",","."],uk:[",","\xa0"],vi:[",","."],zh:[".",","]};function a(e){e||(e=Object(i.b)());let t=e in s;if(!t){const r=e.split("-");r.length>1&&r[0]in s&&(e=r[0],t=!0),t||(e="en")}const[r,n,a="#,##0.###"]=s[e];return{decimal:r,group:n,pattern:a}}function o(e,t){const r=a((t={...t}).locale);t.customs=r;const n=t.pattern||r.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,r){const n=(r=r||{}).customs.group,i=r.customs.decimal,s=t.split(";"),a=s[0];if(-1!==(t=s[e<0?1:0]||"-"+a).indexOf("%"))e*=100;else if(-1!==t.indexOf("\u2030"))e*=1e3;else{if(-1!==t.indexOf("\xa4"))throw new Error("currency notation not supported");if(-1!==t.indexOf("E"))throw new Error("exponential notation not supported")}const o=l,c=a.match(o);if(!c)throw new Error("unable to find a number expression in pattern: "+t);return!1===r.fractional&&(r.places=0),t.replace(o,function(e,t,r){!0===(r=r||{}).places&&(r.places=0),r.places===1/0&&(r.places=6);const n=t.split("."),i="string"==typeof r.places&&r.places.indexOf(",");let s=r.places;i?s=r.places.substring(i+1):s>=0||(s=(n[1]||[]).length),r.round<0||(e=Number(e.toFixed(Number(s))));const a=String(Math.abs(e)).split("."),o=a[1]||"";if(n[1]||r.places){i&&(r.places=r.places.substring(0,i));const e=void 0!==r.places?r.places:n[1]&&n[1].lastIndexOf("0")+1;e>o.length&&(a[1]=o.padEnd(Number(e),"0")),s<o.length&&(a[1]=o.substr(0,Number(s)))}else a[1]&&a.pop();const l=n[0].replace(",","");let c=l.indexOf("0");-1!==c&&(c=l.length-c,c>a[0].length&&(a[0]=a[0].padStart(c,"0")),-1===l.indexOf("#")&&(a[0]=a[0].substr(a[0].length-c)));let u,d,h=n[0].lastIndexOf(",");if(-1!==h){u=n[0].length-h-1;const e=n[0].substr(0,h);h=e.lastIndexOf(","),-1!==h&&(d=e.length-h-1)}const p=[];for(let f=a[0];f;){const e=f.length-u;p.push(e>0?f.substr(e):f),f=e>0?f.slice(0,e):"",d&&(u=d,d=void 0)}return a[0]=p.reverse().join(r.group||","),a.join(r.decimal||".")}(e,c[0],{decimal:i,group:n,places:r.places,round:r.round}))}(e,n,t)}const l=/[#0,]*[#0](?:\.0*#*)?/;function c(e){const t=a((e=e||{}).locale),r=e.pattern||t.pattern,i=t.group,s=t.decimal;let o=1;if(-1!==r.indexOf("%"))o/=100;else if(-1!==r.indexOf("\u2030"))o/=1e3;else if(-1!==r.indexOf("\xa4"))throw new Error("currency notation not supported");const c=r.split(";");return 1===c.length&&c.push("-"+c[0]),{regexp:h(c,function(t){return(t="(?:"+Object(n.a)(t,".")+")").replace(l,function(t){const r={signed:!1,separator:e.strict?i:[i,""],fractional:e.fractional,decimal:s,exponent:!1},n=t.split(".");let a=e.places;1===n.length&&1!==o&&(n[1]="###"),1===n.length||0===a?r.fractional=!1:(void 0===a&&(a=e.pattern?n[1].lastIndexOf("0")+1:1/0),a&&null==e.fractional&&(r.fractional=!0),!e.places&&a<n[1].length&&(a+=","+n[1].length),r.places=a);const l=n[0].split(",");return l.length>1&&(r.groupSize=l.pop().length,l.length>1&&(r.groupSize2=l.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=d(e),r=h(e.fractional,function(t){let r="";return t&&0!==e.places&&(r="\\"+e.decimal,e.places===1/0?r="(?:"+r+"\\d+)?":r+="\\d{"+e.places+"}"),r},!0);let n=t+r;return r&&(n="(?:(?:"+n+")|(?:"+r+"))"),n+h(e.exponent,function(t){return t?"([eE]"+d({signed:e.eSigned})+")":""})}(r)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:i,decimal:s,factor:o}}function u(e,t){const r=c(t),n=new RegExp("^"+r.regexp+"$").exec(e);if(!n)return NaN;let i=n[1];if(!n[1]){if(!n[2])return NaN;i=n[2],r.factor*=-1}return i=i.replace(new RegExp("["+r.group+"\\s\\xa0]","g"),"").replace(r.decimal,"."),Number(i)*r.factor}function d(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",h(e.signed,function(e){return e?"[-+]":""},!0)+h(e.separator,function(t){if(!t)return"(?:\\d+)";" "===(t=Object(n.a)(t))?t="\\s":"\xa0"===t&&(t="\\s\\xa0");const r=e.groupSize,i=e.groupSize2;if(i){const e="(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*["+t+"]\\d{"+r+"})";return r-i>0?"(?:"+e+"|(?:0|[1-9]\\d{0,"+(r-1)+"}))":e}return"(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*)"},!0)}const h=function(e,t,r){if(!(e instanceof Array))return t(e);const n=[];for(let i=0;i<e.length;i++)n.push(t(e[i]));return p(n.join("|"),r)},p=function(e,t){return"("+(t?"?:":"")+e+")"}},cM4j:function(e,t,r){"use strict";r.d(t,"a",function(){return d});var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("04ZG"),a=(r("4EHJ"),r("ju1D"),r("9AIY"),r("/CmD")),o=r("IvSi"),l=r("kJYu"),c=r("Ilhi");const u={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let d=class extends(Object(l.b)(a.a)){constructor(e){super(e),this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(e=>e.toExportImageJSON());return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&Object(c.a)(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",e=>this.notifyChange(u[e.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(e=>e.id).join(","):"show:-1":null}get layerDefs(){const e=this.visibleSublayers.filter(e=>null!=e.definitionExpression);return e.length?JSON.stringify(e.reduce((e,t)=>(e[t.id]=t.definitionExpression,e),{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,r=t=>{const n=this.scale;t.visible&&(0===n||(0===t.minScale||n<=t.minScale)&&(0===t.maxScale||n>=t.maxScale))&&(t.sublayers?t.sublayers.forEach(r):e.unshift(t))};t&&t.forEach(r);const n=this._get("visibleSublayers");return!n||n.length!==e.length||n.some((t,r)=>e[r]!==t)?e:n}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t={...t,layers:this.layers,layerDefs:this.layerDefs},t}};Object(n.a)([Object(i.b)({readOnly:!0})],d.prototype,"dynamicLayers",null),Object(n.a)([Object(i.b)({readOnly:!0})],d.prototype,"hasDynamicLayers",null),Object(n.a)([Object(i.b)()],d.prototype,"layer",null),Object(n.a)([Object(i.b)({readOnly:!0})],d.prototype,"layers",null),Object(n.a)([Object(i.b)({readOnly:!0})],d.prototype,"layerDefs",null),Object(n.a)([Object(i.b)({type:Number})],d.prototype,"scale",void 0),Object(n.a)([Object(i.b)(o.a)],d.prototype,"timeExtent",void 0),Object(n.a)([Object(i.b)({readOnly:!0})],d.prototype,"version",null),Object(n.a)([Object(i.b)({readOnly:!0})],d.prototype,"visibleSublayers",null),d=Object(n.a)([Object(s.a)("esri.layers.mixins.ExportImageParameters")],d)},dXfX:function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return u}),r.d(t,"c",function(){return i}),r.d(t,"d",function(){return b}),r.d(t,"e",function(){return p}),r.d(t,"f",function(){return f}),r.d(t,"g",function(){return O}),r.d(t,"h",function(){return j}),r.d(t,"i",function(){return m}),r.d(t,"j",function(){return y}),r.d(t,"k",function(){return s}),r.d(t,"l",function(){return g});var n=r("QhKk");function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function s(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function a(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function o(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function l(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function c(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function u(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function d(e,t){const r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(r*r+n*n+i*i+s*s)}function h(e,t){const r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],s=t[3]-e[3];return r*r+n*n+i*i+s*s}function p(e){const t=e[0],r=e[1],n=e[2],i=e[3];return Math.sqrt(t*t+r*r+n*n+i*i)}function f(e){const t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function y(e,t){const r=t[0],n=t[1],i=t[2],s=t[3];let a=r*r+n*n+i*i+s*s;return a>0&&(a=1/Math.sqrt(a),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=s*a),e}function b(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function m(e,t,r,n){const i=t[0],s=t[1],a=t[2],o=t[3];return e[0]=i+n*(r[0]-i),e[1]=s+n*(r[1]-s),e[2]=a+n*(r[2]-a),e[3]=o+n*(r[3]-o),e}function g(e,t,r){const n=t[0],i=t[1],s=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*a,e}function O(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function j(e,t){const r=e[0],i=e[1],s=e[2],a=e[3],o=t[0],l=t[1],c=t[2],u=t[3];return Math.abs(r-o)<=n.a*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-l)<=n.a*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-c)<=n.a*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(a-u)<=n.a*Math.max(1,Math.abs(a),Math.abs(u))}Object.freeze({__proto__:null,copy:i,set:s,add:a,subtract:o,multiply:l,divide:c,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},min:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},max:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:u,scaleAndAdd:function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e},distance:d,squaredDistance:h,length:p,squaredLength:f,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},normalize:y,dot:b,lerp:m,random:function(e,t){let r,i,s,a,o,l;t=t||1;do{r=2*Object(n.b)()-1,i=2*Object(n.b)()-1,o=r*r+i*i}while(o>=1);do{s=2*Object(n.b)()-1,a=2*Object(n.b)()-1,l=s*s+a*a}while(l>=1);const c=Math.sqrt((1-o)/l);return e[0]=t*r,e[1]=t*i,e[2]=t*s*c,e[3]=t*a*c,e},transformMat4:g,transformQuat:function(e,t,r){const n=t[0],i=t[1],s=t[2],a=r[0],o=r[1],l=r[2],c=r[3],u=c*n+o*s-l*i,d=c*i+l*n-a*s,h=c*s+a*i-o*n,p=-a*n-o*i-l*s;return e[0]=u*c+p*-a+d*-l-h*-o,e[1]=d*c+p*-o+h*-a-u*-l,e[2]=h*c+p*-l+u*-o-d*-a,e[3]=t[3],e},str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},exactEquals:O,equals:j,sub:o,mul:l,div:c,dist:d,sqrDist:h,len:p,sqrLen:f})},dZC4:function(e,t,r){"use strict";r.r(t),r.d(t,"hydratedAdapter",function(){return l});var n=r("SuVq"),i=r("OvF4"),s=r("V9wi"),a=r("Ehki"),o=r("UhwK");const l={convertToGEGeometry:function(e,t){if(null==t)return null;let r="cache"in t?t.cache._geVersion:void 0;return null==r&&(r=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=r)),r},exportPoint:function(e,t,r){const i=e.hasZ(t),s=e.hasM(t),a=new n.a({x:e.getPointX(t),y:e.getPointY(t),spatialReference:r});return i&&(a.z=e.getPointZ(t)),s&&(a.m=e.getPointM(t)),a.cache._geVersion=t,a},exportPolygon:function(e,t,r){const n=new a.a({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:r});return n.cache._geVersion=t,n},exportPolyline:function(e,t,r){const n=new o.a({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:r});return n.cache._geVersion=t,n},exportMultipoint:function(e,t,r){const n=new s.a({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:r});return n.cache._geVersion=t,n},exportExtent:function(e,t,r){const n=e.hasZ(t),s=e.hasM(t),a=new i.a({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:r});if(n){const r=e.getZExtent(t);a.zmin=r.vmin,a.zmax=r.vmax}if(s){const r=e.getMExtent(t);a.mmin=r.vmin,a.mmax=r.vmax}return a.cache._geVersion=t,a}}},dzHX:function(e,t,r){"use strict";var n,i=r("pO5D"),s=(r("wSAH"),r("f/qv")),a=(r("6S2I"),r("zqDF"),r("WbKI")),o=r("+opI"),l=r("04ZG"),c=(r("4EHJ"),r("ju1D"),r("9AIY"),r("ag7Y"));let u=n=class extends c.a{constructor(){super(...arguments),this.field=null,this.minValue=0,this.maxValue=255}clone(){return new n({field:this.field,minValue:this.minValue,maxValue:this.maxValue})}};Object(i.a)([Object(a.b)({type:String,json:{write:!0}})],u.prototype,"field",void 0),Object(i.a)([Object(a.b)({type:Number,nonNullable:!0,json:{write:!0}})],u.prototype,"minValue",void 0),Object(i.a)([Object(a.b)({type:Number,nonNullable:!0,json:{write:!0}})],u.prototype,"maxValue",void 0),u=n=Object(i.a)([Object(l.a)("esri.renderers.support.pointCloud.ColorModulation")],u);var d=u;const h=new o.a({pointCloudFixedSizeAlgorithm:"fixed-size",pointCloudSplatAlgorithm:"splat"});let p=class extends c.a{};Object(i.a)([Object(a.b)({type:h.apiValues,readOnly:!0,nonNullable:!0,json:{type:h.jsonValues,read:!1,write:h.write}})],p.prototype,"type",void 0),p=Object(i.a)([Object(l.a)("esri.renderers.support.pointCloud.PointSizeAlgorithm")],p);var f,y=p,b=r("RI0u");let m=f=class extends y{constructor(){super(...arguments),this.type="fixed-size",this.size=0,this.useRealWorldSymbolSizes=null}clone(){return new f({size:this.size,useRealWorldSymbolSizes:this.useRealWorldSymbolSizes})}};Object(i.a)([Object(b.a)({pointCloudFixedSizeAlgorithm:"fixed-size"})],m.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:Number,nonNullable:!0,json:{write:!0}})],m.prototype,"size",void 0),Object(i.a)([Object(a.b)({type:Boolean,json:{write:!0}})],m.prototype,"useRealWorldSymbolSizes",void 0),m=f=Object(i.a)([Object(l.a)("esri.renderers.support.pointCloud.PointSizeFixedSizeAlgorithm")],m);var g,O=m;let j=g=class extends y{constructor(){super(...arguments),this.type="splat",this.scaleFactor=1}clone(){return new g({scaleFactor:this.scaleFactor})}};Object(i.a)([Object(b.a)({pointCloudSplatAlgorithm:"splat"})],j.prototype,"type",void 0),Object(i.a)([Object(a.b)({type:Number,value:1,nonNullable:!0,json:{write:!0}})],j.prototype,"scaleFactor",void 0),j=g=Object(i.a)([Object(l.a)("esri.renderers.support.pointCloud.PointSizeSplatAlgorithm")],j);const v={key:"type",base:y,typeMap:{"fixed-size":O,splat:j}},w=Object(o.b)()({pointCloudClassBreaksRenderer:"point-cloud-class-breaks",pointCloudRGBRenderer:"point-cloud-rgb",pointCloudStretchRenderer:"point-cloud-stretch",pointCloudUniqueValueRenderer:"point-cloud-unique-value"});let x=class extends c.a{constructor(e){super(e),this.type=void 0,this.pointSizeAlgorithm=null,this.colorModulation=null,this.pointsPerInch=10}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}cloneProperties(){return{pointSizeAlgorithm:Object(s.a)(this.pointSizeAlgorithm),colorModulation:Object(s.a)(this.colorModulation),pointsPerInch:Object(s.a)(this.pointsPerInch)}}};Object(i.a)([Object(a.b)({type:w.apiValues,readOnly:!0,nonNullable:!0,json:{type:w.jsonValues,read:!1,write:w.write}})],x.prototype,"type",void 0),Object(i.a)([Object(a.b)({types:v,json:{write:!0}})],x.prototype,"pointSizeAlgorithm",void 0),Object(i.a)([Object(a.b)({type:d,json:{write:!0}})],x.prototype,"colorModulation",void 0),Object(i.a)([Object(a.b)({json:{write:!0},nonNullable:!0,type:Number})],x.prototype,"pointsPerInch",void 0),x=Object(i.a)([Object(l.a)("esri.renderers.PointCloudRenderer")],x),(x||(x={})).fieldTransformTypeKebabDict=new o.a({none:"none",lowFourBit:"low-four-bit",highFourBit:"high-four-bit",absoluteValue:"absolute-value",moduloTen:"modulo-ten"}),t.a=x},e4KH:function(e,t,r){"use strict";var n=r("NrhG"),i=r("Du6U"),s=r("eT81"),a=r("QFw1");t.a=class{dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(e,t,r){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===e.type||"esriSFS"===e.type){const[r,n,i]=s.c.rasterizeSimpleFill(this._rasterizationCanvas,e.style,t);return{size:[n,i],image:new Uint32Array(r.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if("simple-line"===e.type||"esriSLS"===e.type){const[t,r,n]=s.c.rasterizeSimpleLine(e.style,e.cap);return{size:[r,n],image:new Uint32Array(t.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let n,o,l;if("simple-marker"===e.type||"esriSMS"===e.type||"line-marker"===e.type?(n=s.a.fromSimpleMarker(e),l=Object(a.c)(n)):"CIMHatchFill"===e.type?(n=s.a.fromCIMHatchFill(e),o=new i.a(n.frame.xmin,-n.frame.ymax,n.frame.xmax-n.frame.xmin,n.frame.ymax-n.frame.ymin)):e.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===e.markerPlacement.type?(n=s.a.fromCIMInsidePolygon(e),o=new i.a(n.frame.xmin,-n.frame.ymax,n.frame.xmax-n.frame.xmin,n.frame.ymax-n.frame.ymin)):(n=e,l=Object(a.c)(n)),l&&!r){const[e,t,r]=Object(a.a)(l);return e?{size:[t,r],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[c,u,d,h,p]=s.a.rasterize(this._rasterizationCanvas,n,o,!r);return c?{size:[u,d],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:h,anchorY:p}:null}rasterizeImageResource(e,t,r,i){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=t;const s=this._rasterizationCanvas.getContext("2d");r instanceof ImageData?s.putImageData(r,0,0):(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`),s.drawImage(r,0,0,e,t));const a=s.getImageData(0,0,e,t),o=new Uint8Array(a.data);if(i)for(const n of i)if(n&&n.oldColor&&4===n.oldColor.length&&n.newColor&&4===n.newColor.length){const[e,t,r,i]=n.oldColor,[s,a,l,c]=n.newColor;if(e===s&&t===a&&r===l&&i===c)continue;for(let n=0;n<o.length;n+=4)e===o[n]&&t===o[n+1]&&r===o[n+2]&&i===o[n+3]&&(o[n]=s,o[n+1]=a,o[n+2]=l,o[n+3]=c)}let l;for(let n=0;n<o.length;n+=4)l=o[n+3]/255,o[n]=o[n]*l,o[n+1]=o[n+1]*l,o[n+2]=o[n+2]*l;let c=o,u=e,d=t;const h=512;if(u>=h||d>=h){const r=u/d;r>1?(u=h,d=Math.round(h/r)):(d=h,u=Math.round(h*r)),c=new Uint8Array(4*u*d);const i=new Uint8ClampedArray(c.buffer);Object(n.j)(o,e,t,i,u,d,!1)}return{size:[e,t],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}},eKLr:function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("srIe")),s=(r("6S2I"),r("zqDF"),r("WbKI")),a=r("r88o"),o=r("04ZG"),l=(r("4EHJ"),r("ju1D"),r("9AIY"),r("WZb1")),c=r("SuVq"),u=r("OvF4"),d=r("UhwK"),h=(r("4GrV"),r("jWBI")),p=r("8prj");let f=class extends p.default{constructor(e){super(e),this.extent=null,this.features=null,this.geometryType="polyline",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(e,t){(e||[]).forEach(e=>{this._decompressFeatureGeometry(e,t.summary.envelope.spatialReference)});const r=l.a.fromJSON(t.spatialReference);return e.map(e=>{const t=h.a.fromJSON(e);return t.geometry&&!(e.geometry&&e.geometry.spatialReference)&&(Object(i.o)(t.geometry).spatialReference=r),t.strings=e.strings,t.events=(e.events||[]).map(t=>{const r=new h.a({geometry:new c.a({x:t.point.x,y:t.point.y,z:t.point.z,hasZ:void 0!==t.point.z,spatialReference:e.geometry&&e.geometry.spatialReference}),attributes:{ETA:t.ETA,arriveTimeUTC:t.arriveTimeUTC}});return r.strings=t.strings,r}),t})}get mergedGeometry(){if(!this.features)return null;const e=this.features.map(({geometry:e})=>Object(i.o)(e)),t=this.get("extent.spatialReference");return this._mergePolylinesToSinglePath(e,t)}get strings(){return this.features.map(({strings:e})=>e)}_decompressFeatureGeometry(e,t){e.geometry=this._decompressGeometry(e.compressedGeometry,t)}_decompressGeometry(e,t){let r=0,n=0,i=0,s=0;const a=[];let o,l,c,u,d,h,p,f,y=0,b=0,m=0;if(d=e.match(/((\+|\-)[^\+\-\|]+|\|)/g),d||(d=[]),0===parseInt(d[y],32)){y=2;const e=parseInt(d[y],32);y++,h=parseInt(d[y],32),y++,1&e&&(b=d.indexOf("|")+1,p=parseInt(d[b],32),b++),2&e&&(m=d.indexOf("|",b)+1,f=parseInt(d[m],32),m++)}else h=parseInt(d[y],32),y++;for(;y<d.length&&"|"!==d[y];){o=parseInt(d[y],32)+r,y++,r=o,l=parseInt(d[y],32)+n,y++,n=l;const e=[o/h,l/h];b&&(u=parseInt(d[b],32)+i,b++,i=u,e.push(u/p)),m&&(c=parseInt(d[m],32)+s,m++,s=c,e.push(c/f)),a.push(e)}return{paths:[a],hasZ:b>0,hasM:m>0,spatialReference:t}}_mergePolylinesToSinglePath(e,t){let r=[];(e||[]).forEach(e=>{e.paths.forEach(e=>{r=r.concat(e)})});const n=[];let i=[0,0];return r.forEach(e=>{e[0]===i[0]&&e[1]===i[1]||(n.push(e),i=e)}),new d.a({paths:[n]},t)}};Object(n.a)([Object(s.b)({type:u.a,json:{read:{source:"summary.envelope"}}})],f.prototype,"extent",void 0),Object(n.a)([Object(s.b)()],f.prototype,"features",void 0),Object(n.a)([Object(a.a)("features")],f.prototype,"readFeatures",null),Object(n.a)([Object(s.b)()],f.prototype,"geometryType",void 0),Object(n.a)([Object(s.b)({readOnly:!0})],f.prototype,"mergedGeometry",null),Object(n.a)([Object(s.b)()],f.prototype,"routeId",void 0),Object(n.a)([Object(s.b)()],f.prototype,"routeName",void 0),Object(n.a)([Object(s.b)({value:null,readOnly:!0})],f.prototype,"strings",null),Object(n.a)([Object(s.b)({json:{read:{source:"summary.totalDriveTime"}}})],f.prototype,"totalDriveTime",void 0),Object(n.a)([Object(s.b)({json:{read:{source:"summary.totalLength"}}})],f.prototype,"totalLength",void 0),Object(n.a)([Object(s.b)({json:{read:{source:"summary.totalTime"}}})],f.prototype,"totalTime",void 0),f=Object(n.a)([Object(o.a)("esri.tasks.support.DirectionsFeatureSet")],f),t.a=f},fqtG:function(e,t,r){"use strict";r.d(t,"a",function(){return n});const n={attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsStatistics:!1,tileMaxRecordCount:0}}},grla:function(e,t,r){"use strict";function n(e){switch(e){case"u8":return 1;case"u16":return 2;case"u32":return 4;case"i8":return 1;case"i16":return 2;case"i32":case"f32":return 4;case"f64":return 8;default:return}}function i(e){switch(e){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function s(e){switch(e){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function a(e){switch(e){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}r.d(t,"a",function(){return n}),r.d(t,"b",function(){return s}),r.d(t,"c",function(){return i}),r.d(t,"d",function(){return a}),r("wSAH")},hIOP:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r("wSAH"),i=r("srIe"),s=r("gvqN"),a=r("DxxZ"),o=r("6S2I");const l=r.e(148).then(r.bind(null,"zKxS"));class c{constructor(e,t){this._canCacheExpressionValue=!1,this._sourceInfo=e,this._bitsets={computed:t.getBitset(t.createBitset())}}invalidate(){this._bitsets.computed.clear()}async updateSchema(e,t){const r=Object(a.a)(this._schema,t);if(this._schema=t,!t||Object(i.h)(r)||!Object(a.b)(r,"attributes"))return;Object(n.a)("esri-2d-update-debug")&&console.debug("Applying Update - Store:",r),this._bitsets.computed.clear(),e.targets[t.name]=!0;const s=t.attributes,o=[],l=[];for(const n in s){const e=s[n];switch(e.type){case"field":break;case"expression":o.push(this._createArcadeComputedField(e));break;case"label-expression":o.push(this._createLabelArcadeComputedField(e));break;case"statistic":l.push(e)}}this._computedFields=await Promise.all(o),this._canCacheExpressionValue=!this._computedFields.some(e=>"expression"===e.type&&e.expression.referencesScale()),this._statisticFields=l}setComputedAttributes(e,t,r,n){const i=this._bitsets.computed;if(!this._canCacheExpressionValue||!i.has(r)){i.set(r);for(const i of this._computedFields){const s=this._evaluateField(t,i,n);switch(i.resultType){case"numeric":e.setComputedNumericAtIndex(r,i.fieldIndex,s);break;case"string":e.setComputedStringAtIndex(r,i.fieldIndex,s)}}}}async _createArcadeComputedField(e){const t=this._sourceInfo.spatialReference,r=this._sourceInfo.fieldsIndex;return{...e,expression:await Object(s.d)(e.valueExpression,t,r)}}async _createLabelArcadeComputedField(e){const t=this._sourceInfo.spatialReference,r=this._sourceInfo.fields,{createLabelFunction:n}=await l,i=await n(e.label,r,t);return{...e,builder:i}}_evaluateField(e,t,r){switch(t.type){case"label-expression":{const r=e.readArcadeFeature();return t.builder.evaluate(r)||""}case"expression":{const{expression:n}=t;return function(e,t,r){e.referencesGeometry();const n=t.readArcadeFeature();try{return e.evaluate({...r,$feature:n})}catch(i){return o.a.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",i),null}}(n,e,{$view:{scale:r}})}}}}},iNG6:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"b",function(){return l}),r.d(t,"c",function(){return a});var n=r("wSAH"),i=r("f/qv"),s=r("gkbi");function a(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?s.a:"esriGeometryPolyline"===e?s.c:s.b}}}function o(e,t){if(Object(n.a)("csp-restrictions"))return()=>({[t]:null,...e});try{let r=`this.${t} = null;`;for(const t in e)r+=`this${t.indexOf(".")?`["${t}"]`:`.${t}`} = ${JSON.stringify(e[t])};`;const n=new Function(r);return()=>new n}catch(r){return()=>({[t]:null,...e})}}function l(e={}){return[{name:"New Feature",description:"",prototype:{attributes:Object(i.a)(e)}}]}},iUxC:function(e,t,r){"use strict";t.a=class{constructor(e,t,r){this.pixelBlock=e,this.extent=t,this.originalPixelBlock=r}get width(){return this.pixelBlock?this.pixelBlock.width:0}get height(){return this.pixelBlock?this.pixelBlock.height:0}render(e){const t=this.pixelBlock;if(!t)return;const r=this.filter({pixelBlock:t}),n=r.pixelBlock.getAsRGBA(),i=e.createImageData(r.pixelBlock.width,r.pixelBlock.height);i.data.set(n),e.putImageData(i,0,0)}getRenderedRasterPixels(){const e=this.filter({pixelBlock:this.pixelBlock});return{width:e.pixelBlock.width,height:e.pixelBlock.height,renderedRasterPixels:new Uint8Array(e.pixelBlock.getAsRGBA().buffer)}}}},l5Tg:function(e,t,r){"use strict";r.d(t,"a",function(){return A}),r.d(t,"b",function(){return E}),r.d(t,"c",function(){return B}),r.d(t,"d",function(){return F}),r.d(t,"e",function(){return P}),r.d(t,"f",function(){return D}),r.d(t,"g",function(){return R}),r.d(t,"h",function(){return C}),r.d(t,"i",function(){return N}),r.d(t,"j",function(){return k}),r.d(t,"k",function(){return z}),r.d(t,"l",function(){return o}),r.d(t,"m",function(){return l}),r.d(t,"n",function(){return a}),r.d(t,"o",function(){return c}),r.d(t,"p",function(){return s}),r.d(t,"q",function(){return u}),r.d(t,"r",function(){return q}),r.d(t,"s",function(){return d}),r.d(t,"t",function(){return h}),r.d(t,"u",function(){return y}),r.d(t,"v",function(){return g}),r.d(t,"w",function(){return j}),r.d(t,"x",function(){return v}),r.d(t,"y",function(){return w}),r.d(t,"z",function(){return b}),r.d(t,"A",function(){return x}),r.d(t,"B",function(){return S}),r.d(t,"C",function(){return m}),r.d(t,"D",function(){return O}),r.d(t,"E",function(){return p}),r.d(t,"F",function(){return I}),r.d(t,"G",function(){return _}),r.d(t,"H",function(){return f}),r.d(t,"I",function(){return M}),r.d(t,"J",function(){return T}),r.d(t,"K",function(){return L});var n=r("9gar"),i=r("1kEK");function s(e){return n.a.extendedSpatialReferenceInfo(e)}function a(e,t,r){return n.a.clip(i.a,e,t,r)}function o(e,t,r){return n.a.cut(i.a,e,t,r)}function l(e,t,r){return n.a.contains(i.a,e,t,r)}function c(e,t,r){return n.a.crosses(i.a,e,t,r)}function u(e,t,r,s){return n.a.distance(i.a,e,t,r,s)}function d(e,t,r){return n.a.equals(i.a,e,t,r)}function h(e,t,r){return n.a.intersects(i.a,e,t,r)}function p(e,t,r){return n.a.touches(i.a,e,t,r)}function f(e,t,r){return n.a.within(i.a,e,t,r)}function y(e,t,r){return n.a.disjoint(i.a,e,t,r)}function b(e,t,r){return n.a.overlaps(i.a,e,t,r)}function m(e,t,r,s){return n.a.relate(i.a,e,t,r,s)}function g(e,t){return n.a.isSimple(i.a,e,t)}function O(e,t){return n.a.simplify(i.a,e,t)}function j(e,t,r=!1){return n.a.convexHull(i.a,e,t,r)}function v(e,t,r){return n.a.difference(i.a,e,t,r)}function w(e,t,r){return n.a.symmetricDifference(i.a,e,t,r)}function x(e,t,r){return n.a.intersect(i.a,e,t,r)}function I(e,t,r=null){return n.a.union(i.a,e,t,r)}function S(e,t,r,s,a,o,l){return n.a.offset(i.a,e,t,r,s,a,o,l)}function _(e,t,r,s,a=!1){return n.a.buffer(i.a,e,t,r,s,a)}function M(e,t,r,s,a,o,l){return n.a.geodesicBuffer(i.a,e,t,r,s,a,o,l)}function T(e,t,r,s=!0){return n.a.nearestCoordinate(i.a,e,t,r,s)}function L(e,t,r){return n.a.nearestVertex(i.a,e,t,r)}function A(e,t,r,s,a){return n.a.nearestVertices(i.a,e,t,r,s,a)}function E(e,t,r,i){if(null==t||null==i)throw new Error("Illegal Argument Exception");const s=n.a.rotate(t,r,i);return s.spatialReference=e,s}function B(e,t,r){if(null==t||null==r)throw new Error("Illegal Argument Exception");const i=n.a.flipHorizontal(t,r);return i.spatialReference=e,i}function F(e,t,r){if(null==t||null==r)throw new Error("Illegal Argument Exception");const i=n.a.flipVertical(t,r);return i.spatialReference=e,i}function P(e,t,r,s,a){return n.a.generalize(i.a,e,t,r,s,a)}function D(e,t,r,s){return n.a.densify(i.a,e,t,r,s)}function R(e,t,r,s,a=0){return n.a.geodesicDensify(i.a,e,t,r,s,a)}function C(e,t,r){return n.a.planarArea(i.a,e,t,r)}function N(e,t,r){return n.a.planarLength(i.a,e,t,r)}function k(e,t,r,s){return n.a.geodesicArea(i.a,e,t,r,s)}function z(e,t,r,s){return n.a.geodesicLength(i.a,e,t,r,s)}var q=Object.freeze({__proto__:null,extendedSpatialReferenceInfo:s,clip:a,cut:o,contains:l,crosses:c,distance:u,equals:d,intersects:h,touches:p,within:f,disjoint:y,overlaps:b,relate:m,isSimple:g,simplify:O,convexHull:j,difference:v,symmetricDifference:w,intersect:x,union:I,offset:S,buffer:_,geodesicBuffer:M,nearestCoordinate:T,nearestVertex:L,nearestVertices:A,rotate:E,flipHorizontal:B,flipVertical:F,generalize:P,densify:D,geodesicDensify:R,planarArea:C,planarLength:N,geodesicArea:k,geodesicLength:z})},llFo:function(e,t,r){"use strict";r.d(t,"a",function(){return I});var n,i=r("pO5D"),s=(r("wSAH"),r("6S2I")),a=r("WbKI"),o=r("Gj5k"),l=r("04ZG"),c=r("zlDU"),u=r("4EHJ"),d=(r("ju1D"),r("9AIY"),r("ikTR")),h=r("9MzC"),p=r("WBXD"),f=r("/CmD"),y=r("Lqtk"),b=r("r0DZ"),m=r("N5XI"),g=r("wk6I"),O=r("f/qv"),j=r("tQ+6");class v{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(e,t){if("unknown"!==this._allAvailability)return this._allAvailability;const r=(e-this.location.top)*this.location.width+(t-this.location.left),n=r>>3,i=this._tileAvailabilityBitSet;return n<0||n>i.length?"unknown":i[n]&1<<r%8?"available":"unavailable"}_updateFromData(e){let t=!0,r=!0;const n=Math.ceil(this.location.width*this.location.height/8),i=new Uint8Array(n);let s=0;for(let a=0;a<e.length;a++){const n=a%8;e[a]?(r=!1,i[s]|=1<<n):t=!1,7===n&&++s}r?this._allAvailability="unavailable":t?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=i,this.byteSize+=i.length)}static fromDefinition(e,t){const r=e.service.request||y.default,{row:n,col:i,width:s,height:a}=e,o={query:{f:"json"}};return t=t?{...o,...t}:o,r(function(e){let t;if("vector-tile"===e.service.type)t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;else{const r=e.service.tileServers;t=`${r&&r.length?r[e.row%r.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const r=e.service.query;return r&&(t=`${t}?${r}`),t}(e),t).then(e=>e.data).catch(e=>{if(e&&e.details&&422===e.details.httpStatus)return{location:{top:n,left:i,width:s,height:a},valid:!0,data:Object(j.b)(s*a,0)};throw e}).then(e=>{if(e.location&&(e.location.top!==n||e.location.left!==i||e.location.width!==s||e.location.height!==a))throw new c.a("tilemap:location-mismatch","Tilemap response for different location than requested",{response:e,definition:{top:n,left:i,width:s,height:a}});return v.fromJSON(e)})}static fromJSON(e){v.validateJSON(e);const t=new v;return t.location=Object.freeze(Object(O.a)(e.location)),t._updateFromData(e.data),Object.freeze(t)}static validateJSON(e){if(!e||!e.location)throw new c.a("tilemap:missing-location","Location missing from tilemap response");if(!1===e.valid)throw new c.a("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new c.a("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new c.a("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new c.a("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function w(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const x=s.a.getLogger("esri.layers.support.TilemapCache");let I=n=class extends f.a{constructor(e){super(e),this._handles=new b.a,this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2097152,this.request=y.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new g.a(this.cacheByteSize),this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],()=>this._initializeTilemapDefinition()),Object(m.a)(this,"layer.tileInfo.lods",e=>this._initializeAvailableLevels(e),!0)]),this._initializeTilemapDefinition()}destroy(){this._handles&&(this._handles.destroy(),this._handles=null)}castLevels(e){return e<=2?(x.error("Minimum levels for Tilemap is 3, but got ",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,r,n){if(!this._availableLevels[e])return Promise.reject(new c.a("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const i=this._tmpTilemapDefinition,s=this._tilemapFromCache(e,t,r,i);if(s)return Promise.resolve(s);const a=n&&n.signal;return n={...n,signal:null},new Promise((e,t)=>{Object(h.p)(a,()=>t(Object(h.e)()));const r=w(i);let s=this._pendingTilemapRequests[r];if(!s){s=v.fromDefinition(i,n).then(e=>(this._tilemapCache.put(r,e,e.byteSize),e));const e=()=>delete this._pendingTilemapRequests[r];this._pendingTilemapRequests[r]=s,s.then(e,e)}s.then(e,t)})}getAvailability(e,t,r){if(!this._availableLevels[e])return"unavailable";const n=this._tilemapFromCache(e,t,r,this._tmpTilemapDefinition);return n?n.getAvailability(t,r):"unknown"}getAvailabilityUpsample(e,t,r,n){n.level=e,n.row=t,n.col=r;const i=this.layer.tileInfo;for(i.updateTileInfo(n);;){const e=this.getAvailability(n.level,n.row,n.col);if("unavailable"!==e)return e;if(!i.upsampleTile(n))return"unavailable"}}fetchAvailability(e,t,r,n){return this._availableLevels[e]?this.fetchTilemap(e,t,r,n).catch(e=>e).then(n=>{if(n instanceof v){const i=n.getAvailability(t,r);return"unavailable"===i?Promise.reject(new c.a("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:r})):i}if(Object(h.m)(n))throw n;return"unknown"}):Promise.reject(new c.a("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,r,n,i){n.level=e,n.row=t,n.col=r;const s=this.layer.tileInfo;s.updateTileInfo(n);const a=this.fetchAvailability(e,t,r,i).catch(e=>{if(Object(h.m)(e))throw e;if(s.upsampleTile(n))return this.fetchAvailabilityUpsample(n.level,n.row,n.col,n);throw e});return this._fetchAvailabilityUpsamplePrefetch(n.id,e,t,r,i,a),a}async _fetchAvailabilityUpsamplePrefetch(e,t,r,i,s,a){if(!this._prefetchingEnabled)return;const o=`prefetch-${e}`;if(this._handles.has(o))return;const l=Object(h.d)();a.then(()=>l.abort(),()=>l.abort());let c=!1;if(this._handles.add({remove(){c||(c=!0,l.abort())}},o),await Object(p.c)(10,l.signal).catch(()=>{}),c||(c=!0,this._handles.remove(o)),Object(h.n)(l))return;const u={id:e,level:t,row:r,col:i},d={...s,signal:l.signal},f=this.layer.tileInfo;for(let h=0;n._prefetches.length<n._maxPrefetch&&f.upsampleTile(u);++h){const e=this.fetchAvailability(u.level,u.row,u.col,d);n._prefetches.push(e);const t=()=>{n._prefetches.removeUnordered(e)};e.then(t,t)}}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const e=this.layer.parsedUrl,t=e.query;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:t?Object(u.D)(t):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,r,n){n.level=e,n.row=t-t%this.size,n.col=r-r%this.size;const i=w(n);return this._tilemapCache.get(i)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach(e=>this._availableLevels[e.level]=!0)}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,r,n)=>!!e._tilemapFromCache(t,r,n,e._tmpTilemapDefinition)}}};I._maxPrefetch=4,I._prefetches=new d.a({initialSize:n._maxPrefetch}),Object(i.a)([Object(a.b)({constructOnly:!0,type:Number})],I.prototype,"levels",void 0),Object(i.a)([Object(o.a)("levels")],I.prototype,"castLevels",null),Object(i.a)([Object(a.b)({readOnly:!0,type:Number})],I.prototype,"size",null),Object(i.a)([Object(a.b)({constructOnly:!0,type:Number})],I.prototype,"cacheByteSize",void 0),Object(i.a)([Object(a.b)({constructOnly:!0})],I.prototype,"layer",void 0),Object(i.a)([Object(a.b)({constructOnly:!0})],I.prototype,"request",void 0),I=n=Object(i.a)([Object(l.a)("esri.layers.support.TilemapCache")],I)},lq5k:function(e,t,r){"use strict";r.d(t,"a",function(){return E});var n=r("pO5D"),i=(r("wSAH"),r("srIe")),s=r("6S2I"),a=(r("zqDF"),r("WbKI")),o=r("r88o"),l=r("04ZG"),c=r("Cduq"),u=r("zlDU"),d=r("4EHJ"),h=r("ju1D"),p=(r("9AIY"),r("9MzC")),f=r("WZb1"),y=r("OvF4"),b=r("Lqtk"),m=r("AiS/"),g=r("p+Gi"),O=r("Jpjp");function j(e){e&&e.writtenProperties&&e.writtenProperties.forEach(e=>{const t=e.target;e.newOrigin&&e.oldOrigin!==e.newOrigin&&Object(O.a)(t)&&t.updateOrigin(e.propName,e.newOrigin)})}var v=r("VLTf"),w=r("5k2a"),x=r("eSsm"),I=r("5qYV");async function S(e,t,r){if(!t||!t.resources)return;const n=t.portalItem===e.portalItem?new Set(e.paths):new Set;e.paths.length=0,e.portalItem=t.portalItem;const i=new Set(t.resources.toKeep.map(e=>e.resource.path)),s=new Set,a=[];i.forEach(t=>{n.delete(t),e.paths.push(t)});for(const c of t.resources.toUpdate)if(n.delete(c.resource.path),i.has(c.resource.path)||s.has(c.resource.path)){const{resource:t,content:n,finish:i,error:s}=c,o=Object(I.getSiblingOfSameTypeI)(t,Object(h.a)());e.paths.push(o.path),a.push(_({resource:o,content:n,finish:i,error:s},r))}else e.paths.push(c.resource.path),a.push(M(c,r)),s.add(c.resource.path);for(const c of t.resources.toAdd)a.push(_(c,r)),e.paths.push(c.resource.path);if(n.forEach(e=>{const r=t.portalItem.resourceFromPath(e);a.push(r.portalItem.removeResource(r).catch(()=>{}))}),0===a.length)return;const o=await Object(p.j)(a);Object(p.u)(r);const l=o.filter(e=>"error"in e).map(e=>e.error);if(l.length>0)throw new u.a("save:resources","Failed to save one or more resources",{errors:l})}async function _(e,t){const r=await Object(x.c)(e.resource.portalItem.addResource(e.resource,e.content,t));if(!0!==r.ok)throw e.error&&e.error(r.error),r.error;e.finish&&e.finish(e.resource)}async function M(e,t){const r=await Object(x.c)(e.resource.update(e.content,t));if(!0!==r.ok)throw e.error(r.error),r.error;e.finish(e.resource)}var T=r("IvSi"),L=r("bjZF");const A=s.a.getLogger("esri.layers.mixins.SceneService"),E=e=>{let t=class extends e{constructor(){super(...arguments),this.spatialReference=null,this.fullExtent=null,this.heightModelInfo=null,this.minScale=0,this.maxScale=0,this.version={major:Number.NaN,minor:Number.NaN,versionString:""},this.copyright=null,this.sublayerTitleMode="item-title",this.title=null,this.layerId=null,this.indexInfo=null,this._debouncedSaveOperations=Object(p.i)(async(e,t,r)=>{switch(e){case 0:return this._save(t);case 1:return this._saveAs(r,t)}})}readSpatialReference(e,t){return this._readSpatialReference(t)}_readSpatialReference(e){if(null!=e.spatialReference)return f.a.fromJSON(e.spatialReference);{const t=e.store,r=t.indexCRS||t.geographicCRS,n=r&&parseInt(r.substring(r.lastIndexOf("/")+1,r.length),10);return null!=n?new f.a(n):null}}readFullExtent(e,t,r){if(null!=e&&"object"==typeof e)return y.a.fromJSON(e,r);const n=t.store,i=this._readSpatialReference(t);return null==i||null==n||null==n.extent||!Array.isArray(n.extent)||n.extent.some(e=>e<B)?null:new y.a({xmin:n.extent[0],ymin:n.extent[1],xmax:n.extent[2],ymax:n.extent[3],spatialReference:i})}readVersion(e,t){const r=t.store,n=null!=r.version?r.version.toString():"",i={major:Number.NaN,minor:Number.NaN,versionString:n},s=n.split(".");return s.length>=2&&(i.major=parseInt(s[0],10),i.minor=parseInt(s[1],10)),i}readTitlePortalItem(e){return"item-title"!==this.sublayerTitleMode?void 0:e}readTitleService(e,t){const r=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return Object(v.i)(this.url,t.name);let n=t.name;if(!n&&this.url){const e=Object(v.e)(this.url);Object(i.i)(e)&&(n=e.title)}return"item-title-and-service-name"===this.sublayerTitleMode&&r&&(n=r+" - "+n),Object(v.a)(n)}set url(e){const t=Object(v.h)({layer:this,url:e,nonStandardUrlAllowed:!1,logger:A});this._set("url",t.url),null!=t.layerId&&this._set("layerId",t.layerId)}writeUrl(e,t,r,n){Object(v.j)(this,e,"layers",t,n)}get parsedUrl(){const e=this._get("url");if(!e)return null;const t=Object(d.J)(e);return null!=this.layerId&&(t.path=`${t.path}/layers/${this.layerId}`),t}async _fetchIndexAndUpdateExtent(e,t){this.indexInfo=Object(L.a)(this.parsedUrl.path,this.rootNode,e,A,t),null==this.fullExtent||this.fullExtent.hasZ||this._updateExtent(await this.indexInfo)}_updateExtent(e){if("page"===(null==e?void 0:e.type)){var t,r;const n=e.rootIndex%e.pageSize,i=null==(t=e.rootPage)||null==(r=t.nodes)?void 0:r[n];if(null==i||null==i.obb||null==i.obb.center||null==i.obb.halfSize)throw new u.a("sceneservice:invalid-node-page","Invalid node page.");if(i.obb.center[0]<B||null==this.fullExtent||this.fullExtent.hasZ)return;const s=i.obb.halfSize,a=i.obb.center[2],o=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]);this.fullExtent.zmin=a-o,this.fullExtent.zmax=a+o}else if("node"===(null==e?void 0:e.type)){var n;const t=null==(n=e.rootNode)?void 0:n.mbs;if(!Array.isArray(t)||4!==t.length||t[0]<B)return;const r=t[2],i=t[3];this.fullExtent.zmin=r-i,this.fullExtent.zmax=r+i}}async _fetchService(e){if(null==this.url)throw new u.a("sceneservice:url-not-set","Scene service can not be loaded without valid portal item or url");if(null==this.layerId&&/SceneServer\/*$/i.test(this.url)){const t=await this._fetchFirstLayerId(e);null!=t&&(this.layerId=t)}return this._fetchServiceLayer(e)}async _fetchFirstLayerId(e){const t=await Object(b.default)(this.url,{query:{f:"json"},responseType:"json",signal:e});if(t.data&&Array.isArray(t.data.layers)&&t.data.layers.length>0)return t.data.layers[0].id}async _fetchServiceLayer(e){const t=await Object(b.default)(this.parsedUrl.path,{query:{f:"json"},responseType:"json",signal:e});t.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));const r=t.data;this.read(r,{origin:"service",url:this.parsedUrl}),this.validateLayer(r)}async _ensureLoadBeforeSave(){await this.load(),"beforeSave"in this&&"function"==typeof this.beforeSave&&await this.beforeSave()}validateLayer(e){}_updateTypeKeywords(e,t,r){e.typeKeywords||(e.typeKeywords=[]);const n=t.getTypeKeywords();for(const i of n)e.typeKeywords.push(i);e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter((e,t,r)=>r.indexOf(e)===t),1===r&&(e.typeKeywords=e.typeKeywords.filter(e=>"Hosted Service"!==e)))}async _saveAs(e,t){const r={...D,...t};let n=g.default.from(e);n||(A.error("_saveAs(): requires a portal item parameter"),await Promise.reject(new u.a("sceneservice:portal-item-required","_saveAs() requires a portal item to save to"))),n.id&&(n=n.clone(),n.id=null);const i=n.portal||m.a.getDefault();await this._ensureLoadBeforeSave(),n.type=P,n.portal=i;const s={origin:"portal-item",url:null,messages:[],portal:i,portalItem:n,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},a={layers:[this.write(null,s)]};return await Promise.all(s.resources.pendingOperations),await this._validateAgainstJSONSchema(a,s,r),n.url=this.url,n.title||(n.title=this.title),this._updateTypeKeywords(n,r,1),await i._signIn(),await i.user.addItem({item:n,folder:r&&r.folder,data:a}),await S(this.resourceReferences,s,null),this.portalItem=n,j(s),s.portalItem=n,n}async _save(e){const t={...D,...e};this.portalItem||(A.error("_save(): requires the .portalItem property to be set"),await Promise.reject(new u.a("sceneservice:portal-item-not-set","Portal item to save to has not been set on this SceneService"))),this.portalItem.type!==P&&(A.error("_save(): Non-matching portal item type. Got "+this.portalItem.type+", expected "+P),await Promise.reject(new u.a("sceneservice:portal-item-wrong-type",`Portal item needs to have type "${P}"`))),await this._ensureLoadBeforeSave();const r={origin:"portal-item",url:this.portalItem.itemUrl&&Object(d.J)(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||m.a.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},n={layers:[this.write(null,r)]};return await Promise.all(r.resources.pendingOperations),await this._validateAgainstJSONSchema(n,r,t),this.portalItem.url=this.url,this.portalItem.title||(this.portalItem.title=this.title),this._updateTypeKeywords(this.portalItem,t,0),await this.portalItem.update({data:n}),await S(this.resourceReferences,r,null),j(r),this.portalItem}async _validateAgainstJSONSchema(e,t,n){let i=t.messages.filter(e=>"error"===e.type).map(e=>new u.a(e.name,e.message,e.details));if(n&&n.validationOptions.ignoreUnsupported&&(i=i.filter(e=>"layer:unsupported"!==e.name&&"symbol:unsupported"!==e.name&&"symbol-layer:unsupported"!==e.name&&"property:unsupported"!==e.name&&"url:unsupported"!==e.name&&"scenemodification:unsupported"!==e.name)),n.validationOptions.enabled||F){const t=(await r.e(112).then(r.bind(null,"p+sB"))).validate(e,n.portalItemLayerType);if(t.length>0){const e=`Layer item did not validate:\n${t.join("\n")}`;if(A.error(`_validateAgainstJSONSchema(): ${e}`),"throw"===n.validationOptions.failPolicy){const e=t.map(e=>new u.a("sceneservice:schema-validation",e)).concat(i);throw new u.a("sceneservice-validate:error","Failed to save layer item due to schema validation, see `details.errors`.",{combined:e})}}}if(i.length>0)throw new u.a("sceneservice:save","Failed to save SceneService due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:i})}};return Object(n.a)([Object(a.b)(T.c)],t.prototype,"id",void 0),Object(n.a)([Object(a.b)({type:f.a})],t.prototype,"spatialReference",void 0),Object(n.a)([Object(o.a)("spatialReference",["spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readSpatialReference",null),Object(n.a)([Object(a.b)({type:y.a})],t.prototype,"fullExtent",void 0),Object(n.a)([Object(o.a)("fullExtent",["fullExtent","store.extent","spatialReference","store.indexCRS","store.geographicCRS"])],t.prototype,"readFullExtent",null),Object(n.a)([Object(a.b)({readOnly:!0,type:w.a})],t.prototype,"heightModelInfo",void 0),Object(n.a)([Object(a.b)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:{source:"minScale"},write:!1}}}})],t.prototype,"minScale",void 0),Object(n.a)([Object(a.b)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:{source:"maxScale"},write:!1}}}})],t.prototype,"maxScale",void 0),Object(n.a)([Object(a.b)({readOnly:!0})],t.prototype,"version",void 0),Object(n.a)([Object(o.a)("version",["store.version"])],t.prototype,"readVersion",null),Object(n.a)([Object(a.b)({type:String,json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(n.a)([Object(a.b)({type:String,json:{read:!1}})],t.prototype,"sublayerTitleMode",void 0),Object(n.a)([Object(a.b)({type:String})],t.prototype,"title",void 0),Object(n.a)([Object(o.a)("portal-item","title")],t.prototype,"readTitlePortalItem",null),Object(n.a)([Object(o.a)("service","title",["name"])],t.prototype,"readTitleService",null),Object(n.a)([Object(a.b)({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{write:{target:"id",isRequired:!0,ignoreOrigin:!0},read:!1}}}})],t.prototype,"layerId",void 0),Object(n.a)([Object(a.b)(T.n)],t.prototype,"url",null),Object(n.a)([Object(c.a)("url")],t.prototype,"writeUrl",null),Object(n.a)([Object(a.b)()],t.prototype,"parsedUrl",null),Object(n.a)([Object(a.b)({readOnly:!0})],t.prototype,"store",void 0),Object(n.a)([Object(a.b)({type:String,readOnly:!0,json:{read:{source:"store.rootNode"}}})],t.prototype,"rootNode",void 0),t=Object(n.a)([Object(l.a)("esri.layers.mixins.SceneService")],t),t},B=-1e38,F=!1,P="Scene Service",D={getTypeKeywords:()=>[],portalItemLayerType:"unknown",validationOptions:{enabled:!0,ignoreUnsupported:!1,failPolicy:"throw"}}},lx5q:function(e,t,r){"use strict";var n=r("srIe");t.a=class{constructor(e=Number.POSITIVE_INFINITY){this.size=0,this._start=0,this.maxSize=e,this._buffer=isFinite(e)?new Array(e):[]}get entries(){return this._buffer}enqueue(e){if(this.size===this.maxSize){const t=this._buffer[this._start];return this._buffer[this._start]=e,this._start=(this._start+1)%this.maxSize,t}return isFinite(this.maxSize)?this._buffer[(this._start+this.size++)%this.maxSize]=e:this._buffer[this._start+this.size++]=e,null}dequeue(){if(0===this.size)return null;const e=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,e}peek(){return 0===this.size?null:this._buffer[this._start]}find(e){if(0===this.size)return null;for(const t of this._buffer)if(Object(n.i)(t)&&e(t))return t;return null}clear(e){let t=this.dequeue();for(;Object(n.i)(t);)e&&e(t),t=this.dequeue()}}},mYC1:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r("srIe"),i=r("9MzC"),s=r("975N"),a=r("Lqtk"),o=r("AiS/"),l=r("p+Gi"),c=r("W9Wu");class u{constructor(e,t,r){this.parsedUrl=e,this.portalItem=t,this.signal=r,this.rootDocument=null;const n=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);n&&(this.urlParts={root:n[1],layerId:parseInt(n[2],10)})}async fetch(){var e;if(!this.urlParts)return null;const t=null!=(e=this.portalItem)?e:await this.portalItemFromServiceItemId();if(Object(n.h)(t))return this.loadFromUrl();const r=await this.findAndLoadRelatedPortalItem(t);return Object(n.h)(r)?null:this.loadFeatureLayerFromPortalItem(r)}async fetchPortalItem(){var e;if(!this.urlParts)return null;const t=null!=(e=this.portalItem)?e:await this.portalItemFromServiceItemId();return Object(n.h)(t)?null:this.findAndLoadRelatedPortalItem(t)}async fetchRootDocument(){if(Object(n.i)(this.rootDocument))return this.rootDocument;if(Object(n.h)(this.urlParts))return this.rootDocument={},{};const e={query:{f:"json"},responseType:"json",signal:this.signal},t=`${this.urlParts.root}/SceneServer`;try{const r=await Object(a.default)(t,e);this.rootDocument=r.data}catch{this.rootDocument={}}return this.rootDocument}async fetchServiceOwningPortalUrl(){var e;const t=null==(e=s.b)?void 0:e.findServerInfo(this.parsedUrl.path);if(null!=t&&t.owningSystemUrl)return t.owningSystemUrl;const r=this.parsedUrl.path.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const e=(await Object(a.default)(r,{query:{f:"json"},responseType:"json",signal:this.signal})).data.owningSystemUrl;if(e)return e}catch(n){Object(i.t)(n)}return null}async findAndLoadRelatedPortalItem(e){try{return(await e.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:this.signal})).find(e=>"Feature Service"===e.type)||null}catch(t){return Object(i.t)(t),null}}async loadFeatureLayerFromPortalItem(e){await e.load({signal:this.signal});const t=await this.findMatchingAssociatedSublayerUrl(e.url);return new c.default({url:t,portalItem:e}).load({signal:this.signal})}async loadFromUrl(){const e=await this.findMatchingAssociatedSublayerUrl(`${this.urlParts.root}/FeatureServer`);return new c.default({url:e}).load({signal:this.signal})}async findMatchingAssociatedSublayerUrl(e){const t=e.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),r={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:this.signal},n=this.urlParts.layerId,i=this.fetchRootDocument(),s=Object(a.default)(t,r),[o,l]=await Promise.all([s,i]),c=l&&l.layers,u=o.data&&o.data.layers;if(!Array.isArray(u))throw new Error("expected layers array");if(Array.isArray(c)){for(let a=0;a<Math.min(c.length,u.length);a++)if(c[a].id===n)return`${t}/${u[a].id}`}else if(n<u.length)return`${t}/${u[n].id}`;throw new Error("could not find matching associated sublayer")}async portalItemFromServiceItemId(){const e=(await this.fetchRootDocument()).serviceItemId;if(!e)return null;const t=new l.default({id:e}),r=await this.fetchServiceOwningPortalUrl();Object(n.i)(r)&&(t.portal=new o.a({url:r}));try{return t.load({signal:this.signal})}catch(s){return Object(i.t)(s),null}}}},ncPp:function(e,t,r){"use strict";r.r(t);var n=r("pO5D"),i=(r("wSAH"),r("s7YA")),s=(r("6S2I"),r("zqDF"),r("WbKI")),a=r("r88o"),o=r("04ZG"),l=r("Cduq"),c=r("zlDU"),u=r("4EHJ"),d=(r("ju1D"),r("9AIY"),r("WZb1")),h=r("SuVq"),p=r("OvF4"),f=(r("4GrV"),r("Lqtk")),y=r("pqNC"),b=r("5pQd"),m=r("uRH/"),g=r("mXvl"),O=r("DbUH"),j=r("jhcG"),v=r("WmKv"),w=r("UOZ4"),x=r("3/ME"),I=r("OYGz");let S=class extends(Object(g.a)(Object(j.a)(Object(v.a)(Object(m.a)(Object(O.a)(Object(b.a)(y.a))))))){constructor(...e){super(...e),this.copyright="",this.fullExtent=new p.a(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,d.a.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=d.a.WebMercator,this.subDomains=null,this.tileInfo=new x.a({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new h.a({x:-20037508.342787,y:20037508.342787,spatialReference:d.a.WebMercator}),spatialReference:d.a.WebMercator,lods:[new w.a({level:0,scale:591657527.591555,resolution:156543.033928}),new w.a({level:1,scale:295828763.795777,resolution:78271.5169639999}),new w.a({level:2,scale:147914381.897889,resolution:39135.7584820001}),new w.a({level:3,scale:73957190.948944,resolution:19567.8792409999}),new w.a({level:4,scale:36978595.474472,resolution:9783.93962049996}),new w.a({level:5,scale:18489297.737236,resolution:4891.96981024998}),new w.a({level:6,scale:9244648.868618,resolution:2445.98490512499}),new w.a({level:7,scale:4622324.434309,resolution:1222.99245256249}),new w.a({level:8,scale:2311162.217155,resolution:611.49622628138}),new w.a({level:9,scale:1155581.108577,resolution:305.748113140558}),new w.a({level:10,scale:577790.554289,resolution:152.874056570411}),new w.a({level:11,scale:288895.277144,resolution:76.4370282850732}),new w.a({level:12,scale:144447.638572,resolution:38.2185141425366}),new w.a({level:13,scale:72223.819286,resolution:19.1092570712683}),new w.a({level:14,scale:36111.909643,resolution:9.55462853563415}),new w.a({level:15,scale:18055.954822,resolution:4.77731426794937}),new w.a({level:16,scale:9027.977411,resolution:2.38865713397468}),new w.a({level:17,scale:4513.988705,resolution:1.19432856685505}),new w.a({level:18,scale:2256.994353,resolution:.597164283559817}),new w.a({level:19,scale:1128.497176,resolution:.298582141647617})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(e,t){return"string"==typeof e?{urlTemplate:e,...t}:e}load(e){const t=this.loadFromPortal({supportedTypes:["WMTS"]},e).then(()=>{let e="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const t=new u.a(this.urlTemplate);this.subDomains&&this.subDomains.length>0||-1===t.authority.indexOf("{subDomain}")||(e="is missing 'subDomains' property")}else e="spatialReference must match tileInfo.spatialReference";else e="is missing the required 'urlTemplate' property value";if(e)throw new c.a("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${e}`)});return this.addResolvingPromise(t),Promise.resolve(this)}get levelValues(){const e=[];if(!this.tileInfo)return null;for(const t of this.tileInfo.lods)e[t.level]=t.levelValue||t.level;return e}readSpatialReference(e,t){return e||t.fullExtent&&t.fullExtent.spatialReference&&d.a.fromJSON(t.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const e=[],{urlTemplate:t,subDomains:r}=this,n=new u.a(t),i=n.scheme?n.scheme+"://":"//",s=i+n.authority+"/";if(-1===n.authority.indexOf("{subDomain}"))e.push(s);else if(r&&r.length>0&&n.authority.split(".").length>1)for(const a of r)e.push(i+n.authority.replace(/\{subDomain\}/gi,a)+"/");return e.map(e=>("/"!==e.charAt(e.length-1)&&(e+="/"),e))}get urlPath(){if(!this.urlTemplate)return null;const e=this.urlTemplate,t=new u.a(e);return e.substring(((t.scheme?t.scheme+"://":"//")+t.authority+"/").length)}readUrlTemplate(e,t){return e||t.templateUrl}writeUrlTemplate(e,t){e&&Object(u.v)(e)&&(e="https:"+e),e&&(e=e.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),e=Object(u.C)(e)),t.templateUrl=e}fetchTile(e,t,r,n={}){const{signal:i,timestamp:s}=n,a=this.getTileUrl(e,t,r),o={responseType:"image",signal:i};return null!=s&&(o.query={_ts:n.timestamp}),Object(f.default)(a,o).then(e=>e.data)}getTileUrl(e,t,r){const n=this.levelValues[e];return this.tileServers[t%this.tileServers.length]+Object(i.c)(this.urlPath,{level:n,z:n,col:r,x:r,row:t,y:t})}};Object(n.a)([Object(s.b)({type:String,value:"",json:{write:!0}})],S.prototype,"copyright",void 0),Object(n.a)([Object(s.b)({type:p.a,json:{write:!0}})],S.prototype,"fullExtent",void 0),Object(n.a)([Object(s.b)({readOnly:!0,json:{read:!1,write:!1}})],S.prototype,"legendEnabled",void 0),Object(n.a)([Object(s.b)({type:["show","hide"]})],S.prototype,"listMode",void 0),Object(n.a)([Object(s.b)()],S.prototype,"levelValues",null),Object(n.a)([Object(s.b)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],S.prototype,"isReference",void 0),Object(n.a)([Object(s.b)({type:["WebTiledLayer"],value:"WebTiledLayer"})],S.prototype,"operationalLayerType",void 0),Object(n.a)([Object(s.b)({readOnly:!0,json:{read:!1,write:!1}})],S.prototype,"popupEnabled",void 0),Object(n.a)([Object(s.b)({type:d.a})],S.prototype,"spatialReference",void 0),Object(n.a)([Object(a.a)("spatialReference",["spatialReference","fullExtent.spatialReference"])],S.prototype,"readSpatialReference",null),Object(n.a)([Object(s.b)({type:[String],json:{write:!0}})],S.prototype,"subDomains",void 0),Object(n.a)([Object(s.b)({type:x.a,json:{write:!0}})],S.prototype,"tileInfo",void 0),Object(n.a)([Object(s.b)({readOnly:!0})],S.prototype,"tileServers",null),Object(n.a)([Object(s.b)({json:{read:!1}})],S.prototype,"type",void 0),Object(n.a)([Object(s.b)()],S.prototype,"urlPath",null),Object(n.a)([Object(s.b)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],S.prototype,"urlTemplate",void 0),Object(n.a)([Object(a.a)("urlTemplate",["urlTemplate","templateUrl"])],S.prototype,"readUrlTemplate",null),Object(n.a)([Object(l.a)("urlTemplate",{templateUrl:{type:String}})],S.prototype,"writeUrlTemplate",null),Object(n.a)([Object(s.b)({type:I.a,json:{write:!0}})],S.prototype,"wmtsInfo",void 0),S=Object(n.a)([Object(o.a)("esri.layers.WebTileLayer")],S),t.default=S},o6Le:function(e,t,r){"use strict";r.d(t,"a",function(){return i});class n{constructor(e={}){this._options=e}toQueryParams(e){if(!e)return null;const t=e.toJSON(),r={};return Object.keys(t).forEach(e=>{const n=this._options[e];if(n){const i="boolean"!=typeof n&&n.name?n.name:e,s="boolean"!=typeof n&&n.getter?n.getter(t):t[e];null!=s&&(r[i]=(e=>{if(!Array.isArray(e))return!1;const[t]=e;return"number"==typeof t||"string"==typeof t})(s)?s.join(","):"object"==typeof s?JSON.stringify(s):s)}else r[e]=t[e]},this),r}}function i(e){return new n(e)}},oLSx:function(e,t,r){"use strict";r.d(t,"a",function(){return n});const n={BingMapsLayer:async()=>(await r.e(128).then(r.bind(null,"CR/Q"))).default,BuildingSceneLayer:async()=>(await Promise.all([r.e(0),r.e(129)]).then(r.bind(null,"TWTt"))).default,CSVLayer:async()=>(await r.e(117).then(r.bind(null,"Kn0e"))).default,ElevationLayer:async()=>(await Promise.all([r.e(0),r.e(29)]).then(r.bind(null,"8g7C"))).default,FeatureLayer:async()=>(await Promise.resolve().then(r.bind(null,"W9Wu"))).default,GroupLayer:async()=>(await r.e(30).then(r.bind(null,"VPx4"))).default,GeoRSSLayer:async()=>(await r.e(130).then(r.bind(null,"AP+b"))).default,ImageryLayer:async()=>(await Promise.all([r.e(17),r.e(25),r.e(131)]).then(r.bind(null,"/GVf"))).default,ImageryTileLayer:async()=>(await Promise.all([r.e(17),r.e(25),r.e(0),r.e(132)]).then(r.bind(null,"mRf7"))).default,IntegratedMeshLayer:async()=>(await Promise.all([r.e(0),r.e(133)]).then(r.bind(null,"yvy3"))).default,KMLLayer:async()=>(await Promise.all([r.e(0),r.e(115)]).then(r.bind(null,"9fxc"))).default,MapImageLayer:async()=>(await Promise.all([r.e(0),r.e(31)]).then(r.bind(null,"U/i9"))).default,MapNotesLayer:async()=>(await Promise.all([r.e(0),r.e(134)]).then(r.bind(null,"Wvof"))).default,OpenStreetMapLayer:async()=>(await Promise.all([r.e(0),r.e(135)]).then(r.bind(null,"jFi3"))).default,PointCloudLayer:async()=>(await Promise.all([r.e(0),r.e(136)]).then(r.bind(null,"RLtZ"))).default,RouteLayer:async()=>(await r.e(137).then(r.bind(null,"soW6"))).default,SceneLayer:async()=>(await Promise.all([r.e(0),r.e(138)]).then(r.bind(null,"0yFX"))).default,StreamLayer:async()=>(await r.e(139).then(r.bind(null,"u6iX"))).default,TileLayer:async()=>(await Promise.all([r.e(0),r.e(140)]).then(r.bind(null,"JlDE"))).default,UnknownLayer:async()=>(await r.e(141).then(r.bind(null,"qcqe"))).default,UnsupportedLayer:async()=>(await r.e(142).then(r.bind(null,"GN2T"))).default,VectorTileLayer:async()=>(await Promise.all([r.e(20),r.e(0),r.e(56)]).then(r.bind(null,"FzwJ"))).default,WebTileLayer:async()=>(await r.e(0).then(r.bind(null,"ncPp"))).default,WMSLayer:async()=>(await Promise.all([r.e(0),r.e(143)]).then(r.bind(null,"h2Da"))).default,WMTSLayer:async()=>(await Promise.all([r.e(0),r.e(144)]).then(r.bind(null,"sDlQ"))).default}},ofcG:function(e,t,r){"use strict";var n,i=r("pO5D"),s=(r("wSAH"),r("f/qv")),a=(r("6S2I"),r("zqDF")),o=r("WbKI"),l=r("RI0u"),c=r("04ZG"),u=(r("4EHJ"),r("ju1D"),r("9AIY"),r("dzHX")),d=r("1hFN"),h=r("ag7Y"),p=r("nvBr");let f=n=class extends h.a{constructor(){super(...arguments),this.description=null,this.label=null,this.values=null,this.color=null}clone(){return new n({description:this.description,label:this.label,values:Object(s.a)(this.values),color:Object(s.a)(this.color)})}};Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,"description",void 0),Object(i.a)([Object(o.b)({type:String,json:{write:!0}})],f.prototype,"label",void 0),Object(i.a)([Object(o.b)({type:[String],json:{write:!0}})],f.prototype,"values",void 0),Object(i.a)([Object(o.b)({type:p.a,json:{type:[a.a],write:!0}})],f.prototype,"color",void 0),f=n=Object(i.a)([Object(c.a)("esri.renderers.support.pointCloud.ColorUniqueValueInfo")],f);var y,b=f;let m=y=class extends u.a{constructor(e){super(e),this.type="point-cloud-unique-value",this.field=null,this.fieldTransformType=null,this.colorUniqueValueInfos=null,this.legendOptions=null}clone(){return new y({...this.cloneProperties(),field:Object(s.a)(this.field),fieldTransformType:Object(s.a)(this.fieldTransformType),colorUniqueValueInfos:Object(s.a)(this.colorUniqueValueInfos),legendOptions:Object(s.a)(this.legendOptions)})}};Object(i.a)([Object(l.a)({pointCloudUniqueValueRenderer:"point-cloud-unique-value"})],m.prototype,"type",void 0),Object(i.a)([Object(o.b)({json:{write:!0},type:String})],m.prototype,"field",void 0),Object(i.a)([Object(o.b)({type:u.a.fieldTransformTypeKebabDict.apiValues,json:{type:u.a.fieldTransformTypeKebabDict.jsonValues,read:u.a.fieldTransformTypeKebabDict.read,write:u.a.fieldTransformTypeKebabDict.write}})],m.prototype,"fieldTransformType",void 0),Object(i.a)([Object(o.b)({type:[b],json:{write:!0}})],m.prototype,"colorUniqueValueInfos",void 0),Object(i.a)([Object(o.b)({type:d.a,json:{write:!0}})],m.prototype,"legendOptions",void 0),m=y=Object(i.a)([Object(c.a)("esri.renderers.PointCloudUniqueValueRenderer")],m),t.a=m},p0UO:function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"b",function(){return n});const n=1;function i(e,t){let r=0;for(const i of t){var n;const t=null==(n=i.attributes)?void 0:n[e];"number"==typeof t&&isFinite(t)&&(r=Math.max(r,t))}return r}},q03O:function(e,t,r){"use strict";var n=r("yE7X"),i=r("kvL/");t.a=class extends i.a{renderChildren(e){this.attributeView.bindTextures(e.context),this.children.some(e=>e.hasData)&&(super.renderChildren(e),e.drawPhase===n.c.MAP&&this._renderChildren(e),e.drawPhase===n.c.HIGHLIGHT&&this._renderHighlight(e))}_renderHighlight(e){const{painter:t}=e,r=t.effects.highlight;r.bind(e),this._renderChildren(e,r.defines),r.draw(e),r.unbind()}}},q2iW:function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r.d(t,"b",function(){return i});var n=r("3/ME");const i={type:n.a,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:s}}}}};function s(e,t,r,i){if(!e)return null;const{minScale:s,maxScale:a,minLOD:o,maxLOD:l}=t;if(null!=o&&null!=l)return n.a.fromJSON(i&&i.ignoreMinMaxLOD?e:{...e,lods:e.lods.filter(({level:e})=>null!=e&&e>=o&&e<=l)});if(0!==s&&0!==a){const t=e=>Math.round(1e4*e)/1e4,r=s?t(s):1/0,i=a?t(a):-1/0;return n.a.fromJSON({...e,lods:e.lods.filter(e=>{const n=t(e.scale);return n<=r&&n>=i})})}return n.a.fromJSON(e)}},sTkM:function(e,t,r){"use strict";function n(){return[0,0,0,1]}function i(e,t){return new Float64Array(e,t,4)}r.d(t,"a",function(){return n}),r.d(t,"b",function(){return i}),Object.freeze({__proto__:null,create:n,clone:function(e){return[e[0],e[1],e[2],e[3]]},fromValues:function(e,t,r,n){return[e,t,r,n]},createView:i,IDENTITY:[0,0,0,1]})},tIWS:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("r88o"),a=r("04ZG"),o=(r("4EHJ"),r("ju1D"),r("9AIY"),r("WZb1")),l=(r("4GrV"),r("q2iW")),c=r("llFo");const u=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}readMaxScale(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,t){return t.capabilities&&t.capabilities.indexOf("Tilemap")>-1?new c.a({layer:this}):null}};return Object(n.a)([Object(i.b)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),Object(n.a)([Object(i.b)()],t.prototype,"minScale",void 0),Object(n.a)([Object(s.a)("service","minScale")],t.prototype,"readMinScale",null),Object(n.a)([Object(i.b)()],t.prototype,"maxScale",void 0),Object(n.a)([Object(s.a)("service","maxScale")],t.prototype,"readMaxScale",null),Object(n.a)([Object(i.b)({type:o.a})],t.prototype,"spatialReference",void 0),Object(n.a)([Object(i.b)({readOnly:!0})],t.prototype,"supportsBlankTile",null),Object(n.a)([Object(i.b)(l.b)],t.prototype,"tileInfo",void 0),Object(n.a)([Object(i.b)()],t.prototype,"tilemapCache",void 0),Object(n.a)([Object(s.a)("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),Object(n.a)([Object(i.b)()],t.prototype,"version",void 0),t=Object(n.a)([Object(a.a)("esri.layers.mixins.ArcGISCachedService")],t),t}},tODX:function(e,t,r){"use strict";r.d(t,"a",function(){return j}),r.d(t,"b",function(){return p}),r.d(t,"c",function(){return g}),r.d(t,"d",function(){return h}),r.d(t,"e",function(){return m}),r.d(t,"f",function(){return b}),r.d(t,"g",function(){return f}),r.d(t,"h",function(){return O});var n=r("zlDU"),i=r("f4Nx"),s=r("l4ZG"),a=r("SuVq"),o=r("OvF4"),l=(r("4GrV"),r("gEht")),c=r("gYg2");const u=5e-4,d=function(e,t){const r=(e.isWGS84||e.isWebMercator)&&(t.isWGS84||t.isWebMercator);return!(e.equals(t)||r)};async function h(){if(Object(c.d)()||!Object(c.e)())return null;await Object(c.f)()}function p(e,t,r){if(!d(e.spatialReference,t))return null;if(!Object(c.d)())throw new n.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");return r?Object(c.b)(t,e.spatialReference,e):Object(c.b)(e.spatialReference,t,e)}function f(e,t,r,i=null){if(e.spatialReference.equals(t))return e;const a=d(e.spatialReference,t);if(a&&!Object(c.d)())throw new n.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");const l=r.center,u=new o.a({xmin:l.x-e.x/2,xmax:l.x+e.x/2,ymin:l.y-e.y/2,ymax:l.y+e.y/2,spatialReference:e.spatialReference}),h=a?Object(c.g)(u,t,i):Object(s.d)(u,t);return null==h?null:{x:h.xmax-h.xmin,y:h.ymax-h.ymin}}function y(e,t=.01){return Object(l.d)(e)?t/Object(l.d)(e):0}function b(e,t,r=null,a=!0){const o=e.spatialReference;if(o.equals(t))return e;const l=d(o,t);if(l&&!Object(c.d)())throw new n.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");const h=l?Object(c.g)(e,t,r):Object(s.d)(e,t);if(h&&a&&t.isGeographic){var p,f;const[t,r]=o.isWebMercator?Object(i.d)(o).origin:null!=(p=null==(f=Object(i.d)(o))?void 0:f.valid)?p:[],n=y(o);n&&null!=t&&null!=r&&(Math.abs(e.x-t)<n&&Math.abs(180-h.x)<u?h.x-=360:Math.abs(e.x-r)<n&&Math.abs(180+h.x)<u&&(h.x+=360))}return h}function m(e,t,r=null,o=!0){var l,h,p,f;const m=e.spatialReference;if(m.equals(t))return e;const g=d(m,t);if(g&&!Object(c.d)())throw new n.a("rasterprojectionhelper-projectExtent","projection engine is not loaded");const O=g?Object(c.g)(e,t,r):Object(s.d)(e,t);let[j,v]=null!=(l=null==(h=Object(i.d)(m))?void 0:h.origin)?l:[];if(O&&o&&m.isWebMercator&&t.isGeographic&&null!=j&&null!=v){const n=.001,i=1e3;if(Math.abs(e.xmin-j)<n&&Math.abs(v-e.xmax)>i&&Math.abs(180-O.xmax)<u){O.xmin=-180;const n=[];n.push(new a.a(e.xmax,e.ymin,m)),n.push(new a.a(e.xmax,(e.ymin+e.ymax)/2,m)),n.push(new a.a(e.xmax,e.ymax,m));const i=n.map(e=>b(e,t,r)).filter(e=>!isNaN(null==e?void 0:e.x)).map(e=>e.x);O.xmax=Math.max.apply(null,i)}if(Math.abs(e.xmax-v)<n&&Math.abs(j-e.xmin)>i&&Math.abs(180+O.xmin)<u){O.xmax=180;const n=[];n.push(new a.a(e.xmin,e.ymin,m)),n.push(new a.a(e.xmin,(e.ymin+e.ymax)/2,m)),n.push(new a.a(e.xmin,e.ymax,m));const i=n.map(e=>b(e,t,r)).filter(e=>!isNaN(null==e?void 0:e.x)).map(e=>e.x);O.xmin=Math.min.apply(null,i)}}[j,v]=t.isWebMercator?Object(i.d)(t).origin:null!=(p=null==(f=Object(i.d)(t))?void 0:f.valid)?p:[];const w=y(t);return w&&null!=j&&null!=v&&(Math.abs(O.xmin-j)<w&&(O.xmin=j),Math.abs(O.xmax-v)<w&&(O.xmax=v)),O}function g(e,t,r,s=null,o=null,l=!1,u=[32,32]){var h,p;if(d(e.spatialReference,t.spatialReference)&&!Object(c.d)())throw new n.a("rasterprojectionhelper-projectResolution","projection engine is not loaded");if(!(e&&t&&r))return null;const{xmin:f,ymin:y,xmax:m,ymax:g}=e,O=e.spatialReference,j=t.spatialReference,[v,w]=null!=(h=null==(p=Object(i.d)(O))?void 0:p.valid)?h:[],x={x:u[0]*r.x,y:u[1]*r.y},I={cols:Math.ceil((m-f)/x.x-.1)+1,rows:Math.ceil((g-y)/x.y-.1)+1},S=x.x,_=x.y,M=[];let T,L=!1;for(let n=0;n<I.cols;n++){const e=[];for(let r=0;r<I.rows;r++){let i=b(new a.a({x:f+S*n,y:g-_*r,spatialReference:O}),j,s);o&&(i=o.inverseTransform(i)),e.push(i),n>0&&l&&i&&T[r]&&null!=v&&i.x<T[r].x&&(i.x+=w-v),i?(M.push((i.x-t.xmin)/(t.xmax-t.xmin)),M.push((t.ymax-i.y)/(t.ymax-t.ymin))):(M.push(NaN),M.push(NaN),L=!0)}T=e}const A=function(e,t){const r=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4;return[Math.abs((e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4-e[2*t.rows+2]),Math.abs(r-e[2*t.rows+3])]}(M,I),E=new Float32Array((I.cols-1)*(I.rows-1)*2*6),B=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),F=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let n=0;n<I.cols-1;n++){for(let e=0;e<I.rows-1;e++){let t=n*I.rows*2+2*e;const r=M[t],i=M[t+1],s=M[t+2],a=M[t+3];t+=2*I.rows;const o=M[t],l=M[t+1],c=M[t+2],u=M[t+3];let d=0,h=12*(e*(I.cols-1)+n);for(let e=0;e<3;e++)E[h++]=B[d++]*r+B[d++]*s+B[d++]*c;d=0;for(let e=0;e<3;e++)E[h++]=B[d++]*i+B[d++]*a+B[d++]*u;d=0;for(let e=0;e<3;e++)E[h++]=F[d++]*r+F[d++]*o+F[d++]*c;d=0;for(let e=0;e<3;e++)E[h++]=F[d++]*i+F[d++]*l+F[d++]*u}if(L)for(let e=0;e<E.length;e++)isNaN(E[e])&&(E[e]=-1)}return{offsets:M,error:A,coefficients:E,spacing:u,size:[I.cols-1,I.rows-1]}}function O(e,t,r){const n=Math.log(e.x/t.pixelSize.x)/Math.LN2,i=Math.log(e.y/t.pixelSize.y)/Math.LN2,s=t.storageInfo.maximumPyramidLevel||0;let o="down"===r?Math.floor(Math.min(n,i)):"up"===r?Math.ceil(Math.max(n,i)):Math.round((n+i)/2),l=!1;o<0?o=0:o>s&&(l=o>s+3,o=s);const c=2**o;return{pyramidLevel:o,pyramidResolution:new a.a({x:c*t.nativePixelSize.x,y:c*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:l}}function j(e,t,r=512,n=!0){const{extent:i,spatialReference:s,pixelSize:o}=e,c=f(new a.a({x:o.x,y:o.y,spatialReference:s}),t,i);if(null==c)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const u=(c.x+c.y)/2,d=Object(l.d)(t),h=u*d*96*39.37,p=t.isGeographic?512/r*295828763.7958547:512/r*591657527.591555;let y=!1;const b=m(i,t);n&&(t.isGeographic||t.isWebMercator)&&(y=b.xmin*b.xmax<0);let g,O=h;const j=1.001;if(y){O=p;const e=.29858214164761665,t=e*(96*d*39.37);g=f(new a.a({x:e,y:e,spatialReference:{wkid:3857}}),s,b),g.x*=O/t,g.y*=O/t}else{g={x:o.x,y:o.y};const t=Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2);let r=0;for(;O<p*(j/2)&&r<t;)r++,O*=2,g.x*=2,g.y*=2;Math.max(O,p)/Math.min(O,p)<=j&&(O=p)}const v=[O],w=[{x:g.x,y:g.y}],x=Math.min(70.5310735,h)/j;for(;O>=x;)O/=2,g.x/=2,g.y/=2,v.push(O),w.push({x:g.x,y:g.y});return{projectedPixelSize:c,scales:v,srcResolutions:w,isCustomTilingScheme:!y}}},uAeW:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("04ZG"),a=(r("4EHJ"),r("ju1D"),r("9AIY"),r("/CmD")),o=r("kJYu");const l={visible:"visibleSublayers"};let c=class extends(Object(o.b)(a.a)){constructor(e){super(e),this.scale=0}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("wms-sublayer-update",e=>this.notifyChange(l[e.propertyName]))],"layer"))}get layers(){const{visibleSublayers:e}=this;return e.filter(e=>e.name).map(e=>e.name).join(",")}get version(){this.commitProperty("layers");const e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:e,scale:t}=this,r=null==e?void 0:e.sublayers,n=[],i=e=>{const{minScale:r,maxScale:s,sublayers:a,visible:o}=e;o&&(0===t||(0===r||t<=r)&&(0===s||t>=s))&&(a?a.forEach(i):n.unshift(e))};return null==r||r.forEach(i),n}toJSON(){const{layer:e,layers:t}=this,{imageFormat:r,imageTransparency:n,version:i}=e;return{format:r,request:"GetMap",service:"WMS",styles:"",transparent:n,version:i,layers:t}}};Object(n.a)([Object(i.b)()],c.prototype,"layer",null),Object(n.a)([Object(i.b)({readOnly:!0})],c.prototype,"layers",null),Object(n.a)([Object(i.b)({type:Number})],c.prototype,"scale",void 0),Object(n.a)([Object(i.b)({readOnly:!0})],c.prototype,"version",null),Object(n.a)([Object(i.b)({readOnly:!0})],c.prototype,"visibleSublayers",null),c=Object(n.a)([Object(s.a)("esri.layers.support.ExportWMSImageParameters")],c)},ukaK:function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("04ZG"),a=(r("4EHJ"),r("ju1D"),r("9AIY"),r("kJYu"));let o=class extends a.a{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null}};Object(n.a)([Object(i.b)({readOnly:!0})],o.prototype,"supportsTileUpdates",null),Object(n.a)([Object(i.b)({constructOnly:!0})],o.prototype,"remoteClient",void 0),Object(n.a)([Object(i.b)({constructOnly:!0})],o.prototype,"service",void 0),Object(n.a)([Object(i.b)()],o.prototype,"spatialReference",null),Object(n.a)([Object(i.b)({constructOnly:!0})],o.prototype,"tileInfo",void 0),Object(n.a)([Object(i.b)({constructOnly:!0})],o.prototype,"tileStore",void 0),o=Object(n.a)([Object(s.a)("esri.views.2d.layers.features.processors.BaseProcessor")],o),t.a=o},vbiG:function(e,t,r){"use strict";var n=r("pO5D"),i=(r("wSAH"),r("6S2I"),r("zqDF"),r("WbKI")),s=r("04ZG"),a=(r("4EHJ"),r("ju1D"),r("9AIY"),r("9MzC")),o=r("/CmD"),l=r("f4Nx"),c=r("OvF4"),u=r("kYAx"),d=r("3/ME"),h=r("rlSK"),p=r("AY31");const f=Math.PI/180;var y=r("xzrc");const b=Object(u.e)(),m=[0,0],g=new h.a(0,0,0,0);let O=class extends o.a{constructor(e){super(e),this._imagePromise=null,this.hidpi=!1,this.imageMaxWidth=2048,this.imageMaxHeight=2048,this.imageRotationSupported=!1,this.imageNormalizationSupported=!1,this.update=Object(a.i)(async(e,t)=>{const r=e.state,n=Object(l.d)(r.spatialReference),i=this.hidpi?e.pixelRatio:1;if(!e.stationary||this.destroyed)return null;this.imageRotationSupported?(m[0]=r.size[0],m[1]=r.size[1]):function(e,t){const r=t.rotation*f,n=Math.abs(Math.cos(r)),i=Math.abs(Math.sin(r)),[s,a]=t.size;e[0]=Math.round(a*i+s*n),e[1]=Math.round(a*n+s*i)}(m,r);const s=Math.floor(m[0]*i)>this.imageMaxWidth||Math.floor(m[1]*i)>this.imageMaxHeight,a=!this.imageNormalizationSupported&&n&&(r.extent.xmin<n.valid[0]||r.extent.xmax>n.valid[1]),o=this.imageRotationSupported?r.rotation:0;if(s||a){let e=Math.min(this.imageMaxWidth,this.imageMaxHeight);a&&(e=Math.min(r.worldScreenWidth,e)),this._imagePromise=this._tiledExport(r,e,o,i,t)}else this._imagePromise=this._singleExport(r,m,o,i,t);return this._imagePromise.then(async e=>{if(this._imagePromise=null,!this.destroyed){for(const t of this.container.children)e.includes(t)||t.fadeOut().then(()=>{t.remove()});for(const t of e)this.container.addChild(t),t.fadeIn()}}).catch(e=>{throw this._imagePromise=null,e})},5e3)}destroy(){}get updating(){return null!==this._imagePromise}updateExports(e){for(const t of this.container.children){if(!t.visible||!t.stage)return;e(t)?console.error("ExportStrategy.updateExports doesn't support promise yet"):(t.invalidateTexture(),t.requestRender())}}_export(e,t,r,n,i,s){return Promise.resolve().then(()=>this.fetchSource(e,Math.floor(t*i),Math.floor(r*i),{rotation:n,pixelRatio:i,signal:s})).then(r=>{const s=new y.a(r,"additive");return s.x=e.xmin,s.y=e.ymax,s.resolution=e.width/t,s.rotation=n,s.pixelRatio=i,s})}_singleExport(e,t,r,n,i){!function(e,t,r,n){const[i,s]=t,[a,o]=n,l=.5*r;e[0]=i-l*a,e[1]=s-l*o,e[2]=i+l*a,e[3]=s+l*o}(b,e.center,e.resolution,t);const s=new c.a(b[0],b[1],b[2],b[3],e.spatialReference);return this._export(s,t[0],t[1],r,n,i).then(e=>[e])}_tiledExport(e,t,r,n,i){const s=d.a.create({size:t,spatialReference:e.spatialReference,scales:[e.scale]}),a=new p.a(s),o=a.getTileCoverage(e);if(!o)return null;const l=[];return o.forEach((s,o,u,d)=>{g.set(s,o,u,d),a.getTileBounds(b,g);const h=new c.a(b[0],b[1],b[2],b[3],e.spatialReference);l.push(this._export(h,t,t,r,n,i))}),Promise.all(l)}};Object(n.a)([Object(i.b)()],O.prototype,"_imagePromise",void 0),Object(n.a)([Object(i.b)()],O.prototype,"container",void 0),Object(n.a)([Object(i.b)()],O.prototype,"fetchSource",void 0),Object(n.a)([Object(i.b)()],O.prototype,"hidpi",void 0),Object(n.a)([Object(i.b)()],O.prototype,"imageMaxWidth",void 0),Object(n.a)([Object(i.b)()],O.prototype,"imageMaxHeight",void 0),Object(n.a)([Object(i.b)()],O.prototype,"imageRotationSupported",void 0),Object(n.a)([Object(i.b)()],O.prototype,"imageNormalizationSupported",void 0),Object(n.a)([Object(i.b)()],O.prototype,"requestUpdate",void 0),Object(n.a)([Object(i.b)()],O.prototype,"updating",null),O=Object(n.a)([Object(s.a)("esri.views.2d.layers.support.ExportStrategy")],O),t.a=O},xzrc:function(e,t,r){"use strict";r.d(t,"a",function(){return u}),r("wSAH");var n=r("HJJS"),i=r("jHF5"),s=r("c46T"),a=(r("n4uK"),r("GVa1"),r("of9L")),o=(r("0meK"),r("fEsP")),l=r("iUxC");function c(e,t,r){const n={target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071};return t&&r&&(n.width=t,n.height=r),new a.a(e,n)}class u extends o.a{constructor(e=null,t,r=!0){super(),this.requestRenderOnSourceChangedEnabled=r,this._textureInvalidated=!0,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.transforms={dvs:Object(i.b)()},this.blendFunction=t,this.source=e,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null)}get isSourceScaled(){return this.width!==this.sourceWidth||this.height!==this.sourceHeight}get height(){return void 0!==this._height?this._height:this.sourceHeight}set height(e){this._height=e}get source(){return this._source}set source(e){this._source=e,this.invalidateTexture()}get sourceHeight(){return this._source instanceof HTMLImageElement?this._source.naturalHeight:this._source.height}get sourceWidth(){return this._source instanceof HTMLImageElement?this._source.naturalWidth:this._source.width}get width(){return void 0!==this._width?this._width:this.sourceWidth}set width(e){this._width=e}beforeRender(e){super.beforeRender(e),this.updateTexture(e)}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this.requestRenderOnSourceChangedEnabled&&this.requestRender())}setTransform(e){const t=Object(n.d)(this.transforms.dvs),[r,i]=e.toScreenNoRotation([0,0],this.x,this.y),a=this.resolution/this.pixelRatio/e.resolution,o=a*this.width,l=a*this.height,c=Math.PI*this.rotation/180;Object(n.a)(t,t,Object(s.b)(r,i)),Object(n.a)(t,t,Object(s.b)(o/2,l/2)),Object(n.h)(t,t,-c),Object(n.a)(t,t,Object(s.b)(-o/2,-l/2)),Object(n.e)(t,t,Object(s.b)(o,l)),Object(n.f)(this.transforms.dvs,e.displayViewMat3,t)}setSamplingProfile(e){this._texture&&(e.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(e.samplingMode))}bind({context:e},t){this._texture&&e.bindTexture(this._texture,t)}updateTexture({context:e}){var t;if(!this.stage)return null==(t=this._texture)||t.dispose(),void(this._texture=null);if(!this._textureInvalidated)return;this._textureInvalidated=!1,this._texture||(this._texture=this.source?c(e,this.sourceWidth,this.sourceHeight):c(e));const r=this.source;if(r){if(this._texture.resize(this.sourceWidth,this.sourceHeight),function(e){return e&&"render"in e}(r))if(r instanceof l.a){const e=r.getRenderedRasterPixels();this._texture.setData(e.renderedRasterPixels)}else this._texture.setData(function(e){const t=document.createElement("canvas");return t.width=e.width,t.height=e.height,e.render(t.getContext("2d")),t}(r));else(function(e){return e&&!("render"in e)})(r)&&this._texture.setData(r);this.ready()}else this._texture.setData(null)}onAttach(){this.invalidateTexture()}onDetach(){this.invalidateTexture()}}},zna6:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("srIe"),i=r("tQ+6"),s=r("ikTR"),a=r("RjdO");class o{constructor(e=9,t){this.compareMinX=d,this.compareMinY=h,this.toBBox=function(e){return e},this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this.toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),j.prune(),v.prune(),w.prune(),x.prune()}all(e){this._all(this.data,e)}search(e,t){let r=this.data;const n=this.toBBox;if(g(e,r))for(j.clear();r;){for(let i=0,s=r.children.length;i<s;i++){const s=r.children[i],a=r.leaf?n(s):s;g(e,a)&&(r.leaf?t(s):m(e,a)?this._all(s,t):j.push(s))}r=j.pop()}}collides(e){let t=this.data;const r=this.toBBox;if(!g(e,t))return!1;for(j.clear();t;){for(let n=0,i=t.children.length;n<i;n++){const i=t.children[n],s=t.leaf?r(i):i;if(g(e,s)){if(t.leaf||m(e,s))return!0;j.push(i)}}t=j.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}let t=this._build(e.slice(0,e.length),0,e.length-1,0);if(this.data.children.length)if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const e=this.data;this.data=t,t=e}this._insert(t,this.data.height-t.height-1,!0)}else this.data=t;return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=new S([]),this}remove(e){if(!e)return this;let t,r=this.data,s=null,a=0,o=!1;const l=this.toBBox(e);for(w.clear(),x.clear();r||w.length>0;){var c;if(r||(r=Object(n.c)(w.pop()),s=w.data[w.length-1],a=null!=(c=x.pop())?c:0,o=!0),r.leaf&&(t=Object(i.e)(r.children,e,r.children.length,r.indexHint),-1!==t))return r.children.splice(t,1),w.push(r),this._condense(w),this;o||r.leaf||!m(r,l)?s?(a++,r=s.children[a],o=!1):r=null:(w.push(r),x.push(a),a=0,s=r,r=r.children[0])}return this}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){let r=e;for(v.clear();r;){var n;if(!0===r.leaf)for(const e of r.children)t(e);else v.pushArray(r.children);r=null!=(n=v.pop())?n:null}}_build(e,t,r,n){const i=r-t+1;let s=this._maxEntries;if(i<=s){const n=new S(e.slice(t,r+1));return l(n,this.toBBox),n}n||(n=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/s**(n-1)));const a=new _([]);a.height=n;const o=Math.ceil(i/s),c=o*Math.ceil(Math.sqrt(s));O(e,t,r,c,this.compareMinX);for(let l=t;l<=r;l+=c){const t=Math.min(l+c-1,r);O(e,l,t,o,this.compareMinY);for(let r=l;r<=t;r+=o){const i=Math.min(r+o-1,t);a.children.push(this._build(e,r,i,n-1))}}return l(a,this.toBBox),a}_chooseSubtree(e,t,r,n){for(;n.push(t),!0!==t.leaf&&n.length-1!==r;){let r,n=1/0,i=1/0;for(let s=0,a=t.children.length;s<a;s++){const a=t.children[s],o=p(a),l=y(e,a)-o;l<i?(i=l,n=o<n?o:n,r=a):l===i&&o<n&&(n=o,r=a)}t=r||t.children[0]}return t}_insert(e,t,r){const n=r?e:(0,this.toBBox)(e);w.clear();const i=this._chooseSubtree(n,this.data,t,w);for(i.children.push(e),u(i,n);t>=0&&w.data[t].children.length>this._maxEntries;)this._split(w,t),t--;this._adjustParentBBoxes(n,w,t)}_split(e,t){const r=e.data[t],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);const s=this._chooseSplitIndex(r,i,n);if(!s)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const a=r.children.splice(s,r.children.length-s),o=r.leaf?new S(a):new _(a);o.height=r.height,l(r,this.toBBox),l(o,this.toBBox),t?e.data[t-1].children.push(o):this._splitRoot(r,o)}_splitRoot(e,t){this.data=new _([e,t]),this.data.height=e.height+1,l(this.data,this.toBBox)}_chooseSplitIndex(e,t,r){let n,i,s;n=i=1/0;for(let a=t;a<=r-t;a++){const t=c(e,0,a,this.toBBox),o=c(e,a,r,this.toBBox),l=b(t,o),u=p(t)+p(o);l<n?(n=l,s=a,i=u<i?u:i):l===n&&u<i&&(i=u,s=a)}return s}_chooseSplitAxis(e,t,r){const n=e.leaf?this.compareMinX:d,i=e.leaf?this.compareMinY:h;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,i)&&e.children.sort(n)}_allDistMargin(e,t,r,n){e.children.sort(n);const i=this.toBBox,s=c(e,0,t,i),a=c(e,r-t,r,i);let o=f(s)+f(a);for(let l=t;l<r-t;l++){const t=e.children[l];u(s,e.leaf?i(t):t),o+=f(s)}for(let l=r-t-1;l>=t;l--){const t=e.children[l];u(a,e.leaf?i(t):t),o+=f(a)}return o}_adjustParentBBoxes(e,t,r){for(let n=r;n>=0;n--)u(t.data[n],e)}_condense(e){for(let t=e.length-1;t>=0;t--){const r=e.data[t];if(0===r.children.length)if(t>0){const n=e.data[t-1],s=n.children;s.splice(Object(i.e)(s,r,s.length,n.indexHint),1)}else this.clear();else l(r,this.toBBox)}}_initFormat(e){const t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function l(e,t){c(e,0,e.children.length,t,e)}function c(e,t,r,n,i){i||(i=new S([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(let s,a=t;a<r;a++)s=e.children[a],u(i,e.leaf?n(s):s);return i}function u(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function d(e,t){return e.minX-t.minX}function h(e,t){return e.minY-t.minY}function p(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function f(e){return e.maxX-e.minX+(e.maxY-e.minY)}function y(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function b(e,t){const r=Math.max(e.minX,t.minX),n=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,i-r)*Math.max(0,s-n)}function m(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function g(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function O(e,t,r,i,s){const o=[t,r];for(;o.length;){const t=Object(n.c)(o.pop()),r=Object(n.c)(o.pop());if(t-r<=i)continue;const l=r+Math.ceil((t-r)/i/2)*i;Object(a.a)(e,l,r,t,s),o.push(r,l,l,t)}}const j=new s.a,v=new s.a,w=new s.a,x=new s.a({deallocator:void 0});class I extends class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}{constructor(){super(...arguments),this.height=1,this.indexHint=new i.a}}class S extends I{constructor(e){super(),this.children=e,this.leaf=!0}}class _ extends I{constructor(e){super(),this.children=e,this.leaf=!1}}}}]);