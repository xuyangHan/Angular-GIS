(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{zKxS:function(e,t,n){"use strict";n.r(t),n.d(t,"createLabelFunction",function(){return f}),n.d(t,"formatField",function(){return y});var r=n("6S2I"),a=n("zlDU"),u=n("gvqN"),l=n("wdpY"),i=n("RlM3"),s=n("IeLS"),o=n("gLc9"),c=n("ezna");const p=r.a.getLogger("esri.layers.support.labelFormatUtils"),d={type:"simple",evaluate:()=>null},b={getAttribute:(e,t)=>e.field(t)};async function f(e,t,r){if(!e||!e.symbol)return d;const i=e.where,s=Object(c.b)(e),f=i?await n.e(7).then(n.bind(null,"ZqIb")):null;let g;if("arcade"===s.type){const e=await Object(u.c)(s.expression,r,t);g={type:"arcade",evaluate(n){try{const t=e.evaluate({$feature:"attributes"in n?e.repurposeFeature(n):e.repurposeAdapter(n)});if(null!=t)return t.toString()}catch(t){p.error(new a.a("bad-arcade-expression","Encountered an error when evaluating label expression for feature",{feature:n,expression:s}))}return null},needsHydrationToEvaluate:()=>null==Object(c.e)(s.expression)}}else g={type:"simple",evaluate:e=>s.expression.replace(/{[^}]*}/g,n=>{const r=n.slice(1,-1),a=Object(l.n)(t,r);if(!a)return n;let u=null;return"attributes"in e?e&&e.attributes&&(u=e.attributes[a.name]):u=e.field(a.name),null==u?"":y(u,a)})};if(i){let e;try{e=f.WhereClause.create(i,new o.a(t))}catch(w){return d}const n=g.evaluate;g.evaluate=t=>e.testFeature(t,"attributes"in t?void 0:b)?n(t):null}return g}function y(e,t){if(null==e)return"";const n=t.domain;if(n)if("codedValue"===n.type||"coded-value"===n.type){const t=e;for(const e of n.codedValues)if(e.code===t)return e.name}else if("range"===n.type){const t=+e,r="range"in n?n.range[1]:n.maxValue;if(("range"in n?n.range[0]:n.minValue)<=t&&t<=r)return n.name}let r=e;return"date"===t.type||"esriFieldTypeDate"===t.type?r=Object(i.b)(r,Object(i.a)("short-date")):Object(l.q)(t)&&(r=Object(s.b)(+r)),r||""}}}]);