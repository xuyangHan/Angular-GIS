(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{"5LEI":function(e,t,i){"use strict";i.d(t,"a",function(){return a}),i("wSAH");var s=i("HJJS"),n=i("rlSK"),r=i("jHF5"),o=i("fEsP");class a extends o.a{constructor(e,t,i,s=i){super(),this.triangleCountReportedInDebug=0,this.transforms={dvs:Object(r.b)(),tileMat3:Object(r.b)()},this.triangleCount=0,this.key=new n.a(e),this.bounds=t,this.size=i,this.coordRange=s}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}get coords(){return this._coords}get bounds(){return this._bounds}set bounds(e){this._coords=[e[0],e[3]],this._bounds=e}setTransform(e,t){const i=t/(e.resolution*e.pixelRatio),n=this.transforms.tileMat3,[r,o]=e.toScreenNoRotation([0,0],this.coords),a=this.size[0]/this.coordRange[0]*i,l=this.size[1]/this.coordRange[1]*i;Object(s.i)(n,a,0,0,0,l,0,r,o,1),Object(s.f)(this.transforms.dvs,e.displayViewMat3,n)}}},ZyIX:function(e,t,i){"use strict";var s=i("yE7X"),n=i("b3VY"),r=i("7F7D"),o=i("mgI5");const a=(e,t)=>e.key.level-t.key.level!=0?e.key.level-t.key.level:e.key.row-t.key.row!=0?e.key.row-t.key.row:e.key.col-t.key.col;t.a=class extends o.a{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(a),this.setStencilReference(),super.renderChildren(e)}createRenderParams(e){const{state:t}=e;return{...super.createRenderParams(e),requiredLevel:this._tileInfoView.getClosestInfoForScale(t.scale).level,displayLevel:this._tileInfoView.tileInfo.scaleToZoom(t.scale)}}prepareRenderPasses(e){const t=e.registerRenderPass({name:"stencil",brushes:[r.a],drawPhase:s.c.DEBUG|s.c.MAP|s.c.HIGHLIGHT,target:()=>this.getStencilTarget()}),i=e.registerRenderPass({name:"tileInfo",brushes:[n.a],drawPhase:s.c.DEBUG,target:()=>this.children,has:"esri-tiles-debug"});return[...super.prepareRenderPasses(e),t,i]}getStencilTarget(){return this.children}updateTransforms(e){for(const t of this.children){const i=this._tileInfoView.getTileResolution(t.key);t.setTransform(e,i)}}setStencilReference(){let e=1;for(const t of this.children)t.stencilRef=e++}}},jncx:function(e,t,i){"use strict";i.r(t);var s=i("pO5D"),n=(i("wSAH"),i("6S2I"),i("zqDF"),i("WbKI"),i("04ZG")),r=(i("4EHJ"),i("ju1D"),i("9AIY"),i("AfLA")),o=i("6Az7"),a=i("4xTw");class l{constructor(){this.gradient=null,this.height=512,this.width=512}render(e){Object(r.b)(e,512,this.intensities,this.gradient,this.minPixelIntensity,this.maxPixelIntensity)}}let c=class extends a.a{constructor(e){super(e),this._intensityInfo={minPixelIntensity:0,maxPixelIntensity:0},this.featuresView={attributeView:{initialize:()=>{},requestUpdate:()=>{}},requestRender:()=>{}},this._container=new o.a(e.tileInfoView)}createTile(e){const t=this._container.createTile(e);return this.tileInfoView.getTileCoords(t.bitmap,e),t.bitmap.resolution=this.tileInfoView.getTileResolution(e),t}onConfigUpdate(){const e=this.layer.renderer;if("heatmap"===e.type){const{minPixelIntensity:t,maxPixelIntensity:i}=e;this._intensityInfo.minPixelIntensity=t,this._intensityInfo.maxPixelIntensity=i,this._gradient=Object(r.c)(e.toJSON()),this.tiles.forEach(e=>{const s=e.bitmap.source;s&&(s.minPixelIntensity=t,s.maxPixelIntensity=i,s.gradient=this._gradient,e.bitmap.invalidateTexture())})}}hitTest(){return Promise.resolve([])}install(e){e.addChild(this._container)}uninstall(e){this._container.removeAllChildren(),e.removeChild(this._container)}disposeTile(e){this._container.removeChild(e),e.destroy()}supportsRenderer(e){return e&&"heatmap"===e.type}onTileData(e){const t=this.tiles.get(e.tileKey);if(!t)return;const i=e.intensityInfo,{minPixelIntensity:s,maxPixelIntensity:n}=this._intensityInfo,r=t.bitmap.source||new l;r.intensities=i&&i.matrix||null,r.minPixelIntensity=s,r.maxPixelIntensity=n,r.gradient=this._gradient,t.bitmap.source=r,this._container.addChild(t),this.requestUpdate()}onTileError(e){console.error(e)}lockGPUUploads(){}unlockGPUUploads(){}};c=Object(s.a)([Object(n.a)("esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer")],c),t.default=c}}]);