(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["processors-SymbolProcessor-js"],{

/***/ "+yyC":
/*!**************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/libs/earcut/earcut.js ***!
  \**************************************************************/
/*! exports provided: deviation, earcut */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "deviation", function() { return s; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "earcut", function() { return e; });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function e(e,t,r){const i=t&&t.length,u=i?t[0]*r:e.length;let o=n(e,0,u,r,!0);const l=new Array;if(!o||o.next===o.prev)return l;let y,p,c,v,s;if(i&&(o=f(e,t,o,r)),e.length>80*r){y=c=e[0],p=v=e[1];for(let n=r;n<u;n+=r){const t=e[n],x=e[n+1];y=Math.min(y,t),p=Math.min(p,x),c=Math.max(c,t),v=Math.max(v,x)}s=Math.max(c-y,v-p),s=0!==s?1/s:0}return x(o,l,r,y,p,s),l}function n(e,n,t,x,r){let i;if(r===a(e,n,t,x)>0)for(let o=n;o<t;o+=x)i=u(o,e[o],e[o+1],i);else for(let o=t-x;o>=n;o-=x)i=u(o,e[o],e[o+1],i);return i&&z(i,i.next)&&(o(i),i=i.next),i}function t(e,n=e){if(!e)return e;let t,x=e;do{if(t=!1,x.steiner||!z(x,x.next)&&0!==h(x.prev,x,x.next))x=x.next;else{if(o(x),x=n=x.prev,x===x.next)break;t=!0}}while(t||x!==n);return n}function x(e,n,u,l,f,y,p=0){if(!e)return;!p&&y&&(e=c(e,l,f,y));let v=e;for(;e.prev!==e.next;){const c=e.prev,s=e.next;if(y?i(e,l,f,y):r(e))n.push(c.index/u),n.push(e.index/u),n.push(s.index/u),o(e),e=s.next,v=s.next;else if((e=s)===v){p?1===p?x(e=m(e,n,u),n,u,l,f,y,2):2===p&&k(e,n,u,l,f,y):x(t(e),n,u,l,f,y,1);break}}}function r(e){const n=e.prev,t=e,x=e.next;if(h(n,t,x)>=0)return!1;let r=e.next.next;const i=r;let u=0;for(;r!==e.prev&&(0===u||r!==i);){if(u++,w(n.x,n.y,t.x,t.y,x.x,x.y,r.x,r.y)&&h(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function i(e,n,t,x){const r=e.prev,i=e,u=e.next;if(h(r,i,u)>=0)return!1;const o=r.x<i.x?r.x<u.x?r.x:u.x:i.x<u.x?i.x:u.x,l=r.y<i.y?r.y<u.y?r.y:u.y:i.y<u.y?i.y:u.y,f=r.x>i.x?r.x>u.x?r.x:u.x:i.x>u.x?i.x:u.x,y=r.y>i.y?r.y>u.y?r.y:u.y:i.y>u.y?i.y:u.y,p=M(o,l,n,t,x),c=M(f,y,n,t,x);let v=e.prevZ,s=e.nextZ;for(;v&&v.z>=p&&s&&s.z<=c;){if(v!==e.prev&&v!==e.next&&w(r.x,r.y,i.x,i.y,u.x,u.y,v.x,v.y)&&h(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,s!==e.prev&&s!==e.next&&w(r.x,r.y,i.x,i.y,u.x,u.y,s.x,s.y)&&h(s.prev,s,s.next)>=0)return!1;s=s.nextZ}for(;v&&v.z>=p;){if(v!==e.prev&&v!==e.next&&w(r.x,r.y,i.x,i.y,u.x,u.y,v.x,v.y)&&h(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;s&&s.z<=c;){if(s!==e.prev&&s!==e.next&&w(r.x,r.y,i.x,i.y,u.x,u.y,s.x,s.y)&&h(s.prev,s,s.next)>=0)return!1;s=s.nextZ}return!0}function u(e,n,t,x){const r=new B(e,n,t);return x?(r.next=x.next,r.prev=x,x.next.prev=r,x.next=r):(r.prev=r,r.next=r),r}function o(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function l(e){let n=e,t=e;do{(n.x<t.x||n.x===t.x&&n.y<t.y)&&(t=n),n=n.next}while(n!==e);return t}function f(e,x,r,i){const u=new Array;for(let t=0,o=x.length;t<o;t++){const r=n(e,x[t]*i,t<o-1?x[t+1]*i:e.length,i,!1);r===r.next&&(r.steiner=!0),u.push(l(r))}u.sort(b);for(const n of u)y(n,r),r=t(r,r.next);return r}function y(e,n){if(n=p(e,n)){const x=q(n,e);t(x,x.next)}}function p(e,n){let t=n;const x=e.x,r=e.y;let i,u=-1/0;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const e=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(e<=x&&e>u){if(u=e,e===x){if(r===t.y)return t;if(r===t.next.y)return t.next}i=t.x<t.next.x?t:t.next}}t=t.next}while(t!==n);if(!i)return null;if(x===u)return i.prev;const o=i,l=i.x,f=i.y;let y,p=1/0;for(t=i.next;t!==o;)x>=t.x&&t.x>=l&&x!==t.x&&w(r<f?x:u,r,l,f,r<f?u:x,r,t.x,t.y)&&(y=Math.abs(r-t.y)/(x-t.x),(y<p||y===p&&t.x>i.x)&&g(t,e)&&(i=t,p=y)),t=t.next;return i}function c(e,n,t,x){for(let r;r!==e;r=r.next){if(r=r||e,null===r.z&&(r.z=M(r.x,r.y,n,t,x)),r.prev.next!==r||r.next.prev!==r)return r.prev.next=r,r.next.prev=r,c(e,n,t,x);r.prevZ=r.prev,r.nextZ=r.next}return e.prevZ.nextZ=null,e.prevZ=null,v(e)}function v(e){let n,t=1;for(;;){let x,r=e;e=null,n=null;let i=0;for(;r;){i++,x=r;let u=0;for(;u<t&&x;u++)x=x.nextZ;let o=t;for(;u>0||o>0&&x;){let t;0===u?(t=x,x=x.nextZ,o--):0!==o&&x?r.z<=x.z?(t=r,r=r.nextZ,u--):(t=x,x=x.nextZ,o--):(t=r,r=r.nextZ,u--),n?n.nextZ=t:e=t,t.prevZ=n,n=t}r=x}if(n.nextZ=null,t*=2,i<2)return e}}function s(e,n,t,x){const r=n&&n.length,i=r?n[0]*t:e.length;let u=Math.abs(a(e,0,i,t));if(r)for(let l=0,f=n.length;l<f;l++){const x=n[l]*t,r=l<f-1?n[l+1]*t:e.length;u-=Math.abs(a(e,x,r,t))}let o=0;for(let l=0;l<x.length;l+=3){const n=x[l]*t,r=x[l+1]*t,i=x[l+2]*t;o+=Math.abs((e[n]-e[i])*(e[r+1]-e[n+1])-(e[n]-e[r])*(e[i+1]-e[n+1]))}return 0===u&&0===o?0:Math.abs((o-u)/u)}function h(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function d(e,n,t,x){return!!(z(e,n)&&z(t,x)||z(e,x)&&z(t,n))||h(e,n,t)>0!=h(e,n,x)>0&&h(t,x,e)>0!=h(t,x,n)>0}function Z(e,n){let t=e;do{if(t.index!==e.index&&t.next.index!==e.index&&t.index!==n.index&&t.next.index!==n.index&&d(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function a(e,n,t,x){let r=0;for(let i=n,u=t-x;i<t;i+=x)r+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return r}function w(e,n,t,x,r,i,u,o){return(r-u)*(n-o)-(e-u)*(i-o)>=0&&(e-u)*(x-o)-(t-u)*(n-o)>=0&&(t-u)*(i-o)-(r-u)*(x-o)>=0}function g(e,n){return h(e.prev,e,e.next)<0?h(e,n,e.next)>=0&&h(e,e.prev,n)>=0:h(e,n,e.prev)<0||h(e,e.next,n)<0}function M(e,n,t,x,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-x)*r)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function z(e,n){return e.x===n.x&&e.y===n.y}function b(e,n){return e.x-n.x}function m(e,n,t){let x=e;do{const r=x.prev,i=x.next.next;!z(r,i)&&d(r,x,x.next,i)&&g(r,i)&&g(i,r)&&(n.push(r.index/t),n.push(x.index/t),n.push(i.index/t),o(x),o(x.next),x=e=i),x=x.next}while(x!==e);return x}function k(e,n,r,i,u,o){let l=e;do{let e=l.next.next;for(;e!==l.prev;){if(l.index!==e.index&&A(l,e)){let f=q(l,e);return l=t(l,l.next),f=t(f,f.next),x(l,n,r,i,u,o),void x(f,n,r,i,u,o)}e=e.next}l=l.next}while(l!==e)}function A(e,n){return e.next.index!==n.index&&e.prev.index!==n.index&&!Z(e,n)&&g(e,n)&&g(n,e)&&j(e,n)}function j(e,n){let t=e,x=!1;const r=(e.x+n.x)/2,i=(e.y+n.y)/2;do{t.y>i!=t.next.y>i&&t.next.y!==t.y&&r<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(x=!x),t=t.next}while(t!==e);return x}function q(e,n){const t=new B(e.index,e.x,e.y),x=new B(n.index,n.x,n.y),r=e.next,i=n.prev;return e.next=n,n.prev=e,t.next=r,r.prev=t,x.next=t,t.prev=x,i.next=x,x.prev=i,x}class B{constructor(e,n,t){this.index=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}}


/***/ }),

/***/ "DsOJ":
/*!******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/processors/SymbolProcessor.js ***!
  \******************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/tslib.es6.js */ "pO5D");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/has.js */ "wSAH");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/maybe.js */ "srIe");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/Logger.js */ "6S2I");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/accessorSupport/ensureType.js */ "zqDF");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/property.js */ "WbKI");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/subclass.js */ "04ZG");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../core/Error.js */ "zlDU");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../core/urlUtils.js */ "4EHJ");
/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../core/uuid.js */ "ju1D");
/* harmony import */ var _portal_support_resourceExtension_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../portal/support/resourceExtension.js */ "9AIY");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../../core/promiseUtils.js */ "9MzC");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../geometry/SpatialReference.js */ "WZb1");
/* harmony import */ var _core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../../core/accessorSupport/diffUtils.js */ "DxxZ");
/* harmony import */ var _engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../engine/webgl/definitions.js */ "jIHu");
/* harmony import */ var _engine_webgl_util_BidiText_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../engine/webgl/util/BidiText.js */ "t7mB");
/* harmony import */ var _engine_webgl_collisions_CollisionGrid_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../engine/webgl/collisions/CollisionGrid.js */ "1agI");
/* harmony import */ var _engine_webgl_Utils_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../engine/webgl/Utils.js */ "yN2G");
/* harmony import */ var _engine_webgl_cpuMapped_DisplayRecordReader_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../engine/webgl/cpuMapped/DisplayRecordReader.js */ "n21L");
/* harmony import */ var _support_AttributeStore_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../support/AttributeStore.js */ "2AbE");
/* harmony import */ var _engine_webgl_mesh_MeshData_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../engine/webgl/mesh/MeshData.js */ "acOm");
/* harmony import */ var _engine_webgl_mesh_factories_matcherUtils_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../engine/webgl/mesh/factories/matcherUtils.js */ "Bcjy");
/* harmony import */ var _textUtils_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../textUtils.js */ "MrbB");
/* harmony import */ var _engine_webgl_mesh_templates_WGLTemplateStore_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../engine/webgl/mesh/templates/WGLTemplateStore.js */ "Dw8i");
/* harmony import */ var _engine_webgl_mesh_factories_WGLMeshFactory_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../engine/webgl/mesh/factories/WGLMeshFactory.js */ "J3nV");
/* harmony import */ var _BaseProcessor_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./BaseProcessor.js */ "ukaK");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger("esri.views.2d.layers.features.processors.SymbolProcessor");function k(e,t){return(!e.minScale||e.minScale>=t)&&(!e.maxScale||e.maxScale<=t)}function x(e){const t=e.message,i={message:{data:{},tileKey:t.tileKey},transferList:new Array};for(const o in t.data){const e=t.data[o];if(i.message.data[o]=null,Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__["isSome"])(e)){const t=e.stride,r=e.indices.slice(0),a=e.vertices.slice(0),n=e.records.slice(0),c={stride:t,indices:r,vertices:a,records:n,metrics:Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__["andThen"])(e.metrics,(e=>e.slice(0)))};i.transferList.push(r,a,n),i.message.data[o]=c}}return i}let C=class extends _BaseProcessor_js__WEBPACK_IMPORTED_MODULE_25__["default"]{constructor(){super(...arguments),this.type="symbol",this._matchers={feature:null,aggregate:null},this._bufferData=new Map}initialize(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])}destroy(){}get supportsTileUpdates(){return!0}async update(e,r){const s=r.schema.processors[0];if("symbol"!==s.type)return;const i=Object(_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_13__["diff"])(this._schema,s);Object(_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_13__["hasDiff"])(i,"mesh")&&(Object(_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-2d-update-debug")&&console.debug("Applying Update - Processor:",i),e.mesh=!0,e.why.mesh.push("Symbology changed"),this._schema=s,this._factory=this._createFactory(s),this._factory.update(s,this.tileStore.tileScheme.tileInfo))}onTileMessage(e,t,r,s){return Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__["throwIfAborted"])(s),this._onTileData(e,t,r,s)}onTileClear(e){const t={clear:!0};return this._bufferData.delete(e.key.id),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:t})}onTileError(e,t,r){const s=r.signal,i={tileKey:e.id,error:t};return this.remoteClient.invoke("tileRenderer.onTileError",i,{signal:s})}onTileUpdate(e){for(const t of e.removed){if(!this._bufferData.has(t.key.id))continue;this._bufferData.get(t.key.id).forEach((e=>{const t=new Set;Object(_engine_webgl_Utils_js__WEBPACK_IMPORTED_MODULE_17__["forEachGeometryType"])((s=>{const i=e.message.data[s];if(Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__["isSome"])(i)){const e=_engine_webgl_cpuMapped_DisplayRecordReader_js__WEBPACK_IMPORTED_MODULE_18__["DisplayRecordReader"].from(i.records).getCursor();for(;e.next();)t.add(e.id)}}));const s=e.message.tileKey,i={type:"update",addOrUpdate:null};return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:s,data:i})})),this._bufferData.delete(t.key.id)}for(const t of e.added)this._bufferData.forEach((e=>{for(const r of e)r.message.tileKey===t.id&&this._updateTileMesh("append",t,x(r),[],!1,!1,null)}))}_addBufferData(e,t){this._bufferData.has(e)||this._bufferData.set(e,[]),this._bufferData.get(e).push(x(t))}_createFactory(e){const{geometryType:t,objectIdField:r,fields:i}=this.service,o=(e,t)=>this.remoteClient.invoke("tileRenderer.getMaterialItems",e,t),a={geometryType:t,fields:i,spatialReference:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_12__["default"].fromJSON(this.spatialReference)},n=new _engine_webgl_mesh_templates_WGLTemplateStore_js__WEBPACK_IMPORTED_MODULE_23__["WGLTemplateStore"](o,!1),{matcher:c,aggregateMatcher:l}=e.mesh;return this._store=n,this._matchers.feature=Object(_engine_webgl_mesh_factories_matcherUtils_js__WEBPACK_IMPORTED_MODULE_21__["createMatcher"])(c,n,a),this._matchers.aggregate=Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__["andThen"])(l,(e=>Object(_engine_webgl_mesh_factories_matcherUtils_js__WEBPACK_IMPORTED_MODULE_21__["createMatcher"])(e,n,a))),new _engine_webgl_mesh_factories_WGLMeshFactory_js__WEBPACK_IMPORTED_MODULE_24__["WGLMeshFactory"](t,r,n)}async _onTileData(e,t,r,s){const{type:o,addOrUpdate:a,remove:n}=t,c=t.end;if(!a){const t={type:o,addOrUpdate:null,remove:n,clear:!1,end:c};return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:t},s)}const d=this._processFeatures(e,a,r,s);try{const r=await d;if(Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__["isNone"])(r)){const t={type:o,addOrUpdate:null,remove:n,clear:!1,end:c};return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:t},s)}for(const t of r)e.key.id!==t.message.tileKey&&this._addBufferData(e.key.id,t);await Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__["all"])(r.map((r=>{const i=e.key.id===r.message.tileKey,a=i?t.remove:[],n=i&&t.end;return this._updateTileMesh(o,e,r,a,n,t.clear,s.signal)})))}catch(m){this._handleError(e,m,s)}}async _updateTileMesh(e,t,r,i,a,n,l){const d=e,m=r.message.tileKey;m!==t.key.id&&(a=!1);const p=Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__["andThen"])(r,(e=>e.message)),h=Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__["andThen"])(r,(e=>e.transferList))||[],f={type:d,addOrUpdate:p,remove:i,clear:!1,end:a},u={transferList:Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__["unwrap"])(h)||[],signal:l};return Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__["throwIfAborted"])(u),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:m,data:f},u)}async _processFeatures(e,t,r,s){if(Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__["isNone"])(t)||!t.hasFeatures)return null;const o={transform:e.transform,hasZ:!1,hasM:!1},a=this._factory,n={viewingMode:"",scale:e.scale},l=await this._matchers.feature,d=await this._matchers.aggregate;Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__["throwIfAborted"])(s);const m=this._getLabelInfos(e,t);return await a.analyze(t.getCursor(),l,d,o,n),Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__["throwIfAborted"])(s),this._writeFeatureSet(e,t,o,m,a,r)}_writeFeatureSet(e,t,s,i,o,a){const n=t.getApproximateSize(),c="simple"===this._schema.mesh.matcher.type&&this._schema.mesh.matcher.isDotDensity,l=new _engine_webgl_mesh_MeshData_js__WEBPACK_IMPORTED_MODULE_20__["MeshData"](e.key.id,{features:n,records:n,metrics:0},c,a,!0),d={viewingMode:"",scale:e.scale},m=t.getCursor();for(;m.next();)try{const t=m.getDisplayId(),a=Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__["isSome"])(i)?i.get(t):null;o.writeCursor(l,m,s,d,e.level,a)}catch(h){}const p=e.tileInfoView.tileInfo.isWrappable;return l.serialize(p)}_handleError(e,t,r){if(!Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__["isAbortError"])(t)){const s={tileKey:e.id,error:t.message};return this.remoteClient.invoke("tileRenderer.onTileError",s,{signal:r.signal})}}_getLabelInfos(e,t){const r=this._schema.mesh.labels,o=Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__["andThen"])(r,(t=>t.filter((t=>k(t,e.scale)))));if(Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__["isNone"])(o)||0===o.length)return null;const a=new Map,n=(new _engine_webgl_collisions_CollisionGrid_js__WEBPACK_IMPORTED_MODULE_16__["CollisionGrid"](_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_14__["COLLISION_EARLY_REJECT_BUCKET_SIZE"]),t.getCursor());for(;n.next();){const e=n.getDisplayId(),t=[],r=Object(_support_AttributeStore_js__WEBPACK_IMPORTED_MODULE_19__["isAggregateId"])(e),s=r&&1!==n.readAttribute("cluster_count")?"aggregate":"feature";for(const i of o){if(i.target!==s)continue;const o=n.getStorage(),a=r&&"feature"===s?o.getComputedStringAtIndex(n.readAttribute("referenceId"),i.fieldIndex):o.getComputedStringAtIndex(e,i.fieldIndex);if(!a)continue;const c=Object(_engine_webgl_util_BidiText_js__WEBPACK_IMPORTED_MODULE_15__["bidiText"])(a.toString()),l=c[0],d=c[1];this._store.getMosaicItem(i.symbol,Object(_textUtils_js__WEBPACK_IMPORTED_MODULE_22__["codepoints"])(l)).then((e=>{t[i.index]={glyphs:e.glyphMosaicItems,rtl:d,index:i.index}}))}a.set(e,t)}return a}_shouldDiscard(e,t){switch(this.service.geometryType){case"esriGeometryPoint":{const r=t.readLegacyPointGeometry();return!r||e.checkOverlap(r.x,r.y)}case"esriGeometryPolygon":{const r=t.readLegacyCentroid();return!r||e.checkOverlap(r.x,r.y)}default:return!1}}_markUsed(e,t){switch(this.service.geometryType){case"esriGeometryPoint":{const{x:r,y:s}=t.readLegacyPointGeometry();return e.markUsed(r,s)}case"esriGeometryPolygon":{const{x:r,y:s}=t.readLegacyCentroid();return e.markUsed(r,s)}}}};C=Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__["subclass"])("esri.views.2d.layers.features.processors.SymbolProcessor")],C);var U=C;/* harmony default export */ __webpack_exports__["default"] = (U);


/***/ }),

/***/ "GMaR":
/*!************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/materialKey/MaterialKey.js ***!
  \************************************************************************************/
/*! exports provided: FillMaterialKey, LabelMaterialKey, LineMaterialKey, MarkerMaterialKey, MaterialKeyBase, TextMaterialKey, createMaterialKey, getFillVVFlags, getLabelVVFlags, getLineVVFlags, getMarkerVVFlags, getSizeFlagsMask, getTextVVFlags, hydrateMaterialKey */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FillMaterialKey", function() { return C; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LabelMaterialKey", function() { return N; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LineMaterialKey", function() { return b; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MarkerMaterialKey", function() { return w; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MaterialKeyBase", function() { return _; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TextMaterialKey", function() { return F; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createMaterialKey", function() { return A; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFillVVFlags", function() { return o; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLabelVVFlags", function() { return u; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getLineVVFlags", function() { return v; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getMarkerVVFlags", function() { return n; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSizeFlagsMask", function() { return a; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTextVVFlags", function() { return h; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hydrateMaterialKey", function() { return f; });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/Error.js */ "zlDU");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../enums.js */ "yE7X");
/* harmony import */ var _mesh_templates_meshUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../mesh/templates/meshUtils.js */ "m3fN");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function a(t,s=!1){const r=_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].SIZE_FIELD_STOPS|_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].SIZE_MINMAX_VALUE|_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].SIZE_SCALE_STOPS|_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].SIZE_UNIT_VALUE,a=(t&(_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVTarget"].FIELD_TARGETS_OUTLINE|_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVTarget"].MINMAX_TARGETS_OUTLINE|_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVTarget"].SCALE_TARGETS_OUTLINE|_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVTarget"].UNIT_TARGETS_OUTLINE))>>>4;return s?r&a:r&~a}function n(t){const i=a(t,!1);return t&(_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].COLOR|_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].OPACITY|_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].ROTATION|i)}function o(t){return t&(_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].COLOR|_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].OPACITY)}function v(t,i){if(i){return t&a(t,!0)}const s=a(t,!1);return t&(_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].COLOR|_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].OPACITY|s)}function h(t){return n(t)}function u(t){return t&a(t,!1)}const S=0,l=8,c=7,d=8,V=11,p=11,g=12,z=13,T=14,y=15,E=15,m=16,L=17,O=18,I=19,M=20;function A(t,e,i,r,a){switch(t){case _enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].FILL:return C.from(e,r);case _enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].LINE:return b.from(e,i);case _enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].MARKER:return w.from(e);case _enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].TEXT:return F.from(e);case _enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].LABEL:return N.from(e,a);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${t}`)}}function f(t){switch(_.load(t).geometryType){case _enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].MARKER:return new w(t);case _enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].FILL:return new C(t);case _enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].LINE:return new b(t);case _enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].TEXT:return new F(t);case _enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].LABEL:return new N(t)}}class _{constructor(t){this._data=0,this._data=t}static load(t){const e=this.shared;return e.data=t,e}set data(t){this._data=t}get data(){return this._data}get geometryType(){return this.bits(d,V)}set geometryType(t){this.setBits(t,d,V)}get mapAligned(){return!!this.bit(M)}set mapAligned(t){this.setBit(M,t)}get sdf(){return!!this.bit(p)}set sdf(t){this.setBit(p,t)}get pattern(){return!!this.bit(g)}set pattern(t){this.setBit(g,t)}get textureBinding(){return this.bits(S,l)}set textureBinding(t){this.setBits(t,S,l)}get geometryTypeString(){switch(this.geometryType){case _enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].FILL:return"fill";case _enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].MARKER:return"marker";case _enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].LINE:return"line";case _enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].TEXT:return"text";case _enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].LABEL:return"label";default:throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(t,e){const i=1<<t;e?this._data|=i:this._data&=~i}bit(t){return(this._data&1<<t)>>t}setBits(t,e,i){for(let s=e,r=0;s<i;s++,r++)this.setBit(s,0!=(t&1<<r))}bits(t,e){let i=0;for(let s=t,r=0;s<e;s++,r++)i|=this.bit(s)<<r;return i}hasVV(){return!1}setVV(t,e){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(c&this.textureBinding)}}_.shared=new _(0);const x=t=>class extends t{get vvSizeMinMaxValue(){return 0!==this.bit(m)}set vvSizeMinMaxValue(t){this.setBit(m,t)}get vvSizeScaleStops(){return 0!==this.bit(L)}set vvSizeScaleStops(t){this.setBit(L,t)}get vvSizeFieldStops(){return 0!==this.bit(O)}set vvSizeFieldStops(t){this.setBit(O,t)}get vvSizeUnitValue(){return 0!==this.bit(I)}set vvSizeUnitValue(t){this.setBit(I,t)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(t,i){super.setVV(t,i);const s=a(t,i)&t;this.vvSizeMinMaxValue=!!(s&_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(s&_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(s&_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(s&_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].SIZE_SCALE_STOPS)}},R=t=>class extends t{get vvRotation(){return 0!==this.bit(y)}set vvRotation(t){this.setBit(y,t)}hasVV(){return super.hasVV()||this.vvRotation}setVV(t,i){super.setVV(t,i),this.vvRotation=!i&&!!(t&_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].ROTATION)}},U=t=>class extends t{get vvColor(){return 0!==this.bit(z)}set vvColor(t){this.setBit(z,t)}hasVV(){return super.hasVV()||this.vvColor}setVV(t,i){super.setVV(t,i),this.vvColor=!i&&!!(t&_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].COLOR)}},B=t=>class extends t{get vvOpacity(){return 0!==this.bit(T)}set vvOpacity(t){this.setBit(T,t)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(t,i){super.setVV(t,i),this.vvOpacity=!i&&!!(t&_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLVVFlag"].OPACITY)}};class C extends(U(B(_))){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const i=this.load(0);return i.geometryType=_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].FILL,e?i.dotDensity=!0:i.setVV(t,!1),i.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,vvColor:this.vvColor,vvOpacity:this.vvOpacity}}get dotDensity(){return!!this.bit(E)}set dotDensity(t){this.setBit(E,t)}}C.shared=new C(0);class w extends(U(B(R(x(_))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].MARKER,e.setVV(t,!1),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}w.shared=new w(0);class b extends(U(B(x(_)))){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const i=this.load(0);return i.geometryType=_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].LINE,i.setVV(t,e),i.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}b.shared=new b(0);class F extends(U(B(R(x(_))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(t);return e.geometryType=_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].TEXT,e.setVV(t,!1),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}F.shared=new F(0);class N extends(x(_)){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const i=this.load(0);return i.geometryType=_enums_js__WEBPACK_IMPORTED_MODULE_1__["WGLGeometryType"].LABEL,i.setVV(t,!1),i.mapAligned=!!Object(_mesh_templates_meshUtils_js__WEBPACK_IMPORTED_MODULE_2__["isMapAligned"])(e),i.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}N.shared=new N(0);


/***/ }),

/***/ "HQFP":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/GeometryUtils.js ***!
  \**************************************************************************/
/*! exports provided: C_256_TO_RAD, C_2PI, C_DEG_TO_256, C_DEG_TO_RAD, C_INFINITY, C_PI, C_PI_BY_2, C_RAD_TO_256, C_SQRT2, C_SQRT2_INV, between, degToByte, interpolate, log2, positiveMod, radToByte, sqr */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "C_256_TO_RAD", function() { return e; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "C_2PI", function() { return r; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "C_DEG_TO_256", function() { return c; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "C_DEG_TO_RAD", function() { return f; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "C_INFINITY", function() { return n; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "C_PI", function() { return t; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "C_PI_BY_2", function() { return u; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "C_RAD_TO_256", function() { return o; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "C_SQRT2", function() { return i; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "C_SQRT2_INV", function() { return I; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "between", function() { return g; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "degToByte", function() { return M; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "interpolate", function() { return b; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "log2", function() { return P; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "positiveMod", function() { return a; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "radToByte", function() { return h; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sqr", function() { return T; });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
const n=Number.POSITIVE_INFINITY,t=Math.PI,r=2*t,u=t/2,o=128/t,e=t/128,c=256/360,f=t/180,i=1.414213562,I=1/i,N=1/Math.LN2;function a(n,t){return(n%=t)>=0?n:n+t}function h(n){return a(n*o,256)}function M(n){return a(n*c,256)}function P(n){return Math.log(n)*N}function T(n){return n*n}function b(n,t,r){return n*(1-r)+t*r}function g(n,t,r){return n>=t&&n<=r||n>=r&&n<=t}


/***/ }),

/***/ "m3fN":
/*!*************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/meshUtils.js ***!
  \*************************************************************************************/
/*! exports provided: isMapAligned */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isMapAligned", function() { return e; });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
function e(e){switch(e){case"above-along":case"below-along":case"center-along":return 1;default:return 0}}


/***/ })

}]);
//# sourceMappingURL=processors-SymbolProcessor-js.js.map